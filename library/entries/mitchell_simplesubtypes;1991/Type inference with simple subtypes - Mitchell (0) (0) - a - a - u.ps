%!PS-Adobe-3.0
%%Creator: groff version 1.09
%%CreationDate: Mon Apr 14 14:36:11 1997
%%DocumentNeededResources: font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%+ font Symbol
%%DocumentSuppliedResources: procset grops 1.09 0
%%+ font Symbol-Slanted
%%Pages: 54
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.09 0
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll 
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font Symbol
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Italic
%%IncludeResource: font Times-Roman
%%BeginResource: font Symbol-Slanted
%%DocumentNeededResources: font Symbol
/MakeTransformedFont{
findfont dup maxlength dict begin
{
exch dup dup/FID ne exch/UniqueID ne and{
exch def
}{
pop pop
}ifelse
}forall
/FontBBox
currentdict/FontBBox get
4 array copy def
FontBBox aload pop
4 index transform 4 2 roll
4 index transform 4 2 roll
FontBBox astore pop
FontMatrix exch matrix concatmatrix
/FontMatrix exch def
dup/FontName exch def
currentdict end
definefont pop
}bind def
/Symbol-Slanted
[.89 0.0 15.5 dup sin exch cos div .89 0.0 0.0]
/Symbol
MakeTransformedFont
%%EndResource
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Roman@0 ENC0/Times-Roman RE/Times-Italic@0 ENC0/Times-Italic RE
/Times-Bold@0 ENC0/Times-Bold RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 14/Times-Bold@0 SF -1.036(Ty)192.644 92 S(pe infer)1.036 E
(ence with simple subtypes)-.252 E/F1 12/Times-Italic@0 SF -.3(Jo)
248.076 132 S(hn C. Mitc).3 E(hell)-.18 E/F2 12/Times-Roman@0 SF
(Department of Computer Science)207.516 162 Q(Stanford Uni)240.744 182 Q
-.18(ve)-.3 G(rsity).18 E(Stanford, CA 94305)239.502 202 Q F1 -.66(Tu)
225.21 242 S(esday).66 E 3(,1)-.66 G 3(5J)-3 G(anuary 1991)-3.42 E/F3 12
/Times-Bold@0 SF(Abstract)265.674 262 Q F2 1.169
(Subtyping appears in a v)97 285.6 R 1.168
(ariety of programming languages, in the form of the)-.3 F .864
("automatic coercion" of inte)97 305.6 R .864(gers to reals, P)-.18 F
.865(ascal subranges, and subtypes aris-)-.18 F .319
(ing from class hierarchies in languages with inheritance.)97 325.6 R
3.318(Ag)6.318 G .318(eneral frame)-3.318 F -.12(wo)-.3 G(rk).12 E 1.323
(based on untyped lambda calculus pro)97 345.6 R 1.324
(vides a simple semantic model of sub-)-.18 F 1.131
(typing and is used to demonstrate that an e)97 365.6 R 1.13
(xtension of Curry')-.18 F 4.13(st)-.66 G 1.13(ype inference)-4.13 F
.519(rules are semantically complete.)97 385.6 R .52
(An algorithm G for computing the most gen-)6.519 F 1.69
(eral typing associated with an)97 405.6 R 4.69(yg)-.18 G -2.58 -.3
(iv e)-4.69 H 4.69(ne).3 G 1.69(xpression, and a restricted, optimized)
-4.87 F 1.951(algorithm GA using only atomic subtyping h)97 425.6 R
1.951(ypotheses are de)-.06 F -.18(ve)-.3 G 4.952(loped. Both).18 F .05
(algorithms may be e)97 445.6 R .05(xtended to insert type con)-.18 F
-.18(ve)-.48 G .049(rsion functions at compile time).18 F(or allo)97
465.6 Q 3(wp)-.3 G(olymorphic function declarations as in ML.)-3 E F3
(1. Intr)72 509.2 Q(oduction)-.216 E F2 -.96(Ty)97 536.4 S 2.033(pe inf\
erence is a form of type checking. In programming languages where all)
.96 F 1.916(identi\214ers are gi)72 556.4 R -.18(ve)-.3 G 4.916(nt).18 G
1.915(ypes as the)-4.916 F 4.915(ya)-.18 G 1.915
(re introduced, it is often a simple matter to check)-4.915 F .111(whet\
her the types of operators, functions and procedures agree with the typ\
es of operands)72 576.4 R .275(and actual parameters.)72 596.4 R -.18
(Fo)6.274 G 3.274(rs).18 G .274(ome programming applications, it is con)
-3.274 F -.18(ve)-.48 G .274(nient to be able to).18 F .265
(omit type declarations from programs, lea)72 616.4 R .265
(ving the programming language processor \(edi-)-.24 F(tor)72 636.4 Q
5.822(,i)-.48 G 2.822(nterpreter or compiler\) with the task of inferri\
ng the missing type information.)-5.822 F .921
(Automatic type inference may mak)72 656.4 R 3.921(ei)-.12 G 3.921(te)
-3.921 G .921(asier to write e)-3.921 F .921
(xperimental programs quickly or)-.18 F(allo)72 676.4 Q 3.087(was)-.3 G
.087(ingle untyped program to represent man)-3.087 F 3.087(ye)-.18 G
.087(xplicitly typed programs.)-3.267 F .087(In addition,)6.087 F 1.425
(type inference sometimes pro)72 696.4 R 1.426(vides more useful deb)
-.18 F 1.426(ugging information.)-.24 F 1.426(If we e)7.426 F 1.426
(xpect a)-.18 F 1.137(function to ha)72 716.4 R 1.497 -.18(ve o)-.24 H
1.137(ne type, and the programming language processor infers another).18
F 4.137(,t)-.48 G(his)-4.137 E .925(may suggest a b)72 736.4 R .926
(ug in the function declaration.)-.24 F -.96(Ty)6.926 G .926
(pe inference seems to ha).96 F 1.286 -.18(ve o)-.24 H(riginated).18 E
EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-2-)278.004 56 S .247(with [Curry and Fe)72 92
R .247(ys 58, Hindle)-.18 F 3.247(y6)-.18 G .246(9] and, independently)
-3.247 F 3.246(,[)-.78 G .246(Milner 78].)-3.246 F 3.246(Ag)6.246 G .246
(eneral discus-)-3.246 F .205(sion of the use of type inference in prog\
ramming languages may be found in [Milner 78];)72 112 R 1.274
(for further information on type inference, see, e.g., [Barendre)72 132
R 1.274(gt, Coppo and Dezani 83,)-.18 F .148(Coppo, Dezani and V)72 152
R .148(enneri, Coppo 83, Kanellakis, Mairson and Mitchell 9+, MacQueen,)
-1.332 F(Plotkin and Sethi 86, Mitchell 90, W)72 172 Q(and 87].)-.96 E
(Man)97 195.6 Q 3.02(yp)-.18 G .019
(rogramming languages use some form of subtyping.)-3.02 F .019
(The most common uses)6.019 F .294
(are in "coercions," as in the automatic con)72 215.6 R -.18(ve)-.48 G
.294(rsion of inte).18 F .294(gers to real \(\215oating point\) num-)
-.18 F 3.465(bers, and in the subclassing mechanisms of object-oriented\
 languages such as C)72 235.6 R/F1 10/Times-Roman@0 SF(++)-5 I F0 .841
([Stroustrop 86].)72 255.6 R .841(In this paper)6.841 F 3.841(,w)-.48 G
.841(hich e)-3.841 F .841
(xtends the conference abstract [Mitchell 84a], we)-.18 F .9(will in)72
275.6 R -.18(ve)-.48 G(stig).18 E .9(ate the semantics and algorithmic \
aspects of type inference for pure lambda)-.06 F .983
(terms in the presence of v)72 295.6 R .983(arious forms of subtyping h)
-.3 F 3.983(ypotheses. The)-.06 F .984(main results are a)3.983 F 1.019
(semantic completeness theorem and tw)72 315.6 R 4.019(ot)-.12 G 1.019
(ype inference algorithms.)-4.019 F 1.018(The semantic study)7.019 F
.661(uses a model of subtyping based on set containment: if type)72
335.6 R/F2 12/Symbol-Slanted SF(s)3.661 E F0 .662(is a subtype of)3.661
F F2(t)3.662 E F0 3.662(,t)C .662(hen we)-3.662 F .699
(will think of the set of v)72 355.6 R .699(alues associated with type)
-.3 F F2(s)3.699 E F0 .699(as a subset of the v)3.699 F .698
(alues associated)-.3 F .245(with type)72 375.6 R F2(t)3.245 E F0 6.245
(.M)C(athematically)-6.245 E 3.245(,t)-.78 G .245(he inte)-3.245 F .245
(gers may be re)-.18 F -.06(ga)-.18 G .245
(rded as a subset of the reals, and so).06 F .356(our model applies.)72
395.6 R .356(Some "subtyping" relationships, such as simpli\214ed v)
6.356 F .355(ersions of P)-.18 F(ascal)-.18 E 1.361
(subranges, may also be interpreted in this manner)72 415.6 R 7.361(.T)
-.66 G 1.361(he basic results in this paper may)-7.361 F 1.634(also ha)
72 435.6 R 1.993 -.18(ve s)-.24 H 1.633
(ome application to languages with subtyping deri).18 F -.18(ve)-.3 G
4.633(df).18 G 1.633(rom class hierarchies)-4.633 F .433
(\(cf. [Cardelli 88, W)72 455.6 R .434(and 87]\).)-.96 F(Ho)6.434 E(we)
-.3 E -.18(ve)-.3 G 1.394 -.48(r, w).18 H 3.434(ed).48 G 3.434(on)-3.434
G .434(ot consider subtyping based on structural)-3.434 F 1.102
(similarities between distinct record types.)72 475.6 R -.18(Fo)7.102 G
4.102(rd).18 G 1.102(iscussion of this related topic, see, e.g.,)-4.102
F .25([Cardelli 88, Cardelli and Mitchell 89, Jate)72 495.6 R -.06(ga)
-.18 G .25(onkar and Mitchell 88, W).06 F .251(and 87, Remy 88].)-.96 F
(Ev)97 519.2 Q 1.995(en without subtyping, type inference allo)-.18 F
1.995(ws a single untyped function to ha)-.3 F -.18(ve)-.24 G
(in\214nitely man)72 539.2 Q 3(yt)-.18 G 3(ypes. F)-3 F(or e)-.18 E
(xample, the body f\(x\) of the function)-.18 E(Apply\(f,x\) = f\(x\))
108 565.2 Q .82(has type t whene)72 591.2 R -.18(ve)-.3 G 3.82(rfh).18 G
.82(as functional type s)-3.82 F/F3 15/Symbol SF<ae>A F0 3.821(ta)C .821
(nd x has type s.)-3.821 F .821(\(The type operator)6.821 F F3<ae>3.821
E F0 1.941(means "function space," so s)72 611.2 R F3<ae>A F0 4.941(ti)C
4.941(st)-4.941 G 1.941
(he type of functions with domain s and range t.\))-4.941 F
(Thus Apply has type)72 631.2 Q(Apply: \(\(s)108 657.2 Q F3<ae>3 E F0
(t\))3 E/F4 12/Symbol SF<b4>3 E F0(s\))3 E F3<ae>3 E F0(t)3 E .118
(for e)72 683.2 R -.18(ve)-.3 G .118(ry pair of types s and t.).18 F
.119(\(The type operator)6.118 F F4<b4>3.119 E F0 .119
(means "product space." F)3.119 F .119(or e)-.18 F(xample,)-.18 E(int)72
703.2 Q F4<b4>3.24 E F0 .24(bool is the type of pairs)3.24 F .24
(<a,b> where a is an inte)6.24 F .24(ger and b is a boolean.\))-.18 F
.24(In particu-)6.24 F(lar)72 723.2 Q 5.444(,A)-.48 G 2.444(pply has e)
-5.444 F -.18(ve)-.3 G 2.445
(ry type that is a substitution instance of the abo).18 F 2.805 -.18
(ve ex)-.18 H 2.445(pression, for).18 F EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-3-)278.004 56 S -.18(ex)72 92 S(ample).18 E
(Apply: \(\(int)108 118 Q/F1 15/Symbol SF<ae>3 E F0(bool\))3 E/F2 12
/Symbol SF<b4>3 E F0(int\))3 E F1<ae>3 E F0(bool)3 E(Apply: \(\(real)108
158 Q F1<ae>3 E F0(int\))3 E F2<b4>3 E F0(real\))3 E F1<ae>3 E F0(int.)3
E .795(In typed programming languages similar to Algol or P)72 184 R
.794(ascal, we w)-.18 F .794(ould ha)-.12 F 1.154 -.18(ve t)-.24 H 3.794
(od).18 G .794(eclare a)-3.794 F(dif)72 204 Q 1.555(ferent Apply functi\
on for each type of application function that we need.)-.3 F(Ho)7.555 E
(we)-.3 E -.18(ve)-.3 G -.48(r,).18 G 1.294
(since application functions of dif)72 224 R 1.293
(ferent types are de\214ned the same w)-.3 F(ay)-.12 E 4.293(,e)-.78 G
1.293(xcept for type)-4.473 F .987
(declarations, this seems an unfortunate restriction; it w)72 244 R .987
(ould be simpler to declare Apply)-.12 F .975(only once.)72 264 R .974
(One w)6.975 F .974(ay for a typed language to allo)-.12 F 3.974(wt)-.3
G .974(his \215e)-3.974 F .974(xibility is to use a type infer)-.18 F(-)
-.24 E .395(ence algorithm.)72 284 R .395(Since an inference algorithm \
could infer that an untyped Apply function)6.395 F .756(has type \(\(s)
72 304 R F1<ae>A F0(t\))A F2<b4>A F0(s\))A F1<ae>A F0 3.756(tf)C .756
(or e)-3.756 F -.18(ve)-.3 G .756
(ry s and t, an inference algorithm could allo).18 F 3.755(wc)-.3 G .755
(alls of the)-3.755 F .153(form Apply\(g,y\) whene)72 324 R -.18(ve)-.3
G 3.153(rt).18 G .154
(he type of the pair \(g,y\) is a substitution instance of \(s)-3.153 F
F1<ae>A F0(t\))A F2<b4>A F0(s.)A 1.931(By this means, type inference al\
gorithms may be used to support an implicit form of)72 344 R
(polymorphism.)72 364 Q 3.001(ML is a popular and well-kno)97 387.6 R
3.001(wn programming language incorporating implicit)-.3 F .85
(polymorphism [Gordon, et. al. 79].)72 407.6 R .849
(In the ML type system, e)6.849 F -.18(ve)-.3 G .849(ry typable e).18 F
.849(xpression M)-.18 F .729(has a)72 427.6 R/F3 12/Times-Italic@0 SF
.729(most g)3.729 F(ener)-.12 E .729(al typing)-.18 F F0 3.729(,c)C .729
(onsisting of an association A of types to free v)-3.729 F .729
(ariables of M)-.3 F .066(and a type e)72 447.6 R(xpression)-.18 E/F4 12
/Symbol-Slanted SF(s)6.066 E F0 6.066(.T)C .066(he ef)-6.066 F
(\214cienc)-.3 E 3.066(yo)-.18 G 3.066(ft)-3.066 G .066
(he ML type check)-3.066 F .065(er seems to be a direct con-)-.12 F
1.325(sequence of the f)72 467.6 R 1.325(act that e)-.12 F -.18(ve)-.3 G
1.326(ry type of an ML e).18 F 1.326
(xpression may be constructed from the)-.18 F 1.011
(most general typing by substitution.)72 487.6 R 1.011(In this paper)
7.011 F 4.01(,w)-.48 G 4.01(ew)-4.01 G 1.01
(ill add subtyping to a subset of)-4.01 F .315
(ML and obtain similar results.)72 507.6 R -.18(Fo)6.315 G 3.315(re).18
G -.18(ve)-3.615 G .315
(ry typable M, there will be a set of subtyping con-).18 F .971
(ditions C, an association A of type e)72 527.6 R .971(xpressions to v)
-.18 F .971(ariables, and type e)-.3 F(xpression)-.18 E F4(s)3.971 E F0
(such)3.971 E .649(that e)72 547.6 R -.18(ve)-.3 G .649(ry le).18 F -.06
(ga)-.18 G 3.649(lt).06 G .649
(yping of M can be constructed from C, A and)-3.649 F F4(s)3.65 E F0
6.65(.W)C .65(ith subtyping, alter)-7.13 F(-)-.24 E(nati)72 567.6 Q
2.014 -.18(ve t)-.3 H 1.654(ypings are constructed from the principal t\
yping using substitution and a proof).18 F(system for subtypes.)72 587.6
Q 2.609(The typing algorithms de)97 611.2 R -.18(ve)-.3 G 2.609
(loped in this paper pro).18 F 2.609(vides a means for combining)-.18 F
(implicit)72 631.2 Q/F5 10/Times-Roman@0 SF(ML)3.796 E F0 .796
(-style polymorphism with user)B .796
(-speci\214ed subtyping or coercions.)-.24 F .795(There are a)6.795 F
3.705(number of programming language design issues surrounding user)72
651.2 R 3.705(-de\214ned coercions)-.24 F .336
(which will not be addressed in an)72 671.2 R 3.336(yd)-.18 G 3.336
(etail. As)-3.336 F -.12(fa)3.336 G 3.336(ra).12 G 3.336(st)-3.336 G
.336(ype inference goes, it may be possi-)-3.336 F 1.744(ble to allo)72
691.2 R 4.744(wa)-.3 G 1.745(rbitrary coercions to be declared at an)
-4.744 F 4.745(yp)-.18 G 1.745(oint in a program. Ho)-4.745 F(we)-.3 E
-.18(ve)-.3 G 2.705 -.48(r, i).18 H(f).48 E(user)72 711.2 Q .948
(-supplied con)-.24 F -.18(ve)-.48 G .947
(rsion functions are used, then the meaning of a program may not be).18
F 1.341(uniquely determined \(see [Re)72 731.2 R 1.341(ynolds 80]\).)
-.18 F -.18(Fo)7.342 G 4.342(rt).18 G 1.342
(his reason, most practical programming)-4.342 F EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-4-)278.004 56 S 2.057(languages are lik)72 92
R 2.057(ely to allo)-.12 F 5.057(wo)-.3 G 2.057
(nly a restricted form of user)-5.057 F 2.056
(-de\214ned subtypes, such as)-.24 F 1.874
(those associated with class and subclass declarations.)72 112 R 1.875
(One reasonable and algorithmi-)7.875 F .286
(cally interesting kind of subtyping is coercion between atomic types.)
72 132 R .286(Since the most rea-)6.286 F 1.77
(sonable place to declare ne)72 152 R 4.77(ws)-.3 G 1.771
(ubtyping relationships seems to be when ne)-4.77 F 4.771(wt)-.3 G 1.771
(ypes are)-4.771 F .866
(declared, and type declarations generally introduce ne)72 172 R 3.866
(wa)-.3 G .866(tomic type names, this may be)-3.866 F .108
(the most useful case in practice.)72 192 R .108
(In addition, atomic subtyping restricts the type inference)6.108 F
1.158(problem in a w)72 212 R 1.158(ay that allo)-.12 F 1.158
(ws optimization of the typing algorithm.)-.3 F(Finally)7.158 E 4.158
(,i)-.78 G 4.158(fa)-4.158 G 1.158(dded to)-4.158 F .747
(ML, atomic subtyping w)72 232 R .747(ould preserv)-.12 F 3.748(et)-.18
G .748(he character of the language in that precisely the)-3.748 F 1.974
(same set of pure e)72 252 R 1.974(xpressions w)-.18 F 1.974
(ould be typable.)-.12 F 1.974(One implication is that programmers)7.974
F -.12(wo)72 272 S .23(uld recei).12 F .59 -.18(ve a)-.3 H .231
(pproximately the same kind of error messages in ML with atomic subtyp-)
.18 F .882(ing as in ML without. Since the ML type check)72 292 R .881
(er has pro)-.12 F -.18(ve)-.18 G 3.881(nu).18 G .881
(seful for detecting errors)-3.881 F -.18(ove)72 312 S 4.175(rm).18 G
(an)-4.175 E 4.175(yy)-.18 G 1.175(ears, the restrictions imposed by at\
omic coercions might be useful in prac-)-4.175 F(tice.)72 332 Q .125
(Some basic f)97 355.6 R .125(acts about lambda calculus will be re)-.12
F(vie)-.3 E .125(wed in Section 2, follo)-.3 F .124(wed by a)-.3 F 1.49
(discussion of type e)72 375.6 R 1.49
(xpressions, coercions sets and typing statements in Section 3.)-.18 F
(The)7.49 E .955(typing rules and soundness and completeness theorems a\
re appear in Section 4.)72 395.6 R 3.954(Ag)6.954 G(en-)-3.954 E .491(e\
ral typing algorithm is presented in Section 5, and a restricted, optim\
ized v)72 415.6 R .492(ersion de)-.18 F -.18(ve)-.3 G(l-).18 E 1.86
(oped in Section 6.)72 435.6 R 1.86(Some e)7.86 F 1.86(xtensions and v)
-.18 F 1.86(ariations of the algorithms are discussed in)-.3 F .974
(Section 7, with Section 8 concluding.)72 455.6 R .975
(Uni\214cation and some v)6.975 F .975(ariants, which are used in)-.3 F
(the typing algorithms, are discussed in the appendix.)72 475.6 Q 2.569
(Preliminary v)97 499.2 R 2.569
(ersions of some of the results presented here were summarized in)-.18 F
.06([Mitchell 84a].)72 519.2 R .06
(Later studies \(based on [Mitchell 84a]\) include [Jate)6.06 F -.06(ga)
-.18 G .06(onkar and Mitchell).06 F(88, Fuh and Mishra 88, W)72 539.2 Q
(and and O'K)-.96 E(eefe 89].)-.3 E/F1 12/Times-Bold@0 SF
(2. Lambda Calculus and its Semantics)72 582.8 Q F0 1.52(Lambda calculu\
s will be used to demonstrate type inference with subtyping.)97 606.4 R
(The)7.52 E
(terms of untyped lambda calculus are de\214ned by the grammar)72 626.4
Q 3(M:)108 652.4 S(:= x | MN |)-3 E/F2 12/Symbol-Slanted SF(l)3 E F0
(x.M,)A 1.068(where x may be an)72 678.4 R 4.068(yv)-.18 G 4.068
(ariable. Intuiti)-4.368 F -.18(ve)-.3 G(ly).18 E 4.068(,M)-.78 G 4.068
(Ni)-4.068 G 4.068(st)-4.068 G 1.068(he application of function M to ar)
-4.068 F(gu-)-.216 E .814(ment N, and)72 698.4 R F2(l)3.814 E F0 .814
(x.M is the function we obtain by treating M as a function of x.)B
(Although)6.813 E .565(programs also contain constants lik)72 718.4 R
3.566(e0)-.12 G 3.566(,1)-3.566 G 3.566(,2)-3.566 G 3.566(,+a)-3.566 G
.566(nd ")-3.566 F F1(if)A F0(...)A F1(then)A F0(...)A F1(else)A F0 .566
(...", it will be notation-)B 1.003
(ally simpler to only consider pure lambda terms without constants.)72
738.4 R 1.002(The main results of)7.002 F EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-5-)278.004 56 S(this paper may be e)72 92 Q
(xtended to e)-.18 E(xpressions with constants without dif)-.18 E
(\214culty)-.3 E(.)-.78 E(A)97 115.6 Q/F1 12/Times-Italic@0 SF 1.083
(lambda model)4.083 F F0(<D,)4.083 E/F2 8/Times-Roman@0 SF<83>4.083 E F0
(,)A/F3 12/Symbol-Slanted SF(e)4.084 E F0 4.084(>i)C 4.084(sas)-4.084 G
1.084(et D together with binary operation)-4.084 F F2<83>4.084 E F0
4.084(,")C 1.084(choice ele-)-4.084 F(ment")72 135.6 Q F3(e)3.709 E/F4
12/Symbol SF<ce>4.669 E F0 .709(D, and elements K, S)2.749 F F4<ce>4.669
E F0 3.709(Ds)2.749 G .709(atisfying certain algebraic conditions.)
-3.709 F .708(This is the)6.708 F 1.311
(combinatory model de\214nition of [Me)72 155.6 R 1.312
(yer 82]; see also [Barendre)-.18 F 1.312(gt 84].)-.18 F 3.232 -.96
(We w)7.312 H 1.312(ill not be).96 F .486
(concerned with the speci\214c properties of K and S, b)72 175.6 R .486
(ut it is w)-.24 F .486(orth pointing out that \()-.12 F F3(e)A F2<83>A
F0(d\))A F2<83>A F0(e)A 3.399(=d)72 195.6 S F2<83>-3.399 E F0 3.399(ef)C
.399(or all d, e)-3.399 F F4<ce>.96 E F0 .4(D, and if d)-.96 F/F5 10
/Times-Roman@0 SF(1)5 I F2<83>-5 I F0 3.4(e=d)C F5(2)-3.4 5 M F2<83>-5 I
F0 3.4(ef)C .4(or all e)-3.4 F F4<ce>.96 E F0 .4(D, then)-.96 F F3(e)3.4
E F2<83>A F0(d)A F5(1)5 I F0(=)-5 I F3(e)A F2<83>A F0(d)A F5(2)5 I F0
6.4(.I)-5 K(ntuiti)-6.4 E -.18(ve)-.3 G(ly).18 E 3.4(,t)-.78 G .4
(hese con-)-3.4 F .089(ditions mean that)72 215.6 R F3(e)3.089 E F2<83>A
F0 3.089(dr)C .088
(epresents the same function \(on D\) as d, and that if d)-3.089 F F5(1)
5 I F0 .088(and d)3.088 -5 N F5(2)5 I F0(repre-)3.088 -5 M .258
(sent the same function, then)72 235.6 R F3(e)3.258 E F2<83>A F0(d)A F5
(1)5 I F0(=)-5 I F3(e)3.258 E F2<83>A F0(d)A F5(2)5 I F0 3.258(.T)-5 K
.258(his means that for e)-3.258 F -.18(ve)-.3 G .258
(ry function f which is rep-).18 F 1.35(resented by some d)72 255.6 R F4
<ce>.96 E F0 1.35(D, we can use)-.96 F F3(e)4.35 E F0 1.35
(to choose "canonical" element)4.35 F F3(e)4.349 E F2<83>A F0 4.349(dr)C
1.349(epresenting f.)-4.349 F 1.192(The f)72 275.6 R 1.193
(act that d and)-.12 F F3(e)4.193 E F2<83>A F0 4.193(dr)C 1.193
(epresent the same function will be important for understanding)-4.193 F
(some properties of functional types.)72 295.6 Q(Gi)97 319.2 Q -.18(ve)
-.3 G 3.911(nal).18 G .911(ambda model <D,)-3.911 F F2<83>3.911 E F0(,)A
F3(e)3.911 E F0 3.91(>a)C .91(nd en)-3.91 F(vironment)-.48 E F3(h)3.91 E
F0 .91(mapping v)3.91 F .91(ariables to elements)-.3 F
(of D, the meaning of a lambda term M is de\214ned inducti)72 339.2 Q
-.18(ve)-.3 G(ly by).18 E/F6 15/Times-Roman@0 SF -3([[)108 365.2 S F0(x)
6 E F6 -3(]])3 G F3(h)3 E F0(=)6 E F3(h)6 E F0(\(x\))A F6 -3([[)108
405.2 S F0(MN)6 E F6 -3(]])3 G F3(h)3 E F0(=)6 E F6 -3([[)6 G F0(M)6 E
F6 -3(]])3 G F3(h)3 E F2<83>3 E F6 -3([[)3 G F0(N)6 E F6 -3(]])3 G F3(h)
3 E F6 -3([[)108 445.2 S F3(l)6 E F0(x.M)A F6 -3(]])6 G F3(h)3 E F0(=)6
E F3(e)6 E F2<83>A F0(d, where d)A F2<83>A F0 6(e=)C F6 -3([[)-3 G F0(M)
6 E F6 -3(]])3 G F3(h)3 E F0([e/x])A .608(The e)72 471.2 R .608
(xistence of K and S ensure that there al)-.18 F -.12(wa)-.12 G .609
(ys e).12 F .609(xists a d as required in the de\214nition)-.18 F(of)72
491.2 Q F6 -3([[)5.624 G F3(l)3 E F0(x.M)A F6 -3(]])C F0 8.624(.T)3 G
2.624(he element)-8.624 F F3(e)5.624 E F0(mak)5.624 E 2.623
(es the meaning of)-.12 F F3(l)5.623 E F0 2.623
(x.M independent of the speci\214c)B .104(choice of d.)72 511.2 R(Ag)
6.104 E .104(ain, the reader is referred to [Barendre)-.06 F .104
(gt 84, Me)-.18 F .104(yer 82] for more informa-)-.18 F 4.414(tion. One)
72 531.2 R 1.414(speci\214c f)4.414 F 1.414(act rele)-.12 F -.3(va)-.3 G
1.414(nt to functional types is that if x is not free in M, then).3 F F6
-3([[)4.413 G F3(l)72 551.2 Q F0(x.Mx)A F6 -3(]])3 G F3(h)3 E F0(=)3 E
F3(e)3 E F2<83>A F6 -3([[)C F0(M)6 E F6 -3(]])3 G F3(h)3 E F0 4.925(Af)
97 574.8 S 2.525 -.3(ew f)-4.925 H 1.925(acts about the reduction rules\
 \(operational semantics\) of lambda calculus).18 F .369(will be used.)
72 594.8 R .368(The reader is referred to [Barendre)6.369 F .368
(gt 84] for a comprehensi)-.18 F .728 -.18(ve p)-.3 H(resentation.).18 E
1.92 -.96(We c)72 614.8 T(onsider lambda terms modulo).96 E F3(a)3 E F0
(-con)A -.18(ve)-.48 G(rsion).18 E(\()108 640.8 Q F3(a)A F0(\))A F3(l)12
E F0 3(x.M =)B F3(l)6 E F0 -.78(y.)C 3([y/x]M if).78 F 3(yi)3 G 3(sn)-3
G(ot free in M)-3 E(so that we can rename bound v)72 666.8 Q 3
(ariables. The)-.3 F(reduction rules are)3 E EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-6-)278.004 56 S(\()108 98 Q/F1 12
/Symbol-Slanted SF(b)A F0 12(\)\()C F1(l)-12 E F0(x.M\)N)A/F2 15/Symbol
SF<ae>3 E/F3 10/Symbol-Slanted SF(b)5 I F0([N/x]M,)3 -5 M(\()108 138 Q
F1(h)A F0(\))A F1(l)15 E F0(x.Mx)A F2<ae>9 E F3(h)5 I F0 12(Mi)6 -5 O 3
(fxi)-12 G 3(sn)-3 G(ot free in M,)-3 E 1.091(where substitution of N f\
or x in M, written [N/x]M, is de\214ned with renaming of bound)72 164 R
-.3(va)72 184 S .703(riables to a).3 F -.24(vo)-.24 G .703(id capture.)
.24 F .702(If a term M is of the form of the left-hand side of rule \()
6.703 F F1(b)A F0 3.702(\)o)C(r)-3.702 E(\()72 204 Q F1(h)A F0 .267
(\), then M is a)B F1(b)3.267 E F0 3.267(-o)C(r)-3.267 E F1(h)3.267 E F0
(-)A/F4 12/Times-Italic@0 SF -.444(re)C(de).444 E(x)-.24 E F0 6.267(.W)C
3.267(es)-7.227 G .267(ay that M)-3.267 F F1(b)3.267 E F0(-)A F4 -.444
(re)C .267(duces to N in one step).444 F F0 .268(if there is a sub-)
3.268 F .994(term P of M which is a)72 224 R F1(b)3.994 E F0(-rede)A
3.994(xa)-.18 G .994(nd N is the result of contracting this rede)-3.994
F 3.994(xi)-.18 G 3.994(nM)-3.994 G 6.994(.T)-3.994 G(he)-6.994 E .309
(term M)72 244 R F1(b)3.309 E F0(-)A F4 -.444(re)C(duces).444 E F0 .31
(to N, written M)3.309 F F2 -6<aeae>3.31 G F3(b)6 5 M F0 .31
(N, if there is a sequence of)3.31 -5 N F1(b)3.31 E F0 .31
(-reductions leading)B .99(from M to N.)72 264 R(The)6.989 E F1(h)3.989
E F0 .989(-reduction relation is de\214ned similarly)B 6.989(.T)-.78 G
.989(he combination of)-6.989 F F1(b)3.989 E F0 3.989(-a)C(nd)-3.989 E
F1(h)72 284 Q F0 1.49(-reduction is called)B F1(b)4.491 E F0(,)A F1(h)A
F0(-)A F4 -.444(re)C(duction).444 E F0 1.491(and written M)4.491 F F2 -6
<aeae>4.491 G F3(b)6 5 M/F5 10/Times-Roman@0 SF(,)A F3(h)A F0 4.491
(N. A)4.491 -5 N 1.491(term which cannot be)4.491 F(reduced is in)72 304
Q F4(normal form)3 E F0(.)A .588(The equational proof system for lambda\
 calculus is obtained by taking all instances)97 327.6 R .451(of \()72
347.6 R F1(a)A F0 3.451(\)a)C .451(nd an equational v)-3.451 F .452
(ersion of \()-.18 F F1(b)A F0 3.452(\)a)C 3.452(sa)-3.452 G .452
(xioms, along with inference rules to mak)-3.452 F 3.452(e=a)-.12 G 1.16
(congruence with respect to application and lambda abstraction. A)72
367.6 R F4 1.16(lambda theory)4.16 F F0 1.16(is an)4.16 F(y)-.18 E .854
(set of equations containing \()72 387.6 R F1(a)A F0 3.854(\)a)C .854
(nd \()-3.854 F F1(b)A F0 3.854(\)a)C .855
(nd closed under the inference rules. A theory is)-3.854 F F4 -.24(ex)72
407.6 S(tensional).24 E F0 .807
(if it contains all instances of an equational v)3.807 F .806
(ersion of \()-.18 F F1(h)A F0(\).)A F4(Con)6.806 E(ver)-.48 E(sion)-.12
E F0 .806(is the)3.806 F 3.852
(least congruence relation containing reducibility; =)72 427.6 R F3(b)5
I F0(denotes)6.852 -5 M F1(b)6.852 E F0(-con)A -.18(ve)-.48 G 3.853
(rsion and =).18 F F3(b)5 I F5(,)A F3(h)A F0(denotes)72 447.6 Q F1(b)
5.353 E F0(,)A F1(h)A F0(-con)A -.18(ve)-.48 G 5.353(rsion. Thus).18 F
(M=)5.352 E F3(b)5 I F0 5.352(Ni)-5 K 2.952 -.3(ff ev)-5.352 H 2.352
(ery theory contains M=N, and M=).12 F F3(b)5 I F5(,)A F3(h)A F0 5.352
(Ni)-5 K -.3(ff)-5.352 G -2.58 -.3(ev e)72 467.6 T(ry e).3 E
(xtensional theory contains M=N.)-.18 E .343
(One important model is the term model.)97 491.2 R(Gi)6.343 E -.18(ve)
-.3 G 3.343(na).18 G .704 -.18(ny l)-3.343 H .344(ambda theory).18 F F4
(Th)3.344 E F0 3.344(,w)C 3.344(el)-3.344 G .344(et [M])-3.344 F/F6 10
/Times-Italic@0 SF(Th)5 I F0 .94(be the set of terms N with M=N)72 511.2
R/F7 12/Symbol SF<ce>.96 E F4(Th)-.96 E F0 6.939(.T)C .939
(he term model <D,)-6.939 F/F8 8/Times-Roman@0 SF<83>3.939 E F0(,)A F1
(e)3.939 E F0 3.939(>f)C(or)-3.939 E F4(Th)3.939 E F0 .939(has equi)
3.939 F -.3(va)-.3 G(lence).3 E(classes of terms as elements,)72 531.2 Q
3(D={[)108 557.2 S(M])-3 E F6(Th)5 I F0 3(|Ma)3 -5 O 3(nu)-3 G
(ntyped term}.)-3 E(Application,)72 583.2 Q F8<83>3 E F0 3(,i)C 3(nt)-3
G(erm models is de\214ned by)-3 E([M])108 609.2 Q F8<83>A F0([N] = [MN])
A(and choice element de\214ned by)72 635.2 Q F1(e)108 661.2 Q F0 3(=[)3
G F1(l)-3 E F0(x.)A F1(l)A F0 -.78(y.)C(xy],).78 E .407
(where we omit the subscript)72 687.2 R F4(Th)3.407 E F0 .407
(when it seems to be clear from conte)3.407 F 3.408(xt. See)-.18 F
([Barendre)3.408 E(gt)-.18 E(84, Me)72 707.2 Q
(yer 82] for further discussion of term models.)-.18 E EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-7-)278.004 56 S/F1 12/Times-Bold@0 SF(3. T)72
92 Q(ype Expr)-.888 E(essions, Coer)-.216 E(cions and T)-.216 E
(ype Assignments)-.888 E F0 1.364(Although product types, lists, and ot\
her kinds of types are useful in programming)97 115.6 R 1.132(languages\
, function spaces seem to raise most of the signi\214cant typing issues\
 related to)72 135.6 R 1.51(subtyping, short of the more in)72 155.6 R
-.24(vo)-.48 G(lv).24 E 1.51
(ed problems that arise with record types \(see [Jate-)-.18 F -.06(ga)72
175.6 S .285(onkar and Mitchell 88, Cardelli and Mitchell 89]\).).06 F
(Therefore,)6.285 E/F2 15/Symbol SF<ae>3.285 E F0 .285
(will be the only type)3.285 F(connecti)72 195.6 Q -.18(ve)-.3 G 6(.W)
.18 G 3(ew)-6.96 G(ill adopt the notational con)-3 E -.18(ve)-.48 G
(ntions that).18 E .96 -.48(r, s)108 221.6 T 3(,t).48 G 3(,.)-3 G
(.. denote type v)-3 E(ariables)-.3 E/F3 12/Symbol-Slanted SF(r)108
261.6 Q F0(,)A F3(s)3 E F0(,)A F3(t)3 E F0 3(,.)C(.. denote type e)-3 E
(xpressions.)-.18 E 1.92 -.96(To b)72 287.6 T 3(ep).96 G
(recise, the type e)-3 E(xpressions are de\214ned by the grammar)-.18 E
F3(t)108 313.6 Q F0 6(::= t)3 F(|)6 E F3(s)6 E F2<ae>3 E F3(t)3 E F0(.)A
(Intuiti)72 339.6 Q -.18(ve)-.3 G(ly).18 E 4.358(,t)-.78 G 1.358
(he functional type)-4.358 F F3(s)4.358 E F2<ae>4.358 E F3(t)4.358 E F0
1.358(consists of the set of functions which tak)4.358 F 4.357(ea)-.12 G
-.216(rg)-4.357 G(u-).216 E .535(ments of type)72 359.6 R F3(s)3.535 E
F0 .535(to results of type)3.535 F F3(t)3.535 E F0 6.535(.W)C 3.535(eh)
-7.495 G -2.7 -.24(av e)-3.535 H .536
(omitted type constants as a matter of nota-)3.775 F .904(tional con)72
379.6 R -.18(ve)-.48 G .904
(nience, and to eliminate routine cases in inducti).18 F 1.264 -.18
(ve p)-.3 H 3.904(roofs. Constants).18 F .904(do not)3.904 F 1.866(alte\
r the inference rules, and require only minor modi\214cations to the su\
pporting algo-)72 399.6 R .016(rithms gi)72 419.6 R -.18(ve)-.3 G 3.016
(ni).18 G 3.016(nt)-3.016 G .016(he appendix.)-3.016 F .016
(The necessary modi\214cations will be discussed brie\215y there.)6.016
F -.18(Fo)97 443.2 S 3.635(rg).18 G .636
(rammatical reasons, we will often use "coercion" as a synon)-3.635 F
.636(ym for subtyping.)-.18 F 1.942 -.96(We w)72 463.2 T .022(ill use)
.96 F F3(s)3.022 E/F4 12/Symbol SF<cd>A F3(t)A F0 .022(to denote the f)
3.022 F .021(act \(or assumption\) that)-.12 F F3(s)3.021 E F0 .021
(is a subtype of)3.021 F F3(t)3.021 E F0(or)3.021 E 3.021(,e)-.48 G(qui)
-3.021 E -.3(va)-.3 G(lently).3 E .594(from our point of vie)72 483.2 R
2.154 -.78(w, v)-.3 H .594(alues of type).48 F F3(s)3.594 E F0 .594
(may be coerced to v)3.594 F .595(alues of type)-.3 F F3(t)3.595 E F0
6.595(.I)C 3.595(fw)-6.595 G 3.595(et)-3.595 G(hink)-3.595 E
(of subtyping as an ordering, then)72 503.2 Q F2<ae>3 E F0
(is monotonic in its second ar)3 E(gument:)-.216 E(if)108 529.2 Q F3(s)3
E F4<cd>3 E F3(r)3 E F0(then)9 E F3(t)9 E F2<ae>3 E F3(s)3 E F4<cd>6 E
F3(t)6 E F2<ae>3 E F3(r)3 E F0(.)A(Ho)72 555.2 Q(we)-.3 E -.18(ve)-.3 G
-.48(r,).18 G F2<ae>3.48 E F0(is)3 E/F5 12/Times-Italic@0 SF
(antimonotonic)3 E F0(in its \214rst ar)3 E(gument, i.e.)-.216 E(if)108
581.2 Q F3(s)3 E F4<cd>3 E F3(r)3 E F0(then)6 E F3(r)9 E F2<ae>3 E F3(t)
3 E F4<cd>6 E F3(s)6 E F2<ae>3 E F3(t)3 E F0 .236(rather than the re)72
607.2 R -.18(ve)-.3 G .236(rse inclusion. If e).18 F -.18(ve)-.3 G .236
(ry v).18 F .236(alue of type)-.3 F F3(s)3.236 E F0 .236
(can be treated as a v)3.236 F .236(alue of type)-.3 F F3(r)72 627.2 Q
F0 3.299(,t)C .299(hen e)-3.299 F -.18(ve)-.3 G .299
(ry function which maps).18 F F3(r)3.299 E F0(to)3.299 E F3(t)3.299 E F0
.299(also maps)3.299 F F3(s)3.299 E F0(to)3.299 E F3(t)3.3 E F0 6.3(.F)C
.3(or e)-6.48 F .3(xample, if f is a function)-.18 F .198
(of one real ar)72 647.2 R .198(gument, and inte)-.216 F .198
(gers are coercible to reals, then f should be applicable to all)-.18 F
(inte)72 667.2 Q 1.796(ger v)-.18 F 4.796(alues. Some)-.3 F 1.797
("domain-theoretic" semantics of)4.796 F F2<ae>4.797 E F0 1.797
(are carefully constructed so)4.797 F(that)72 687.2 Q F2<ae>3.267 E F0
.267(is monotonic in both ar)3.267 F .267
(guments, since this is helpful in solving domain equations)-.216 F .446
([Scott 76, Smyth and Plotkin 82].)72 707.2 R(Ho)6.447 E(we)-.3 E -.18
(ve)-.3 G 1.407 -.48(r, a).18 H .447(ntimonotonicity in the \214rst ar)
.48 F .447(gument is the)-.216 F .815(standard, cate)72 727.2 R .815
(gorical vie)-.18 F 3.814(wo)-.3 G 3.814(ff)-3.814 G .814
(unction spaces [Lambek and Scott 86, Mac Lane 71], and)-3.814 F EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-8-)278.004 56 S .404
(seems most natural when we think of containment as either substituti)72
92 R .404(vity or the ability to)-.3 F(coerce.)72 112 Q -.96(Ty)97 135.6
S .143(pes will be interpreted as arbitrary sets of elements of lambda \
models, as in pre).96 F(vi-)-.3 E 1.419(ous studies such as [Barendre)72
155.6 R 1.42(gt, Coppo and Dezani 83, Hindle)-.18 F 4.42(y8)-.18 G 4.42
(3a]. A)-4.42 F/F1 12/Times-Italic@0 SF 1.42(type en)4.42 F(vir)-.48 E
(on-)-.54 E(ment)72 175.6 Q/F2 12/Symbol-Slanted SF(h)3.03 E F0 .03
(for a model <D,)3.03 F/F3 8/Times-Roman@0 SF<83>3.03 E F0(,)A F2(e)3.03
E F0 3.03(>i)C 3.03(sa)-3.03 G .029(mapping from type v)-.001 F .029
(ariables to subsets of D.)-.3 F .029(The mean-)6.029 F(ing of a type e)
72 195.6 Q(xpression)-.18 E F2(s)3 E F0(in a type en)3 E(vironment)-.48
E F2(h)3 E F0(is de\214ned inducti)3 E -.18(ve)-.3 G(ly by).18 E/F4 15
/Times-Roman@0 SF -3([[)108 221.6 S F0(t)6 E F4 -3(]])3 G F2(h)3 E F0(=)
6 E F2(h)6 E F0(\(t\))A F4 -3([[)108 261.6 S F2(s)6 E/F5 15/Symbol SF
<ae>3 E F2(t)3 E F4 -3(]])3 G F2(h)3 E F0 6(={)9 G 3(d|)-6 G/F6 12
/Symbol SF(")A F0(e)3 E F6<ce>3.96 E F4 -3([[)2.04 G F2(s)6 E F4 -3(]])3
G F2(h)3 E F0 3(,d)C F3<83>-3 E F0(e)A F6<ce>3.96 E F4 -3([[)2.04 G F2
(t)6 E F4 -3(]])3 G F2(h)3 E F0(}.)A .201
(This is the "simple semantics" for)72 287.6 R F5<ae>3.201 E F0 6.201
(.N)C .201(ote that membership in)-6.201 F F2(s)3.201 E F5<ae>A F2(t)A
F0 .201(is determined only)3.201 F(by the applicati)72 307.6 Q .36 -.18
(ve b)-.3 H(eha).18 E(vior of an element d, so that)-.24 E(d)108 333.6 Q
F6<ce>.96 E F4 -3([[)-.96 G F2(s)3 E F5<ae>A F2(t)A F4 -3(]])C F2(h)3 E
F0(if)9 E(f)-.3 E F2(e)9 E F3<83>A F0(d)A F6<ce>.96 E F4 -3([[)-.96 G F2
(s)3 E F5<ae>A F2(t)A F4 -3(]])C F2(h)3 E F0(.)A .849(The simple semant\
ics will be used because this seems to be a natural and representati)72
359.6 R -.18(ve)-.3 G .549(interpretation of)72 379.6 R F5<ae>3.549 E F0
3.549(;o)C .549(ther semantics for)-3.549 F F5<ae>3.55 E F0 .55
(are discussed in [Hindle)3.55 F 3.55(y8)-.18 G .55(3a, Hindle)-3.55 F
3.55(y8)-.18 G(3b,)-3.55 E
(MacQueen and Sethi 82, Mitchell 88, Scott 76].)72 399.6 Q(A)97 423.2 Q
F1(coer)3.765 E .765(cion set)-.444 F F0 3.765(Ci)3.765 G 3.765(sas)
-3.765 G .765(et of subtype assertions)-3.765 F F2(s)3.764 E F6<cd>A F2
(t)A F0 .764(between types.)3.764 F 3.764(Am)6.764 G .764(odel <D,)
-3.764 F F3<83>3.764 E F0(,)A F2(e)72 443.2 Q F0 3(>a)C(nd type en)-3 E
(vironment)-.48 E F2(h)3 E F0(satisfy a coercion set C if)3 E F4 -3([[)
108 469.2 S F2(s)6 E F4 -3(]])3 G F2(h)3 E F6<cd>3 E F4 -3([[)3 G F2(t)6
E F4 -3(]])3 G F2(h)3 E F0(for all)9 E F2(s)3 E F6<cd>A F2(t)A F6<ce>
3.96 E F0(C.)2.04 E .47
(Generally speaking, coercion sets may include statements lik)72 495.2 R
3.471(e\()-.12 G(t)-3.471 E F5<ae>A F0(t\))A F6<cd>A F0 .471
(t, which are closer)B .709
(to "domain equations" than the simple containments lik)72 515.2 R(e)
-.12 E/F7 12/Times-Bold@0 SF(int)3.709 E F6<cd>A F7 -.216(re)C(al).216 E
F0 .709(which are often gi)3.709 F -.18(ve)-.3 G(n).18 E .478
(as typical e)72 535.2 R .478(xamples of coercions.)-.18 F .478(In f)
6.478 F .478(act, some coercion sets allo)-.12 F 3.479(wu)-.3 G 3.479
(st)-3.479 G 3.479(ot)-3.479 G .479(ype e)-3.479 F -.18(ve)-.3 G .479
(ry pure).18 F(lambda term. F)72 555.2 Q(or e)-.18 E(xample, the tw)-.18
E 3(oc)-.12 G(oercions)-3 E(\(t)108 581.2 Q F5<ae>3 E F0(t\))3 E F6<cd>3
E F0 15(ta)3 G 12(nd t)-15 F F6<cd>3 E F0(\(t)3 E F5<ae>3 E F0(t\),)3 E
.138(imply that t=t)72 607.2 R F5<ae>A F0 .138(t. Since e)B -.18(ve)-.3
G .137(ry solution of this equation forms a model of untyped lambda).18
F .893(calculus [Barendre)72 627.2 R .893
(gt 84, Scott 76, Scott 80, Smyth and Plotkin 82], we w)-.18 F .894
(ould e)-.12 F .894(xpect to)-.18 F 1.167(type e)72 647.2 R -.18(ve)-.3
G 1.167(ry term with these tw).18 F 4.167(oc)-.12 G 4.167
(oercions. This)-4.167 F 1.167(is borne out in Lemma 2.)4.167 F 1.167
(In later sec-)7.167 F 2.715(tions of the paper)72 667.2 R 5.715(,w)-.48
G 5.716(ew)-5.715 G 2.716(ill de)-5.716 F -.18(ve)-.3 G 2.716
(lop a typing algorithm which only allo).18 F 2.716(ws coercions)-.3 F
1.721(between atomic types, and therefore only types e)72 687.2 R 1.72
(xpressions which are typable without)-.18 F(coercions.)72 707.2 Q EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-9-)278.004 56 S(A)97 92 Q/F1 12
/Times-Italic@0 SF .995(type assignment)3.995 F F0 3.995(Ai)3.995 G
3.995(sa\214)-3.995 G .995
(nite set of basic typing statements of the form x:)-3.995 F/F2 12
/Symbol-Slanted SF(s)A F0 6.995(.A)C(n)-6.995 E(en)72 112 Q(vironment)
-.48 E F2(h)3.387 E F0 .387(mapping type v)3.387 F .387
(ariables to subsets of D and ordinary v)-.3 F .386
(ariables to elements)-.3 F(of D satis\214es a type assignment A if)72
132 Q F2(h)108 158 Q F0(\(x\))A/F3 12/Symbol SF<ce>3.96 E/F4 15
/Times-Roman@0 SF -3([[)2.04 G F2(s)6 E F4 -3(]])3 G F2(h)3 E F0
(for all)9 E(x:)9 E F2(s)A F3<ce>3.96 E F0(A.)2.04 E 1.129(If x is a v)
72 184 R(ariable,)-.3 E F2(s)4.129 E F0 4.129(at)4.129 G 1.129(ype e)
-4.129 F 1.129(xpression and A a type assignment, then A[x:)-.18 F F2(s)
A F0 4.13(]i)C 4.13(st)-4.13 G 1.13(he type)-4.13 F .629(assignment gi)
72 204 R -.18(ve)-.3 G 3.629(nb).18 G 3.629(yA)-3.629 G([x:)-3.629 E F2
(s)A F0 3.629(]=)C .628(\(A -- {x:)-.001 F F2(t)A F0(}\))A F3<c8>A F0
({x:)3.628 E F2(s)A F0 3.628(}i)C 3.628(fw)-3.628 G 3.628(eh)-3.628 G
-2.7 -.24(av e)-3.628 H(x:)3.868 E F2(t)A F3<ce>.96 E F0 .628
(A, and A[x:)-.96 F F2(s)A F0 3.628(]=A)C F3<c8>A F0({x:)72 224 Q F2(s)A
F0 3(}o)C(therwise.)-3 E(A)97 247.6 Q F1 1.976(typing statement)4.976 F
F0 1.976(describes the type of an e)4.976 F 1.977(xpression, gi)-.18 F
-.18(ve)-.3 G 4.977(nc).18 G 1.977(oercions between)-4.977 F
(types and the types of v)72 267.6 Q 3(ariables. Informally)-.3 F 3(,t)
-.78 G(he statement)-3 E(C,A)108 293.6 Q F3<c9>3 E F0(M:)3 E F2(s)A F0
1.833(means that if types may be coerced according to C, and free v)72
319.6 R 1.832(ariables ha)-.3 F 2.192 -.18(ve t)-.24 H 1.832(he types)
.18 F .602(assigned by A, then the term M has type)72 339.6 R F2(s)3.602
E F0 6.602(.M)C .603(ore formally)-6.602 F 3.603(,am)-.78 G .603
(odel <D,)-3.603 F/F5 8/Times-Roman@0 SF<83>3.603 E F0(,)A F2(e)3.603 E
F0 3.603(>a)C 3.603(nd en)-3.603 F(vi-)-.48 E(ronment)72 359.6 Q F2(h)
4.281 E F0 1.281(mapping term v)4.281 F 1.281
(ariables to elements of D and type v)-.3 F 1.28
(ariables to subsets of D)-.3 F F1(satisfy)72 379.6 Q F0 3(at)3 G
(yping M:)-3 E F2(s)A F0(if)3 E F4 -3([[)108 405.6 S F0(M)6 E F4 -3(]])3
G F2(h)3 E F3<ce>3.96 E F4 -3([[)2.04 G F2(s)6 E F4 -3(]])3 G F2(h)3 E
F0(.)A 3.113(As)72 431.6 S .113(tatement C,A)-3.113 F F3<c9>3.113 E F0
(M:)3.113 E F2(s)A F0 .113(holds \(or)3.113 F 3.113(,i)-.48 G 3.113(ss)
-3.113 G .113(atis\214ed\) in a model if e)-3.113 F -.18(ve)-.3 G .114
(ry en).18 F .114(vironment which sat-)-.48 F
(is\214es C and A also satis\214es M:)72 451.6 Q F2(s)A F0 6(.A)C
(statement is)-3 E F1(valid)3 E F0(if it holds in e)3 E -.18(ve)-.3 G
(ry model.).18 E/F6 12/Times-Bold@0 SF(4. Rules f)72 495.2 Q(or T)-.3 E
(ype Infer)-.888 E(ence)-.216 E(4.1. Ov)72 538.8 Q(er)-.12 E
(view of the rules)-.12 E F0 3.979 -.96(We w)97 562.4 T 2.059
(ill consider six type inference rules.).96 F 2.058
(The \214rst three are essentially Curry')8.059 F(s)-.66 E 1.497
(rules for functional types [Curry and Fe)72 582.4 R 1.497(ys 58].)-.18
F 1.497(The ne)7.497 F 1.498(xt rule, \(coerce\), formalizes the)-.18 F
.229(property that if a term M has type)72 602.4 R F2(s)3.229 E F0 3.229
(,a)C .229(nd the type)-3.229 F F2(s)3.229 E F0 .229
(is coercible to the type)3.229 F F2(t)3.229 E F0 3.229(,t)C .229
(hen M also)-3.229 F 1.717(has type)72 622.4 R F2(t)4.717 E F0 7.717(.T)
C 1.717(hese four rules will be called the)-7.717 F F1 1.718
(Curry rules with coer)4.718 F(cions)-.444 E F0 4.718(,o)C(r)-4.718 E F6
(CC)4.718 E F0(for)4.718 E .471(short, and will pro)72 642.4 R .471
(vide the basis for the typing algorithm G in Section 6.)-.18 F .471
(As in [Gordon,)6.471 F 1.157
(et. al. 79, Milner 78], rules for other applicati)72 662.4 R 1.517 -.18
(ve p)-.3 H 1.157(rogramming language constructs may).18 F .214
(be added.)72 682.4 R(Ho)6.214 E(we)-.3 E -.18(ve)-.3 G 1.174 -.48(r, t)
.18 H .214(he main issues in).48 F -.24(vo)-.48 G(lv).24 E .214
(ed in treating coercions seem adequately illus-)-.18 F
(trated by the system we will consider)72 702.4 Q(.)-.66 E EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-1)275.004 56 S 3(0-)-3 G .433
(The Curry rules with coercions are not semantically complete.)97 92 R
.434(If we w)6.434 F .434(ant semantic)-.12 F 1.407
(completeness, then untyped terms that ha)72 112 R 1.767 -.18(ve t)-.24
H 1.407(he same meaning must be gi).18 F -.18(ve)-.3 G 4.406(nt).18 G
1.406(he same)-4.406 F 3.45(types. The)72 132 R .45(simplest w)3.45 F
.45(ay to achie)-.12 F .81 -.18(ve t)-.3 H .451
(his is to add a \214fth rule \(equal\) based on equality of).18 F .1
(untyped terms.)72 152 R(Ho)6.1 E(we)-.3 E -.18(ve)-.3 G 1.06 -.48(r, w)
.18 H 3.1(ew).48 G .1(ill see that with the "simple semantics" of)-3.1 F
/F1 15/Symbol SF<ae>3.099 E F0 3.099(,r)C .099(ule \(equal\))-3.099 F
1.183(still does not gi)72 172 R 1.543 -.18(ve u)-.3 H 4.183(ss).18 G
1.183(emantic completeness with respect to certain equational theories.)
-4.183 F .734(Therefore, we will also consider a sixth rule allo)72 192
R .734(wing us to)-.3 F/F2 12/Symbol-Slanted SF(h)3.733 E F0 .733
(-reduce terms of functional)B 3.582(types. The)72 212 R .583
(six typing rules de\214ne)3.582 F/F3 12/Times-Italic@0 SF .583
(Curry typing with containment and equality)3.583 F F0 3.583(,o)C(r)
-3.583 E/F4 12/Times-Bold@0 SF(CC)3.583 E/F5 10/Times-Roman@0 SF(eq)5 I
F0(.)-5 I 1.4(Although \(equal\) is not a recursi)72 232 R 1.759 -.18
(ve i)-.3 H 1.399(nference rule, since no nontri).18 F 1.399
(vial lambda theory is)-.3 F 1.376
(decidable, we could replace \(equal\) by a set of recursi)72 252 R -.18
(ve)-.3 G 4.377(,s).18 G 1.377(chematic rules based on the)-4.377 F
1.028(usual axioms and inference rules for lambda theories.)72 272 R(Ho)
7.027 E(we)-.3 E -.18(ve)-.3 G 1.987 -.48(r, t).18 H 1.027
(here does not seem to).48 F .139(be an)72 292 R 3.139(ya)-.18 G(dv)
-3.139 E .139(antage of doing so.)-.3 F .139
(As we will see later on, the set of v)6.139 F .14
(alid typings is undecid-)-.3 F(able.)72 312 Q F4(4.2. Rules f)72 355.6
Q(or deducing coer)-.3 E(cions)-.216 E F0 1.897(The rule \(coerce\) for\
 coercing terms from one type to another will use tw)97 379.2 R 4.896
(os)-.12 G(ub-)-4.896 E .467
(sidiary rules for deducing consequences of coercion sets.)72 399.2 R
.467(The axiom and rules for deri)6.467 F(v-)-.3 E(ing coercions are)72
419.2 Q(\(ref\))108 445.2 Q F2(s)24 E/F6 12/Symbol SF<cd>3 E F2(s)3 E F0
(,)A(\(arro)111 487 Q(w\))-.3 E F2(s)12 E F1<ae>3 E F2(t)3 E F6<cd>9 E
F2(s)6 E F5(1)5 I F1<ae>3 -5 M F2(t)3 E F5(1)5 I F2(s)-83.911 -14.8 M F5
(1)5 I F6<cd>3 -5 M F2(s)3 E F0(,)A F2(t)6 E F6<cd>3 E F2(t)3 E .48 LW
162.876 487 156.876 487 DL 167.914 487 161.914 487 DL 173.914 487
167.914 487 DL 179.914 487 173.914 487 DL 185.914 487 179.914 487 DL
191.914 487 185.914 487 DL 197.914 487 191.914 487 DL 203.914 487
197.914 487 DL 209.914 487 203.914 487 DL 215.914 487 209.914 487 DL
221.914 487 215.914 487 DL 227.914 487 221.914 487 DL 233.914 487
227.914 487 DL 239.914 487 233.914 487 DL 245.914 487 239.914 487 DL
251.914 487 245.914 487 DL 257.914 487 251.914 487 DL F5(1)237.587 482.2
Q F0(\(trans\))111 528.6 Q F2(s)25.47 E F6<cd>3 E F2(r)3 E(s)-43.338
-4.8 M F6<cd>3 E F2(t)3 E F0(,)A F2(t)6 E F6<cd>3 E 155.52 528.6 149.52
528.6 DL 158.928 528.6 152.928 528.6 DL 164.928 528.6 158.928 528.6 DL
170.928 528.6 164.928 528.6 DL 176.928 528.6 170.928 528.6 DL 182.928
528.6 176.928 528.6 DL 188.928 528.6 182.928 528.6 DL 194.928 528.6
188.928 528.6 DL 200.928 528.6 194.928 528.6 DL 206.928 528.6 200.928
528.6 DL 212.928 528.6 206.928 528.6 DL F2(r)205.26 523.8 Q F0 1.198
(It is easy to v)72 559.4 R 1.198(erify the soundness of these rules.)
-.18 F 4.198(Ac)7.198 G(oercion)-4.198 E F2(s)4.198 E F6<cd>4.198 E F2
(r)4.198 E F0(is)4.198 E F3(pr)4.198 E -.12(ov)-.54 G 1.198(able fr).12
F(om)-.54 E F0(C,)4.198 E(written)72 579.4 Q .44 LW 119.004 597.15
119.004 608.15 DL(C)108 605.4 Q/F7 11/Symbol SF(-)3 E F2(s)3 E F6<cd>3 E
F2(r)3 E F0(,)A(if)72 631.4 Q F2(s)3.184 E F6<cd>3.184 E F2(r)3.184 E F0
.184(can be deri)3.184 F -.18(ve)-.3 G 3.184(df).18 G .184
(rom formulas in C using \(ref\), \(arro)-3.184 F .184
(w\) and \(trans\).)-.3 F 2.104 -.96(We w)6.184 H .184(ill write).96 F
83.825 643.15 83.825 654.15 DL(C)72 651.4 Q F7(-)3.821 E 132.484 643.15
132.484 654.15 DL F0 .821(C' if C)93.685 651.4 R F7(-)3.821 E F2(s)3.821
E F6<cd>A F2(t)A F0 .821(for e)3.821 F -.18(ve)-.3 G(ry).18 E F2(s)3.821
E F6<cd>A F2(t)A F6<ce>.96 E F0 .821(C'. It is easy to sho)-.96 F 3.821
(wt)-.3 G 372.685 643.15 372.685 654.15 DL(hat)354.201 651.4 Q F7(-)3.82
E F0 .82(is a transiti)3.82 F 1.18 -.18(ve r)-.3 H .82(elation on).18 F
(sets.)72 671.4 Q(L)97 695 Q/F8 9/Times-Roman@0 SF(EMMA)A F0(1.)3 E
171.667 686.75 171.667 697.75 DL F3(If C)150.331 695 Q F7(-)3 E 231.706
686.75 231.706 697.75 DL F3(C' and C')180.706 695 Q F7(-)3 E F3(C')3 E
296.077 686.75 296.077 697.75 DL(', then C)251.413 695 Q F7(-)3 E F3(C')
3 E('.)-1.332 E EP
%%Page: 11 11
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-1)275.004 56 S 3(1-)-3 G/F1 12/Times-Bold@0
SF(4.3. Curry typing with coer)72 92 Q(cions)-.216 E F0 1.655
(Three well-kno)97 115.6 R 1.656
(wn rules for assigning types to lambda terms [Curry and Fe)-.3 F 1.656
(ys 58,)-.18 F(Damas and Milner 82, Hindle)72 135.6 Q 3(y8)-.18 G
(3a, Hindle)-3 E 3(y8)-.18 G(3b] are)-3 E(\(v)108 161.6 Q 9(ar\) C,A)-.3
F/F2 12/Symbol SF<c9>3 E F0(x:)3 E/F3 12/Symbol-Slanted SF(s)A F0(whene)
9 E -.18(ve)-.3 G 6(rx).18 G(:)-6 E F3(s)A F2<ce>.96 E F0(A,)-.96 E
43.126(\(app\) C,A)111 198.4 R F2<c9>6 E F0(MN:)3 E F3(t)3 E F0(C,A)
-104.71 -4.8 M F2<c9>3 E F0(M:)3 E F3(s)A/F4 15/Symbol SF<ae>3 E F3(t)3
E F0 6(,C)C(,A)-6 E F2<c9>3 E F0(N:)3 E .48 LW 149.52 198.4 143.52 198.4
DL 150.957 198.4 144.957 198.4 DL 156.957 198.4 150.957 198.4 DL 162.957
198.4 156.957 198.4 DL 168.957 198.4 162.957 198.4 DL 174.957 198.4
168.957 198.4 DL 180.957 198.4 174.957 198.4 DL 186.957 198.4 180.957
198.4 DL 192.957 198.4 186.957 198.4 DL 198.957 198.4 192.957 198.4 DL
204.957 198.4 198.957 198.4 DL 210.957 198.4 204.957 198.4 DL 216.957
198.4 210.957 198.4 DL 222.957 198.4 216.957 198.4 DL 228.957 198.4
222.957 198.4 DL 234.957 198.4 228.957 198.4 DL 240.957 198.4 234.957
198.4 DL 246.957 198.4 240.957 198.4 DL 252.957 198.4 246.957 198.4 DL
258.957 198.4 252.957 198.4 DL 264.957 198.4 258.957 198.4 DL 270.957
198.4 264.957 198.4 DL 276.957 198.4 270.957 198.4 DL 282.957 198.4
276.957 198.4 DL 288.957 198.4 282.957 198.4 DL F3(s)280.713 193.6 Q F0
6(\(abs\) C,A)111 260 R F2<c9>3 E F3(l)3 E F0(x.M:)3 E F3(s)A F4<ae>A F3
(t)A F0(C, A[x:)-85.864 -4.8 M F3(s)A F0(])A F2<c9>3 E F0(M:)3 E 148.189
260 142.189 260 DL 153.826 260 147.826 260 DL 159.826 260 153.826 260 DL
165.826 260 159.826 260 DL 171.826 260 165.826 260 DL 177.826 260
171.826 260 DL 183.826 260 177.826 260 DL 189.826 260 183.826 260 DL
195.826 260 189.826 260 DL 201.826 260 195.826 260 DL 207.826 260
201.826 260 DL 213.826 260 207.826 260 DL 219.826 260 213.826 260 DL
225.826 260 219.826 260 DL 231.826 260 225.826 260 DL 237.826 260
231.826 260 DL F3(t)225.161 255.2 Q F0 1.223
(These three rules are called the Curry typing rules \(e)72 310.8 R
1.223(xcept that the)-.18 F 4.223(ya)-.18 G 1.223(re usually written)
-4.223 F .315(without coercion sets\).)72 330.8 R .316
(The coercion rule for typing lambda terms, based on the rules for)6.315
F(deducing coercions, is)72 350.8 Q .44 LW 208.47 373.35 208.47 384.35
DL 32.502(\(coerce\) C,A)111 381.6 R/F5 11/Symbol SF(-)3 E F0(M:)3 E F3
(t)A F0(C,A)-76.905 -4.8 M F2<c9>3 E F0(M:)3 E F3(s)A 233.976 368.55
233.976 379.55 DL F0 6(,C)213.972 376.8 S F5(-)-3 E F3(s)3 E F2<cd>A .48
LW 163.5 381.6 157.5 381.6 DL 168.507 381.6 162.507 381.6 DL 174.507
381.6 168.507 381.6 DL 180.507 381.6 174.507 381.6 DL 186.507 381.6
180.507 381.6 DL 192.507 381.6 186.507 381.6 DL 198.507 381.6 192.507
381.6 DL 204.507 381.6 198.507 381.6 DL 210.507 381.6 204.507 381.6 DL
216.507 381.6 210.507 381.6 DL 222.507 381.6 216.507 381.6 DL 228.507
381.6 222.507 381.6 DL 234.507 381.6 228.507 381.6 DL 240.507 381.6
234.507 381.6 DL 246.507 381.6 240.507 381.6 DL 252.507 381.6 246.507
381.6 DL 258.507 381.6 252.507 381.6 DL 264.507 381.6 258.507 381.6 DL
F3(t)258.015 376.8 Q F0 .031(The four rules \(v)72 432.4 R .03(ar\), \(\
app\), \(abs\) and \(coerce\) are called the Curry rules with coercions\
, or)-.3 F F1(CC)72 452.4 Q F0 1.005(for short.)4.005 F 2.925 -.96(We w)
7.005 H .44 LW 216.379 444.15 216.379 455.15 DL 1.005(ill write)173.7
452.4 R F5(-)4.006 E F0(C,A)4.006 E F2<c9>4.006 E F0(M:)4.006 E F3(s)A
F0 1.006(if this typing statement is pro)4.006 F -.3(va)-.18 G 1.006
(ble from the).3 F F1(CC)72 472.4 Q F0 3(rules. The)3 F
(soundness of the rules is left to the reader)3 E(.)-.66 E .011
(It is easy to sho)97 496 R 3.011(wt)-.3 G .011(hat the)-3.011 F F1(CC)
3.011 E F0 .011(rules are conserv)3.011 F(ati)-.3 E .371 -.18(ve ove)-.3
H 3.011(rt).18 G .011(he Curry rules in the sense)-3.011 F 108.814
507.75 108.814 518.75 DL 2.741(that if)72 516 R F5(-)5.741 E F2<c6>5.741
E F0(,A)A F2<c9>5.741 E F0(M:)5.741 E F3(s)A F0 5.741(,t)C 2.741
(hen this typing statement may be pro)-5.741 F -.18(ve)-.18 G 5.742(dw)
.18 G 2.742(ithout using rule)-5.742 F 3.179(\(coerce\). F)72 536 R .179
(or this reason, we will call a typing statement of the form)-.18 F F2
<c6>3.178 E F0(,A)A F2<c9>3.178 E F0(M:)3.178 E F3(s)A F0(a)3.178 E/F6
12/Times-Italic@0 SF(Curry)3.178 E(typing)72 556 Q F0 6.702(.W)C(hene)
-6.702 E -.18(ve)-.3 G -6.701 3.702(ra t).18 H .703
(erm M has a Curry typing, M must be)-3.702 F F6(str)3.703 E .703
(ongly normalizing)-.54 F(,)-.12 E F0(which)3.703 E .161(means that the\
re is no in\214nite sequence of reductions starting from M \(cf. [Hindl\
e)72 576 R 3.161(y8)-.18 G(3a]\).)-3.161 E(In contrast, e)72 596 Q -.18
(ve)-.3 G
(ry untyped lambda term may be assigned a type using coercions.).18 E(L)
97 619.6 Q/F7 9/Times-Roman@0 SF(EMMA)A F0(2.)3.736 E F6 .736
(Let M be any untyped lambda term and let A be a type assignment)6.736 F
2.237(with x:t)97 639.6 R F2<ce>.96 E F6 5.237(Af)-.96 G 2.237(or e)
-5.237 F 2.237(very variable x fr)-.18 F 2.237(ee in M.)-.444 F 2.237
(Let C be the coer)8.237 F 2.236(cion set C =)-.444 F({t)97 659.6 Q F2
<cd>A F6(\(t)A F4<ae>A F6(t\), \(t)A F4<ae>A F6(t\))A F2<cd>A 231.322
651.35 231.322 662.35 DL F6 3(t}. Then)187.186 659.6 R F5(-)3 E F6(C,A)3
E F2<c9>3 E F6(M:t.)3 E F0 .938(The proof is a straightforw)72 679.6 R
.939(ard induction on the structure of terms, using t)-.12 F F2<cd>A F0
(\(t)A F4<ae>A F0 .939(t\) in the)B .755(application case, and \(t)72
699.6 R F4<ae>A F0(t\))A F2<cd>A F0 3.754(tf)C .754(or an abstraction.)
-3.754 F 3.754(Ar)6.754 G .754(elated translation of untyped terms)
-3.754 F(into typed terms with t=t)72 719.6 Q F4<ae>A F0 3(ti)C 3(sg)-3
G -2.58 -.3(iv e)-3 H 3(ni).3 G 3(n[)-3 G(Scott 80].)-3 E EP
%%Page: 12 12
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-1)275.004 56 S 3(2-)-3 G 3.101(Au)97 92 S
.101(seful f)-3.101 F .102
(act about the typing rules is that all free v)-.12 F .102
(ariables must be gi)-.3 F -.18(ve)-.3 G 3.102(nt).18 G .102(ypes, and)
-3.102 F(types gi)72 112 Q -.18(ve)-.3 G 3(nt).18 G 3(ov)-3 G
(ariables that do not appear free are irrele)-3.3 E -.3(va)-.3 G(nt.).3
E(L)97 135.6 Q/F1 9/Times-Roman@0 SF(EMMA)A F0(3.)4.606 E .44 LW 165.481
127.35 165.481 138.35 DL/F2 12/Times-Italic@0 SF(If)153.543 135.6 Q/F3
11/Symbol SF(-)4.606 E F2(C,A)4.606 E/F4 12/Symbol SF<c9>4.606 E F2(M:)
4.606 E/F5 12/Symbol-Slanted SF(s)A F2 4.606(,a)C 1.606(nd x occur)
-4.606 F 4.606(sf)-.12 G -.444(re)-4.606 G 4.606(ei).444 G 4.606(nM)
-4.606 G 4.606(,t)-4.606 G 1.605(hen x:)-4.606 F F5(t)A F4<ce>.96 E F2
4.605(Af)-.96 G 1.605(or some)-4.605 F F5(t)4.605 E F2(.)A(Furthermor)97
155.6 Q .24 -.12(e, i)-.444 H 3(fx).12 G(:)-3 E F5(t)A F4<ce>.96 E F2 6
(Bf)-.96 G(or e)-6 E(very x:)-.18 E F5(t)A F4<ce>.96 E F2 3(Aw)-.96 G
(ith x fr)-3 E 393.928 147.35 393.928 158.35 DL(ee in M, then)328.276
155.6 Q F3(-)3 E F2(C,B)3 E F4<c9>A F2(M:)A F5(s)A F2(.)A F0
(The lemma is pro)72 175.6 Q -.18(ve)-.18 G 3(db).18 G 3(ya)-3 G 3(ne)-3
G(asy induction on typing deri)-3 E -.3(va)-.3 G(tions.).3 E .671
(An interesting property of the Curry and coercion rules is the follo)97
199.2 R .671(wing generaliza-)-.3 F 1.3
(tion of the Subject Reduction Theorem of [Curry and Fe)72 219.2 R 1.299
(ys 58]. The lemma sho)-.18 F 1.299(ws that)-.3 F .149
(types, as de\214ned by)72 239.2 R/F6 12/Times-Bold@0 SF(CC)3.149 E F0
3.149(,a)C .149(re closed under)-3.149 F F5(b)3.15 E F0(,)A F5(h)A F0
.15(-reduction \(b)B(ut)-.24 E F2 .15(not con)3.15 F(ver)-.48 E(sion)
-.12 E F0 3.15(\). The)B(lemma)3.15 E .435
(is interesting in itself, and will be used to deri)72 259.2 R .795 -.18
(ve s)-.3 H .435(ome useful corollaries to the complete-).18 F
(ness theorem.)72 279.2 Q(L)97 306.4 Q F1(EMMA)A F0(4.)3.857 E 305.113
298.15 305.113 309.15 DL F2 .857(\(Subject Reduction Lemma\) If)152.045
306.4 R F3(-)6.857 E F2(C,A)3.857 E F4<c9>3.857 E F2(M:)3.858 E F5(s)A
F2 .858(and M)3.858 F F5(b)3.858 E F2(,)A F5(h)A F2(-r)A .858(educes to)
-.444 F 137.668 318.15 137.668 329.15 DL(N, then)97 326.4 Q F3(-)6 E F2
(C,A)3 E F4<c9>3 E F2(N:)3 E F5(s)A F2(.)A F0(P)97 353.6 Q F1 -.36(RO)C
(OF).36 E F0 6.337(.L)3.338 G .337(et us assume for the moment that the\
 lemma holds in the special case that)-6.337 F 3.819(Mi)72 373.6 S 3.819
(sar)-3.819 G(ede)-3.819 E 3.819(xa)-.18 G .819
(nd N is obtained by contracting M.)-3.819 F 2.739 -.96(We w)6.819 H .82
(ill \214rst ar).96 F .82(gue that the lemma as)-.216 F 1.428
(stated follo)72 393.6 R 1.428
(ws from this special case, and then justify the assumption.)-.3 F 1.428
(Suppose M is a)7.428 F .333(term with a subterm P which is a)72 413.6 R
F5(b)3.333 E F0 3.333(-o)C(r)-3.333 E F5(h)3.333 E F0(-rede)A .333(x. W)
-.18 F 3.333(ec)-.96 G .333(an write M =)-3.333 F F6(C)3.333 E F0 .333
([P] for some conte)B(xt)-.18 E F6(C)72 433.6 Q F0 .273
([] with a single "hole".)B .272
(Let N be the result of contracting the rede)6.273 F 3.272(xPi)-.18 G
3.272(nM)-3.272 G 3.272(.I)-3.272 G 3.272(ti)-3.272 G 3.272(se)-3.272 G
.272(asy to)-3.272 F(sho)72 453.6 Q 3.372(wb)-.3 G 3.372(yi)-3.372 G
.372(nduction on the structure of the conte)-3.372 F(xt)-.18 E F6(C)
3.373 E F0 .373([] that if C,A)B F4<c9>3.373 E F0(M:)3.373 E F5(s)A F0
.373(is pro)3.373 F -.3(va)-.18 G .373(ble, then).3 F .777(so is C,A)72
473.6 R F4<c9>3.777 E F0(N:)3.777 E F5(s)A F0 6.777(.T)C .777(hus whene)
-6.777 F -.18(ve)-.3 G 3.777(rMr).18 G .776
(educes to N by a single reduction step, the lemma)-3.777 F .733(holds.\
 In general, M may reduce to N by more than one reduction step. By indu\
ction on)72 493.6 R 1.233(the length of the reduction path, we can pro)
72 513.6 R 1.593 -.18(ve t)-.18 H 1.233(he lemma.).18 F 1.233(It no)
7.233 F 4.233(ws)-.3 G(uf)-4.233 E 1.233(\214ces to pro)-.3 F 1.593 -.18
(ve t)-.18 H(he).18 E(lemma in the special case that M is a rede)72
533.6 Q(x.)-.18 E 2.458 -.96(We c)97 557.2 T(onsider).96 E F5(h)3.538 E
F0 .538(-reduction \214rst.)B .538(Assume that the statement C,A)6.538 F
F4<c9>3.538 E F5(l)3.538 E F0 .538(x.Mx :)B F5(s)3.538 E F0 .538(is pro)
3.538 F(v-)-.18 E .497(able for x not free in M. W)72 577.2 R 3.497(ew)
-.96 G .497(ish to sho)-3.497 F 3.497(wt)-.3 G .497(hat C,A)-3.497 F F4
<c9>3.497 E F0(M:)3.497 E F5(s)A F0 .497(is pro)3.497 F -.3(va)-.18 G
3.496(ble. F).3 F .496(or some type)-.18 F F5(t)3.496 E F0(,)A .257
(there is a proof of C,A)72 597.2 R F4<c9>3.257 E F5(l)3.257 E F0(x.Mx:)
A F5(t)A 478.197 588.95 478.197 599.95 DL F0 .257
(which ends in a use of rule \(abs\) and such that C)239.152 597.2 R F3
(-)3.258 E F5(t)3.258 E F4<cd>3.258 E F5(s)72 617.2 Q F0 6.182(.S)C .182
(ince the proof of C,A)-6.182 F F4<c9>3.181 E F5(l)3.181 E F0(x.Mx:)A F5
(t)A F0 .181(ends in a use of rule \(abs\), the type)3.181 F F5(t)3.181
E F0 .181(must be of the)3.181 F(form)72 637.2 Q F5(t)3 E/F7 10
/Times-Roman@0 SF(1)5 I/F8 15/Symbol SF<ae>3 -5 M F5(t)3 E F7(2)5 I F0 6
(.F)-5 K(urthermore, we must ha)-6 E .36 -.18(ve a p)-.24 H
(roof of the antecedent of \(abs\),).18 E(C, A[x:)108 663.2 Q F5(t)A F7
(1)5 I F0(])-5 I F4<c9>3 E F0(Mx:)3 E F5(t)A F7(2)5 I F0(.)-5 I
(It follo)72 689.2 Q(ws that for some type)-.3 E F5(r)3 E 255.228 680.95
255.228 691.95 DL F0(with C)219.888 689.2 Q F3(-)3 E F5(r)3 E F4<cd>3 E
F5(t)3 E F7(2)5 I F0 3(,t)-5 K(here is a proof of)-3 E(C, A[x:)108 715.2
Q F5(t)A F7(1)5 I F0(])-5 I F4<c9>3 E F0(Mx:)3 E F5(r)A EP
%%Page: 13 13
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-1)275.004 56 S 3(3-)-3 G
(that ends in a use of rule \(app\). Hence, for some type)72 92 Q/F1 12
/Symbol-Slanted SF(u)3 E F0 3(,t)C(he statements)-3 E(C, A[x:)108 118 Q
F1(t)A/F2 10/Times-Roman@0 SF(1)5 I F0(])-5 I/F3 12/Symbol SF<c9>3 E F0
(M:)3 E F1(u)A/F4 15/Symbol SF<ae>A F1(r)A F0(and)72 144 Q(C, A[x:)108
170 Q F1(t)A F2(1)5 I F0(])-5 I F3<c9>3 E F0(x:)3 E F1(u)A F0
(are both pro)72 216 Q -.3(va)-.18 G(ble.).3 E 1.238
(Since the typing C, A[x:)97 239.6 R F1(t)A F2(1)5 I F0(])-5 I F3<c9>
4.238 E F0(x:)4.238 E F1(u)A F0 1.238(is pro)4.238 F -.3(va)-.18 G 1.239
(ble, it is easy to ar).3 F .44 LW 457.84 231.35 457.84 242.35 DL 1.239
(gue that C)401.791 239.6 R/F5 11/Symbol SF(-)4.239 E F1(t)4.239 E F2(1)
5 I F3<cd>4.239 -5 M F1(u)4.239 E F0(.)A(Thus, by \(arro)72 259.6 Q
(w\),)-.3 E 119.004 277.35 119.004 288.35 DL(C)108 285.6 Q F5(-)3 E F1
(u)3 E F4<ae>3 E F1(r)3 E F3<cd>6 E F1(t)6 E F2(1)5 I F4<ae>3 -5 M F1(t)
3 E F2(2)5 I F0(and so by rule \(trans\))72 311.6 Q 119.004 329.35
119.004 340.35 DL(C)108 337.6 Q F5(-)3 E F1(u)3 E F4<ae>3 E F1(r)3 E F3
<cd>6 E F1(s)6 E F0(.)A
(From this, we may use Lemma 3 to conclude that there is a proof of C,A)
72 363.6 Q F3<c9>3 E F0(M:)3 E F1(s)A F0(.)A .32(The remaining case is)
97 387.2 R F1(b)3.32 E F0 3.32(-reduction. Assume)B .319(that C,A)3.32 F
F3<c9>3.319 E F0(\()3.319 E F1(l)A F0 .319(x.M\) N:)B F1(s)3.319 E F0
.319(is pro)3.319 F -.3(va)-.18 G .319(ble, for).3 F .833
(some terms M and N. W)72 407.2 R 3.833(ew)-.96 G .833
(ish to conclude that C,A)-3.833 F F3<c9>3.833 E F0([N/x]M:)3.833 E F1
(s)3.833 E F0 .833(is pro)3.833 F -.3(va)-.18 G 3.833(ble. There).3 F
(is)3.833 E .351(some type)72 427.2 R F1(t)3.351 E 168.783 418.95
168.783 429.95 DL F0 .351(with C)132.741 427.2 R F5(-)3.351 E F1(t)3.351
E F3<cd>3.351 E F1(r)3.351 E F0 .35(such that C,A)3.351 F F3<c9>3.35 E
F0(\()3.35 E F1(l)A F0 .35(x.M\) N:)B F1(t)3.35 E F0 .35
(has a proof that ends in a use of)3.35 F
(rule \(app\). Thus for some type)72 447.2 Q F1(r)3 E F0 3(,w)C 3(eh)-3
G -2.7 -.24(av e)-3 H(proofs of)3.24 E(C,A)108 473.2 Q F3<c9>3 E F1(l)3
E F0(x.M:)A F1(r)3 E F4<ae>3 E F1(t)3 E F0(and)72 499.2 Q(C,A)108 525.2
Q F3<c9>3 E F0(N:)3 E F1(r)3 E F0(.)A 3.414(As)72 551.2 S(traightforw)
-3.414 E .414(ard induction on the structure of M sho)-.12 F .415
(ws that if C,A[x:)-.3 F F1(r)A F0(])A F3<c9>3.415 E F0(M:)3.415 E F1(u)
A F0 .415(and C,A)3.415 F F3<c9>72 571.2 Q F0(N:)4.02 E F1(r)4.02 E F0
1.02(are pro)4.02 F -.3(va)-.18 G 1.02(ble then so is C,A).3 F F3<c9>
4.02 E F0([N/x]M:)4.02 E F1(u)A F0 7.02(.T)C 1.02(his implies that C,A)
-7.02 F F3<c9>4.02 E F0 1.02([N/x] M:)4.02 F F1(s)A F0(is)4.02 E(deri)72
591.2 Q -.3(va)-.3 G(ble, and \214nishes the proof of the lemma.).3 E/F6
12/Times-Bold@0 SF(4.4. Curry typing with coer)72 634.8 Q
(cions and equality)-.216 E F0 2.167(As mentioned earlier)97 658.4 R
5.167(,t)-.48 G(he)-5.167 E F6(CC)5.167 E F0 2.167
(rules are not semantically complete.)5.167 F 2.168(This follo)8.168 F
(ws)-.3 E 1.591(from the f)72 678.4 R 1.591(act that without coercion h)
-.12 F 1.59(ypotheses, only the Curry typing rules apply)-.06 F 4.59(,a)
-.78 G(nd)-4.59 E .067(these are not semantically complete.)72 698.4 R
.068(More speci\214cally)6.068 F 3.068(,at)-.78 G .068(erm M can ha)
-3.068 F .428 -.18(ve a C)-.24 H .068(urry typing).18 F .353(only if th\
ere is no in\214nite sequence of reductions from M \(cf. [Hindle)72
718.4 R 3.353(y8)-.18 G 3.353(3a]\). Therefore,)-3.353 F(although the e)
72 738.4 Q(xpression)-.18 E EP
%%Page: 14 14
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-1)275.004 56 S 3(4-)-3 G(\()108 98 Q/F1 12
/Symbol-Slanted SF(l)A F0(x.)A F1(l)A F0 -.78(y.)C(y\) \(\().78 E F1(l)A
F0 3(x.xx\) \()B F1(l)A F0(x.xx\)\),)A .282(is semantically equally to)
72 124 R F1(l)3.282 E F0 -.78(y.)C 1.842 -.78(y, w).78 H 3.282(ec).78 G
.283(annot type this term since the subterm \()-3.282 F F1(l)A F0
(x.xx\)\()A F1(l)A F0(x.xx\))A(may be reduced in\214nitely man)72 144 Q
3(yt)-.18 G 3(imes. More)-3 F(precisely)3 E 3(,t)-.78 G
(he typing statement)-3 E/F2 12/Symbol SF<c6>108 170 Q F0(,)A F2 3<c6c9>
C F0(\()3 E F1(l)A F0(x.)A F1(l)A F0 -.78(y.)C(y\) \(\().78 E F1(l)A F0
3(x.xx\) \()B F1(l)A F0(x.xx\)\):t)A/F3 15/Symbol SF<ae>A F0(t)A 1.195
(is semantically v)72 196 R 1.195(alid, b)-.3 F 1.195(ut cannot be pro)
-.24 F -.18(ve)-.18 G 4.195(du).18 G 1.195(sing the)-4.195 F/F4 12
/Times-Bold@0 SF(CC)4.195 E F0 1.195(typing rules.)4.195 F 1.194
(Another w)7.195 F 1.194(ay to)-.12 F(sho)72 216 Q 4.193(wt)-.3 G 1.193
(hat the)-4.193 F F4(CC)4.193 E F0 1.193
(rules are not semantically complete is to compare Theorem 5, which)
4.193 F(sho)72 236 Q 2.226(ws that the v)-.3 F 2.226
(alid typing statements are undecidable, ag)-.3 F 2.226
(ainst Theorems 13 and 14,)-.06 F
(which imply that the consequences of the)72 256 Q F4(CC)3 E F0
(rules are decidable.)3 E 1.92 -.96(We w)97 279.6 T(ill gi).96 E .36
-.18(ve e)-.3 H(qual terms the same types by adopting the rule).18 E
29.052(\(equal\) C,A)111 310.4 R F2<c9>3 E F0(N:)3 E F1(s)A F0(C,A)
-72.72 -4.8 M F2<c9>3 E F0(M:)3 E F1(s)A F0 9(,M)C .48 LW 161.184 310.4
155.184 310.4 DL 161.556 310.4 155.556 310.4 DL 167.556 310.4 161.556
310.4 DL 173.556 310.4 167.556 310.4 DL 179.556 310.4 173.556 310.4 DL
185.556 310.4 179.556 310.4 DL 191.556 310.4 185.556 310.4 DL 197.556
310.4 191.556 310.4 DL 203.556 310.4 197.556 310.4 DL 209.556 310.4
203.556 310.4 DL 215.556 310.4 209.556 310.4 DL 221.556 310.4 215.556
310.4 DL 227.556 310.4 221.556 310.4 DL 233.556 310.4 227.556 310.4 DL
239.556 310.4 233.556 310.4 DL 245.556 310.4 239.556 310.4 DL 251.556
310.4 245.556 310.4 DL(=N)234.324 305.6 Q .279(If we are interested in \
deducing typings that hold in all models, then we use)72 361.2 R F1(b)
3.28 E F0(-con)A -.18(ve)-.48 G(rsion).18 E 2.603(for = in \(equal\). T)
72 381.2 R 5.603(oc)-.96 G 2.603(onsider only e)-5.603 F 2.603
(xtensional models, we w)-.18 F 2.603(ould use)-.12 F F1(b)5.603 E F0(,)
A F1(h)A F0(-con)A -.18(ve)-.48 G(rsion).18 E 3.411(instead. In)72 401.2
R .411(both of these cases, the)3.411 F F4(CC)3.411 E F0 .412
(rules together with \(equal\) are semantically com-)3.411 F .065(plete\
. If we wish to consider the typing statements that hold in all models \
of some lambda)72 421.2 R(theory)72 441.2 Q/F5 12/Times-Italic@0 SF(Th)3
E F0 3(,t)C(hen we w)-3 E(ould use)-.12 E F5(Th)3 E F0
(for equality in \(equal\).)3 E -.18(Fo)97 464.8 S 4.63(rc).18 G 1.63
(ertain lambda theories, e)-4.63 F -.18(ve)-.3 G(n).18 E F4(CC)4.63 E F0
1.631(+\(equal\) may not be semantically complete.)B .56
(The reason is that in the "simple semantics" of)72 484.8 R F3<ae>3.559
E F0 3.559(,at)C .559(erm M has a functional type)-3.559 F F1(s)3.559 E
F3<ae>A F1(t)A F0(if)72 504.8 Q(f)-.3 E F1(l)3 E F0(x.Mx has type)A F1
(s)3 E F3<ae>A F1(t)A F0 6(.T)C(his implies that the rule)-6 E 16.434
(\(eta\) C,A)111 535.6 R F2<c9>3 E F0(M:)3 E F1(s)A F3<ae>A F1(t)A F0
(C,A)-84.603 -4.8 M F2<c9>3 E F1(l)3 E F0(x.Mx:)A F1(s)A F3<ae>A 146.184
535.6 140.184 535.6 DL 148.821 535.6 142.821 535.6 DL 154.821 535.6
148.821 535.6 DL 160.821 535.6 154.821 535.6 DL 166.821 535.6 160.821
535.6 DL 172.821 535.6 166.821 535.6 DL 178.821 535.6 172.821 535.6 DL
184.821 535.6 178.821 535.6 DL 190.821 535.6 184.821 535.6 DL 196.821
535.6 190.821 535.6 DL 202.821 535.6 196.821 535.6 DL 208.821 535.6
202.821 535.6 DL 214.821 535.6 208.821 535.6 DL 220.821 535.6 214.821
535.6 DL 226.821 535.6 220.821 535.6 DL 232.821 535.6 226.821 535.6 DL
238.821 535.6 232.821 535.6 DL F1(t)232.329 530.8 Q F0 3(xn)15 4.8 O
(ot free in M)-3 E .036(is sound.)72 566.4 R(Ho)6.037 E(we)-.3 E -.18
(ve)-.3 G .997 -.48(r, t).18 H .037(he set of typing statements deri).48
F -.3(va)-.3 G .037(ble using).3 F F4(CC)3.037 E F0 .037
(+\(equal\) from)B F5(Th)3.037 E F0(may)3.037 E .313
(not be closed under rule \(eta\).)72 586.4 R -.18(Fo)6.313 G 3.313(re)
.18 G .313(xample, if we assume that kx=x for some constant k,)-3.493 F
1.327(then we can pro)72 606.4 R -.18(ve)-.18 G F1(l)4.507 E F0(x.kx:t)A
F3<ae>A F0 4.327(t. Ho)B(we)-.3 E -.18(ve)-.3 G 2.287 -.48(r, w).18 H
4.327(ec).48 G 1.327(annot pro)-4.327 F 1.687 -.18(ve k)-.18 H(:t).18 E
F3<ae>A F0 4.327(tw)C 1.327(ithout rule \(eta\), as)-4.327 F -.18(ex)72
626.4 S 1.473(plained at the end of this paragraph.).18 F 1.472
(Therefore, we will adopt \(eta\) as an additional)7.473 F 1.903
(inference rule.)72 646.4 R 1.903(It is w)7.903 F 1.903
(orth remarking that the need for rule \(eta\) stems only from the)-.12
F .975(choice of simple semantics for)72 666.4 R F3<ae>3.975 E F0 3.975
(,a)C .974(nd is not related to the presence of coercions.)-3.975 F(The)
6.974 E 2.109(reason we cannot pro)72 686.4 R 2.469 -.18(ve k)-.18 H(:t)
.18 E F3<ae>A F0 5.109(tw)C 2.11(ithout \(eta\) is that)-5.109 F F4(CC)
5.11 E F0 2.11(+\(equal\) are sound for the F-)B 1.499(semantics of)72
706.4 R F3<ae>4.499 E F0 4.499(,d)C 1.499(iscussed in [Hindle)-4.499 F
4.498(y8)-.18 G 1.498(3a, Hindle)-4.498 F 4.498(y8)-.18 G 1.498
(3b], while kx=x does not imply)-4.498 F(k:t)72 726.4 Q F3<ae>A F0 4.344
(ti)C 4.344(nt)-4.344 G 1.344(he F-semantics.)-4.344 F 1.344(It is w)
7.344 F 1.344(orth pointing out that although this e)-.12 F 1.345
(xample is stated)-.18 F EP
%%Page: 15 15
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-1)275.004 56 S 3(5-)-3 G 2.189
(using a constant symbol k, this is for notational simplicity only)72 92
R 5.188(.T)-.78 G 2.188(he same reasoning)-5.188 F
(applies if we replace the constant k with the closed term \()72 112 Q
/F1 12/Symbol-Slanted SF(l)A F0(x.xx\)\()A F1(l)A F0(x.xx\).)A(The)97
135.6 Q/F2 12/Times-Bold@0 SF(CC)4.298 E F0 1.298
(rules with \(equal\) and \(eta\) will be called the)4.298 F/F3 12
/Times-Italic@0 SF 1.299(Curry rules with coer)4.299 F(cions)-.444 E
1.315(and equality)72 155.6 R F0 4.315(,a)C 1.315(nd abbre)-4.315 F
(viated)-.3 E F2(CC)4.315 E/F4 10/Times-Roman@0 SF(eq)5 I F0 7.315(.W)-5
K 4.315(ew)-8.275 G .44 LW 330.988 147.35 330.988 158.35 DL 1.315
(ill write)287.69 155.6 R/F5 11/Symbol SF(-)4.315 E F4(eq)5 I F0(C,A)
4.315 -5 M/F6 12/Symbol SF<c9>4.315 E F0(M:)4.315 E F1(s)A F0 1.314
(if the typing state-)4.314 F 1.563(ment is pro)72 175.6 R -.3(va)-.18 G
1.563(ble using the).3 F F2(CC)4.563 E F4(eq)5 I F0 1.563(rules, with)
4.563 -5 N F1(b)4.563 E F0(-con)A -.18(ve)-.48 G 1.563
(rsion in rule \(equal\).).18 F(Similarly)7.563 E 4.564(,i)-.78 G(f)
-4.564 E(C,A)72 195.6 Q F6<c9>3.85 E F0(M:)3.85 E F1(s)A F0 .85(is pro)
3.85 F -.3(va)-.18 G .85(ble from).3 F F2(CC)6.849 E F4(eq)5 I F0 .849
(using an equational theory)3.849 -5 N F3(Th)3.849 E F0 3.849(,w)C 3.849
(ew)-3.849 G .849(ill write)-3.849 F 488.521 187.35 488.521 198.35 DL F3
(Th)472 195.6 Q F5(-)3.849 E F4(eq)5 I F0(C,A)72 215.6 Q F6<c9>4.976 E
F0(M:)4.976 E F1(s)A F0 7.976(.I)C 4.976(ti)-7.976 G 4.976(sc)-4.976 G
1.976(lear that if)-4.976 F F3(Th)4.976 E F0 1.977(is closed under)4.976
F F1(h)4.977 E F0(-con)A -.18(ve)-.48 G 1.977
(rsion, then rule \(eta\) is not).18 F 3.969(needed. W)72 235.6 R 3.969
(ew)-.96 G .969(ill also see that if)-3.969 F F3(Th)3.968 E F0 .968
(is the theory of)3.968 F F1(b)3.968 E F0(-con)A -.18(ve)-.48 G .968
(rsion, then \(eta\) is super\215u-).18 F(ous.)72 255.6 Q .74
(Since we ha)97 279.2 R 1.1 -.18(ve i)-.24 H .74
(ntroduced undecidable equational reasoning into the typing rules, it)
.18 F 2.316(seems w)72 299.2 R 2.315
(orthwhile to point out that the set of semantically v)-.12 F 2.315
(alid typing statements is)-.3 F(undecidable.)72 319.2 Q(T)97 342.8 Q/F7
9/Times-Roman@0 SF(HEOREM)A F0(5.)4.626 E F3 1.627
(The set of valid typing statements of the form C,A)7.626 F F6<c9>4.627
E F3 1.627(M:t, with)4.627 F(C=)97 362.8 Q F6<c6>A F3
(and A={x:t}, is not r)3 E(ecur)-.444 E(sive)-.12 E(.)-.18 E F0(P)97
386.4 Q F7 -.36(RO)C(OF).36 E F0 7.638(.T)4.638 G 1.638
(his theorem follo)-7.638 F 1.638
(ws from the classical undecidability results in lambda)-.3 F 1.677
(calculus, which imply that for an)72 406.4 R 4.677(yv)-.18 G 1.678
(ariable x, the set of terms M such that M =)-4.977 F/F8 10
/Symbol-Slanted SF(b)5 I F0 4.678(xi)4.678 -5 O(s)-4.678 E .304
(undecidable [Barendre)72 426.4 R .304(gt 84].)-.18 F(Speci\214cally)
6.304 E 3.303(,i)-.78 G(f)-3.303 E F6<c6>3.303 E F0(,{x:t})A F6<c9>A F0
.303(M:t is v)B .303(alid, then this typing state-)-.3 F .587
(ment must hold in the term model for)72 446.4 R F1(b)3.587 E F0(-con)A
-.18(ve)-.48 G .587(rsion, with type t assigned to the singleton).18 F
3.445(set containing only the equi)72 466.4 R -.3(va)-.3 G 3.445
(lence class [x] of x. Therefore, the typing statement).3 F F6<c6>72
486.4 Q F0(,{x:t})A F6<c9>A F0(M:t is v)A(alid if)-.3 E 3(fM=)-.3 G F8
(b)-3 5 M F0(x.)3 -5 M .121(If we replace \(eta\) by a more general pro\
of step, then we can generalize the Equality)97 510 R 3.779
(Postponement Lemma for Curry typing [Hindle)72 530 R 6.779(y8)-.18 G
3.779(3a] to sho)-6.779 F 6.779(wt)-.3 G 3.779(hat in an)-6.779 F 6.779
(yt)-.18 G(yping)-6.779 E(deri)72 550 Q -.3(va)-.3 G 1.414(tion, all us\
es of \(equal\) and \(eta\) may be "postponed" until the end of the pro\
of.).3 F .03(One application of this will be to sho)72 570 R 3.03(wt)-.3
G .03(hat rule \(eta\) is unnecessary if)-3.03 F F3(Th)3.03 E F0(is)3.03
E F1(b)3.03 E F0(-con)A -.18(ve)-.48 G(rsion;).18 E .813
(some other applications will be discussed at the end of this section.)
72 590 R .814(An unsound "infer)6.814 F(-)-.24 E(ence rule" that will f)
72 610 Q(acilitate proof-theoretic analysis is)-.12 E(\(eta\))111 640.8
Q F4(trick)5 I F0(C,A)10.002 -5 M F6<c9>3 E F0(N:)3 E F1(s)A/F9 15
/Symbol SF<ae>A F1(t)A F0(C,A)-73.167 -4.8 M F6<c9>3 E F0(M:)3 E F1(s)A
F9<ae>A .48 LW 164.514 640.8 158.514 640.8 DL 170.283 640.8 164.283
640.8 DL 176.283 640.8 170.283 640.8 DL 182.283 640.8 176.283 640.8 DL
188.283 640.8 182.283 640.8 DL 194.283 640.8 188.283 640.8 DL 200.283
640.8 194.283 640.8 DL 206.283 640.8 200.283 640.8 DL 212.283 640.8
206.283 640.8 DL 218.283 640.8 212.283 640.8 DL 224.283 640.8 218.283
640.8 DL 230.283 640.8 224.283 640.8 DL 236.283 640.8 230.283 640.8 DL
F1(t)229.791 636 Q F0(M)15 4.8 M F9 -6<aeae>3 G F8(h)6 5 M F0(N)3 -5 M
.483(which includes \(eta\) as a special case.)72 671.6 R 2.402 -.96
(We w)6.482 H .482(ill say that).96 F F1(h)3.482 E F0(-)A F3 -.444(re)C
.482(duction passes thr).444 F .482(ough Th)-.54 F F0(if)3.482 E(M)72
691.6 Q F9 -6<aeae>3.564 G F8(h)6 5 M F0 3.564(Na)3.564 -5 O(nd)-3.564 E
.44 LW 168.132 683.35 168.132 694.35 DL F3(Th)151.896 691.6 Q F5(-)3.564
E F0 .564(N=P imply that there e)3.564 F .564(xists a term Q with)-.18 F
402.629 683.35 402.629 694.35 DL F3(Th)386.392 691.6 Q F5(-)3.565 E F0
.565(M=Q and Q)3.565 F F9 -6<aeae>3.565 G F8(h)6 5 M F0 7.116 -1.332
(P. I)72 711.6 T 4.452(tf)1.332 G(ollo)-4.452 E 1.452
(ws from Corollary 15.1.6 of [Barendre)-.3 F 1.452(gt 84] that)-.18 F F1
(h)4.452 E F0 1.452(-reduction passes through)B 3.092(the theory of)72
731.6 R F1(b)6.092 E F0(-con)A -.18(ve)-.48 G 6.092(rsion. W).18 F 6.092
(en)-.96 G 3.692 -.3(ow h)-6.092 H -2.7 -.24(av e).3 H 3.092(the follo)
6.332 F 3.092(wing useful b)-.3 F 3.092(ut rather elaborate)-.24 F EP
%%Page: 16 16
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-1)275.004 56 S 3(6-)-3 G(lemma.)72 92 Q(L)97
119.2 Q/F1 9/Times-Roman@0 SF(EMMA)A F0(6.)3.987 E/F2 12/Times-Italic@0
SF .986(\(Equality and Eta P)6.987 F .986(ostponement\) Suppose)-.96 F
.44 LW 382.249 110.95 382.249 121.95 DL(Th)365.591 119.2 Q/F3 11/Symbol
SF(-)3.986 E/F4 10/Times-Italic@0 SF(eq)5 I F2(C,A)3.986 -5 M/F5 12
/Symbol SF<c9>3.986 E F2(M:)3.986 E/F6 12/Symbol-Slanted SF(s)A F2(and)
3.986 E F5(D)97 139.2 Q F4(1)5 I F2 .387
(is a derivation of this typing statement using Th.)3.387 -5 N .387
(Then ther)6.387 F 3.387(ei)-.444 G 3.388(sad)-3.387 G(erivation)-3.388
E F5(D)97 159.2 Q F4(2)5 I F2 1.744
(of the same typing statement, possibly using \(eta\))4.745 -5 N F4
(tric)5 I(k)-.2 E F2 4.744(,w)-5 K 1.744(ith the following)-4.744 F(pr)
97 179.2 Q(operties.)-.54 E F0(\(i\))97 202.8 Q F5(D)4.061 E/F7 10
/Times-Roman@0 SF(2)5 I F0 1.062
(has the same number of occurrences of each typing rule as)4.061 -5 N F5
(D)4.062 E F7(1)5 I F0 4.062(,p)-5 K(ro)-4.062 E 1.062(vided we)-.18 F
(consider \(eta\))97 222.8 Q F7(trick)5 I F0
(an acceptable replacement for \(eta\))3 -5 M(\(ii\) All)97 246.4 Q/F8
12/Times-Bold@0 SF(CC)3 E F0(rules appear before an)3 E 3(yo)-.18 G
(ccurrences of \(equal\) or \(eta\) in)-3 E F5(D)3 E F7(2)5 I F0(.)-5 I
(If)97 270 Q F6(h)3 E F0(-reduction passes through)A F2(Th)3 E F0 3(,t)C
3(hen we)-3 F(may choose)3 E F5(D)3 E F7(2)5 I F0(so that, in addition,)
3 -5 M(\(iii\) all occurrences of \(equal\) appear before an)97 293.6 Q
3(yu)-.18 G(ses of \(eta\))-3 E F7(trick)5 I F0(.)-5 I .588
(If \(eta\) does not occur in the deri)72 313.6 R -.3(va)-.3 G(tion).3 E
F5(D)3.588 E F7(1)5 I F0 3.587(,t)-5 K .587
(hen from \(ii\) and the transiti)-3.587 F .587(vity of equality)-.3 F
(,)-.78 E .364(we may coalesce all uses of \(equal\) in)72 333.6 R F5(D)
3.365 E F7(2)5 I F0 .365(into one.)3.365 -5 N(Similarly)6.365 E 3.365
(,w)-.78 G .365(hen \(iii\) applies, we may)-3.365 F(assume)72 353.6 Q
F5(D)4.581 E F7(2)5 I F0 1.58
(contains at most one occurrence of \(equal\) follo)4.581 -5 N 1.58
(wed by at most one use of)-.3 F(\(eta\))72 373.6 Q F7(trick)5 I F0(.)-5
I .465(It is important to emphasize that \(eta\))97 397.2 R F7(trick)5 I
F0 .466(is merely a technical de)3.465 -5 N .466(vice for analyzing)-.3
F .356(typing deri)72 417.2 R -.3(va)-.3 G .356(tions, and is).3 F F2
(not)3.356 E F0 3.356(as)3.356 G .356
(ound typing rule with respect to arbitrary equational the-)-3.356 F 3
(ories. Therefore,)72 437.2 R(care must be tak)3 E
(en in applying this lemma.)-.12 E(P)97 460.8 Q F1 -.36(RO)C(OF).36 E F0
7.079(.T)4.079 G 1.079(he proof is a straightforw)-7.079 F 1.08
(ard induction on the deri)-.12 F -.3(va)-.3 G 1.08(tion of C,A).3 F F5
<c9>4.08 E F0(M:)4.08 E F6(s)A F0(,)A .41
(and some details will be left to the reader)72 480.8 R 6.41(.I)-.66 G
3.41(fw)-6.41 G 3.41(eh)-3.41 G -2.7 -.24(av e)-3.41 H 3.41(au)3.65 G
.41(se of \(equal\) preceding an)-3.41 F(y)-.18 E F8(CC)3.41 E F0 .073
(rule, then it is easy to produce an v)72 500.8 R .073(alid deri)-.3 F
-.3(va)-.3 G .074(tion with the order of the tw).3 F 3.074(or)-.12 G
.074(ules re)-3.074 F -.18(ve)-.3 G(rsed.).18 E -.18(Fo)72 520.8 S 3(re)
.18 G(xample, if)-3.18 E F5(D)3 E F7(1)5 I F0(pro)3 -5 M -.18(ve)-.18 G
3(st).18 G(he follo)-3 E(wing sequence of typings)-.3 E(C,A)108 546.8 Q
F5<c9>3 E F0(M:)A F6(s)A/F9 15/Symbol SF<ae>A F6(t)A F0(C,A)108 586.8 Q
F5<c9>3 E F0(N:)3 E F6(s)A F9<ae>A F6(t)A F0(by \(equal\) using M=N)42 E
(C,A)108 626.8 Q F5<c9>3 E F0(NP:)3 E F6(t)A F0(by \(app\) using C,A)48
E F5<c9>3 E F0(P:)3 E F6(s)A F0(,)A
(then we can replace this sequence by)72 652.8 Q EP
%%Page: 17 17
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-1)275.004 56 S 3(7-)-3 G(C,A)108 98 Q/F1 12
/Symbol SF<c9>3 E F0(M:)A/F2 12/Symbol-Slanted SF(s)A/F3 15/Symbol SF
<ae>A F2(t)A F0(C,A)108 138 Q F1<c9>3 E F0(MP:)3 E F2(t)A F0
(by \(app\) using C,A)48 E F1<c9>3 E F0(P:)3 E F2(s)A F0(C,A)108 178 Q
F1<c9>3 E F0(NP:)3 E F2(t)A F0(by \(equal\) using MP=NP)48 E
(The other cases are similar)72 204 Q(.)-.66 E .316(If we ha)97 227.6 R
.675 -.18(ve a u)-.24 H .315(se of rule \(eta\) follo).18 F .315
(wed by an)-.3 F(y)-.18 E/F4 12/Times-Bold@0 SF(CC)3.315 E F0 .315
(rule, then we may also switch the)3.315 F 1.208(order of rules, pro)72
247.6 R 1.208(vided we allo)-.18 F 4.208(w\()-.3 G(eta\))-4.208 E/F5 10
/Times-Roman@0 SF(trick)5 I F0 1.209(in place of \(eta\). The ar)4.208
-5 N 1.209(gument is similar to)-.216 F .196
(that for \(equal\). This sho)72 267.6 R .196(ws that we may transform)
-.3 F F1(D)3.196 E F5(1)5 I F0 .196(into a deri)3.196 -5 N -.3(va)-.3 G
(tion).3 E F1(D)3.195 E F5(2)5 I F0 .195(satisfying con-)3.195 -5 N
(ditions \(i\) and \(ii\) of the lemma.)72 287.6 Q(If)97 311.2 Q F2(h)
5.246 E F0 2.246(-reduction passes through)B/F6 12/Times-Italic@0 SF(Th)
5.246 E F0 5.247(,t)C 2.247(hen we may further simplify the sequence of)
-5.247 F(\(eta\))72 331.2 Q F5(trick)5 I F0 .511
(and \(equal\) rules follo)3.512 -5 N .511(wing the)-.3 F F4(CC)3.511 E
F0 .511(rules in)3.511 F F1(D)3.511 E F5(2)5 I F0 6.511(.M)-5 K .511
(ore speci\214cally)-6.511 F 3.511(,i)-.78 G 3.511(f\()-3.511 G(eta\))
-3.511 E F5(trick)5 I F0(is)3.511 -5 M(follo)72 351.2 Q
(wed by \(equal\) to pro)-.3 E .36 -.18(ve a s)-.18 H
(equence of typing statements of the form).18 E(C,A)108 377.2 Q F1<c9>3
E F0(M:)A F2(s)A F3<ae>A F2(t)A F0(C,A)108 417.2 Q F1<c9>3 E F0(N:)3 E
F2(s)A F3<ae>A F2(t)A F0(by \(eta\) using M)42 E F3 -6<aeae>3 G/F7 10
/Symbol-Slanted SF(h)6 5 M F0(N)3 -5 M(C,A)108 457.2 Q F1<c9>3 E F0(P:)3
E F2(s)A F3<ae>A F2(t)A F0(by \(equal\))42 E .44 LW 287.829 448.95
287.829 459.95 DL F6(Th)272.157 457.2 Q/F8 11/Symbol SF(-)3 E F0(N=P)3 E
2.149(then the assumption that)72 483.2 R F2(h)5.149 E F0 2.149
(-reduction passes through)B F6(Th)5.149 E F0 2.149
(is precisely what we need to)5.149 F(re)72 503.2 Q -.18(ve)-.3 G
(rse the order of the tw).18 E 3(or)-.12 G(ules.)-3 E .359(An interesti\
ng corollary of Lemma 4 and Lemma 6 is that for typing with respect to)
97 526.8 R(the theory of)72 546.8 Q F2(b)3 E F0(-con)A -.18(ve)-.48 G
(rsion, rule \(eta\) is unnecessary).18 E(.)-.78 E(C)97 574 Q/F9 9
/Times-Roman@0 SF(OR)A(OLLAR)-.36 E(Y)-.585 E F0(7.)4.832 E 186.883
565.75 186.883 576.75 DL F6(If)174.719 574 Q F8(-)4.832 E/F10 10
/Times-Italic@0 SF(eq)5 I F6(C,A)4.832 -5 M F1<c9>4.832 E F6(M:)4.832 E
F2(s)A F6 4.832(,t)C 1.833(hen this typing statement may be pr)-4.832 F
-.12(ov)-.54 G(ed).12 E(fr)97 594 Q(om the theory of)-.54 E F2(b)3 E F6
(-con)A(ver)-.48 E(sion without using rule \(eta\).)-.12 E F0 5.292(As)
97 617.6 S 2.292(imilar corollary is pro)-5.292 F -.18(ve)-.18 G 5.292
(di).18 G 5.292(n[)-5.292 G(Hindle)-5.292 E 5.292(y8)-.18 G 2.291
(3a], follo)-5.292 F 2.291(wing the Subject Reduction)-.3 F
(Theorem, using similar f)72 637.6 Q(acts about reduction.)-.12 E(P)97
664.8 Q F9 -.36(RO)C(OF).36 E F0 7.326(.S)4.326 G 186.961 656.55 186.961
667.55 DL(uppose)148.639 664.8 Q F8(-)4.326 E F5(eq)5 I F0(C,A)4.326 -5
M F1<c9>4.326 E F0(M:)4.326 E F2(s)A F0 4.326(.S)C(ince)-4.326 E F2(h)
4.326 E F0 1.326(-reduction passes through)B F2(b)4.326 E F0(-con)A -.18
(ve)-.48 G(rsion,).18 E .694(Lemma 6 implies that there e)72 684.8 R
358.122 676.55 358.122 687.55 DL .693(xist terms N and P such that)
215.606 684.8 R F8(-)3.693 E F0(C,A)3.693 E F1<c9>3.693 E F0(N:)3.693 E
F2(s)A F0 .693(by the)3.693 F F4(CC)3.693 E F0(rules)3.693 E(only)72
704.8 Q 3.281(,N=)-.78 G F7(b)-3.281 5 M F0 3.281(Pa)3.281 -5 O .281
(nd P)-3.281 F F3 -6<aeae>3.281 G F7(h)6 5 M F0 3.282(M. Using)3.282 -5
N(well-kno)3.282 E .282(wn properties of)-.3 F F2(b)3.282 E F0 3.282(-a)
C(nd)-3.282 E F2(h)3.282 E F0 .282(-reduction we will)B(sho)72 724.8 Q
4.48(wt)-.3 G 1.48(hat there is a term V such that N)-4.48 F F3 -6<aeae>
4.48 G F7(b)6 5 M F5(,)A F7(h)A F0 4.48(Va)4.48 -5 O 1.48(nd V =)-4.48 F
F7(b)5 I F0 1.48(M. This will allo)4.48 -5 N 4.48(wu)-.3 G 4.48(st)-4.48
G(o)-4.48 E EP
%%Page: 18 18
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-1)275.004 56 S 3(8-)-3 G
(apply the subject reduction lemma.)72 92 Q .411
(By the Chruch-Rosser property of)97 115.6 R/F1 12/Symbol-Slanted SF(b)
3.411 E F0(-con)A -.18(ve)-.48 G .412
(rsion, there is some term U with N).18 F/F2 15/Symbol SF -6<aeae>3.412
G/F3 10/Symbol-Slanted SF(b)6 5 M F0 3.362(Ua)72 135.6 S .362(nd P)
-3.362 F F2 -6<aeae>3.361 G F3(b)6 5 M F0 3.361(U. Thus)3.361 -5 N 3.361
(Pm)3.361 G .361(ay be reduced to M by \()-3.361 F F1(h)A F0 .361
(\), or to U by \()B F1(b)A F0 3.361(\). Since)B(\()3.361 E F1(b)A F0
3.361(\)a)C .361(nd \()-3.361 F F1(h)A F0(\))A .088
(commute \(Lemma 3.3.8 of [Barendre)72 155.6 R .088
(gt 84]\), there is some term V with M)-.18 F F2 -6<aeae>3.089 G F3(b)6
5 M F0 3.089(Va)3.089 -5 O .089(nd U)-3.089 F F2 -6<aeae>72 175.6 S F3
(h)6 5 M F0 6.457 -1.548(V. P)3.361 -5 P .36
(utting the reduction paths together)1.548 F 3.36(,w)-.48 G 3.36(eo)
-3.36 G .36(btain N)-3.36 F F2 -6<aeae>3.36 G F3(b)6 5 M/F4 10
/Times-Roman@0 SF(,)A F3(h)A F0 3.36(Va)3.36 -5 O .36(nd M)-3.36 F F2 -6
<aeae>3.36 G F3(b)6 5 M F0 3.456 -1.548(V, a)3.36 -5 P(s)1.548 E
(desired.)72 195.6 Q 1.082(By the subject reduction lemma for the)97
219.2 R/F5 12/Times-Bold@0 SF(CC)4.083 E .44 LW 436.932 210.95 436.932
221.95 DL F0 1.083(rules, we may conclude)316.296 219.2 R/F6 11/Symbol
SF(-)4.083 E F0(C,A)4.083 E/F7 12/Symbol SF<c9>4.083 E F0 -.888(V:)4.083
G F1(s).888 E F0(.)A(Therefore, from M =)72 239.2 Q F3(b)5 I F0 3.096
-1.548(V, w)3 -5 P 3(eh)1.548 G 235.302 230.95 235.302 241.95 DL -2.7
-.24(av e)216.066 239.2 T F6(-)3.24 E F4(eq)5 I F0(C,A)3 -5 M F7<c9>3 E
F0(M:)3 E F1(s)A F0(without using \(eta\).)3 E F5
(4.5. Semantic completeness)72 282.8 Q F0 2.526 -.96(We w)97 306.4 T
.606(ill no).96 F 3.606(wp)-.3 G(ro)-3.606 E .966 -.18(ve t)-.18 H .606
(he semantic completeness theorem for).18 F F5(CC)3.606 E F4(eq)5 I F0
6.606(.S)-5 K .606(ince \(coerce\) is)-6.606 F 2.778
(unnecessary for pro)72 326.4 R 2.779
(ving Curry typings, our theorem implies that Curry')-.18 F 5.779(sr)
-.66 G 2.779(ules, aug-)-5.779 F 1.234(mented with \(equal\) and \(eta\
\), are complete for Curry typing with respect to an)72 346.4 R 4.234
(ye)-.18 G(qua-)-4.234 E .139(tional theory)72 366.4 R 6.139(.I)-.78 G
3.139(na)-6.139 G .139(ddition, by Corollary 7, Hindle)-3.139 F(y')-.18
E 3.139(sc)-.66 G .139(ompleteness theorem for Curry typ-)-3.139 F
(ing with)72 386.4 Q F1(b)3 E F0 3(-o)C(r)-3 E F1(b)3 E F0(,)A F1(h)A F0
(-con)A -.18(ve)-.48 G(rsion as equality).18 E 3(,b)-.78 G
(ut without rule \(eta\), also follo)-3.24 E(ws.)-.3 E(T)97 413.6 Q/F8 9
/Times-Roman@0 SF(HEOREM)A F0(8.)3.586 E/F9 12/Times-Italic@0 SF .586
(Let Th be any lambda theory)6.586 F 6.585(.T)-.66 G(her)-6.585 E 3.585
(ei)-.444 G 3.585(sal)-3.585 G .585(ambda model)-3.585 F F5(D)3.585 E F9
.585(for Th)3.585 F(suc)97 433.6 Q 4.159(ht)-.18 G 162.637 425.35
162.637 436.35 DL 1.159(hat Th)126.311 433.6 R F6(-)4.159 E F9(C,A)4.159
E F7<c9>4.159 E F9(M:)4.159 E F1(s)A F9(if)4.159 E 4.16(ft)-.216 G 1.16
(he typing statement C,A)-4.16 F F7<c9>4.16 E F9(M:)4.16 E F1(s)A F9
1.16(holds in e)4.16 F(very)-.18 E(en)97 453.6 Q(vir)-.48 E(onment for)
-.54 E F5(D)3 E F9(.)A F0 2.2(In contrast to the theorem stated earlier\
 in [Mitchell 84a], this completeness theorem)72 473.6 R
(applies to typing with unrestricted coercions.)72 493.6 Q(Ho)6 E(we)-.3
E -.18(ve)-.3 G .96 -.48(r, t).18 H(he proof is quite similar).48 E(.)
-.66 E(P)97 520.8 Q F8 -.36(RO)C(OF).36 E F0 7.018(.T)4.018 G 1.019
(he \214rst step is to construct a model)-7.018 F F5(D)4.019 E F0(for)
4.019 E F9(Th)4.019 E F0 7.019(.L)C 1.019(et <D,)-7.019 F/F10 8
/Times-Roman@0 SF<83>4.019 E F0(,)A F1(e)4.019 E F0 4.019(>b)C 4.019(et)
-4.019 G 1.019(he term)-4.019 F .152(model for)72 540.8 R F9(Th)3.152 E
F0 3.152(,s)C 3.152(ot)-3.152 G .152
(hat D is the collection of all equi)-3.152 F -.3(va)-.3 G .151
(lence classes [M]).3 F/F11 10/Times-Italic@0 SF(Th)5 I F0 .151
(of terms modulo)3.151 -5 N F9(Th)72 560.8 Q F0 6.353(.A)C 3.353(sm)
-6.353 G .353(entioned earlier)-3.353 F 3.353(,w)-.48 G 3.353(ew)-3.353
G .353(ill write [M] for the equi)-3.353 F -.3(va)-.3 G .353
(lence class [M]).3 F F11(Th)5 I F0 6.354(.A)-5 K(standard)-3 E .332
(property of term models [Barendre)72 580.8 R .332(gt 84, Me)-.18 F .332
(yer 82] is that if)-.18 F F1(h)3.331 E F0 .331(is an)3.331 F 3.331(ye)
-.18 G -.48(nv)-3.331 G .331(ironment, and S).48 F
(is a substitution such that)72 600.8 Q F1(h)3 E F0(\(x\) = [Sx] for e)A
-.18(ve)-.3 G(ry term v).18 E(ariable x, then)-.3 E/F12 15/Times-Roman@0
SF -3([[)108 626.8 S F0(M)6 E F12 -3(]])3 G F1(h)3 E F0 3(=[)3 G(SM].)-3
E .97(It turns out that we will only need to consider one en)72 652.8 R
.971(vironment in the proof, namely an)-.48 F(en)72 672.8 Q
(vironment mapping each term v)-.48 E(ariable x to its equi)-.3 E -.3
(va)-.3 G(lence class.).3 E .129(Let C)97 696.4 R F4(0)5 I F0(,A)-5 I F4
(0)5 I F7<c9>3.129 -5 M F0(M)3.129 E F4(0)5 I F0(:)-5 I F1(s)A F4(0)5 I
F0 .128(be an)3.129 -5 N 3.128(yt)-.18 G .128(yping statement.)-3.128 F
.128(It is easy to v)6.128 F .128(erify that the typing rules)-.18 F
.617(are sound, so that if)72 716.4 R 188.694 708.15 188.694 719.15 DL
F9(Th)172.405 716.4 Q F6(-)3.617 E F4(eq)5 I F0(C)3.617 -5 M F4(0)5 I F0
(,A)-5 I F4(0)5 I F7<c9>3.617 -5 M F0(M)3.617 E F4(0)5 I F0(:)-5 I F1(s)
A F4(0)5 I F0 3.617(,t)-5 K .617(hen this statement must hold in e)
-3.617 F -.18(ve)-.3 G .618(ry en).18 F(vi-)-.48 E 1.234
(ronment for <D,)72 736.4 R F10<83>4.234 E F0(,)A F1(e)4.234 E F0 4.234
(>. Therefore,)B 1.234(we will assume that C)4.234 F F4(0)5 I F0(,A)-5 I
F4(0)5 I F7<c9>4.233 -5 M F0(M)4.233 E F4(0)5 I F0(:)-5 I F1(s)A F4(0)5
I F0 1.233(is not pro)4.233 -5 N -.3(va)-.18 G(ble.).3 E EP
%%Page: 19 19
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-1)275.004 56 S 3(9-)-3 G .183
(The rest of the proof will be de)72 92 R -.24(vo)-.3 G .183(ted to sho)
.24 F .183(wing that there is some en)-.3 F(vironment)-.48 E/F1 12
/Symbol-Slanted SF(h)3.183 E F0(satisfy-)3.183 E .314(ing C)72 112 R/F2
10/Times-Roman@0 SF(0)5 I F0 .314(and A)3.314 -5 N F2(0)5 I F0 -.24(bu)
3.314 -5 O 3.314(tw).24 G(ith)-3.314 E/F3 15/Times-Roman@0 SF -3([[)
3.314 G F0(M)6.314 E F2(0)5 I F3 -3(]])3.314 -5 O F1(h)3 E/F4 12/Symbol
SF<ce>4.274 E/F5 14/Times-Roman@0 SF(/)-5.76 E F3 -3([[)3.314 G F1(s)
6.314 E F2(0)5 I F3 -3(]])3.314 -5 O F1(h)3 E F0 6.314(.W)C 3.314(ew)
-7.274 G .313(ill do this by choosing an in\214nite type)-3.314 F .41
(assignment A containing A)72 132 R F2(0)5 I F0 .41
(and using the proof system to de\214ne an en)3.41 -5 N(vironment)-.48 E
F1(h)3.41 E F0(from)3.41 E(A.)72 152 Q 1.508(Let A be an)97 175.6 R
4.508(ys)-.18 G 1.507(et of basic typing statements x:)-4.508 F F1(s)A
F0 4.507(,w)C 1.507(ith no x appearing twice in A,)-4.507 F(such that)72
195.6 Q(\(i\) A)108 221.6 Q F2(0)5 I F4<cd>3 -5 M F0(A)3 E(\(ii\) for e)
108 261.6 Q -.18(ve)-.3 G(ry type).18 E F1(s)3 E F0 3(,t)C
(here are in\214nitely man)-3 E 3(yv)-.18 G(ariables x with x:)-3.3 E F1
(s)A F4<ce>.96 E F0(A.)-.96 E .59(The reason for ha)72 287.6 R .59
(ving in\214nitely man)-.24 F 3.59(yv)-.18 G .59
(ariables of each type is so that gi)-3.89 F -.18(ve)-.3 G 3.591(na).18
G .951 -.18(ny t)-3.591 H .591(erm M).18 F .782(and type)72 307.6 R F1
(s)3.782 E F0 3.782(,w)C 3.782(ec)-3.782 G .782(an \214nd some x:)-3.782
F F1(s)A F4<ce>.96 E F0 3.782(Aw)-.96 G .782(ith x not free in M.)-3.782
F 2.702 -.96(We w)6.782 H .782(ill e).96 F .782(xtend our notation)-.18
F .276(slightly and write)72 327.6 R .44 LW 172.5 319.35 172.5 330.35 DL
/F6 12/Times-Italic@0 SF(Th)159.828 327.6 Q/F7 11/Symbol SF(-)A F0(C,A)A
F4<c9>3.276 E F0(M:)3.276 E F1(s)A F0(if)3.276 E 260.319 319.35 260.319
330.35 DL F6(Th)247.647 327.6 Q F7(-)A F2(eq)5 I F0(C,A)-5 I F2(1)5 I F4
<c9>-5 I F0(M:)A F1(s)A F0 .277(for some \214nite subset A)3.276 F F2(1)
5 I F0 .277(of A.)3.277 -5 N(Let)6.277 E F1(h)72 347.6 Q F0 1.313
(be an en)4.313 F 1.313(vironment which maps each term v)-.48 F 1.313
(ariable x to its equi)-.3 F -.3(va)-.3 G 1.312(lence class [x], and).3
F(each type v)72 367.6 Q(ariable t to the subset of D gi)-.3 E -.18(ve)
-.3 G 3(nb).18 G(y)-3 E F1(h)108 393.6 Q F0(\(t\) = { [M] |)A 190.032
385.35 190.032 396.35 DL F6(Th)174.36 393.6 Q F7(-)3 E F2(eq)5 I F0(C,A)
3 -5 M F4<c9>3 E F0(M:t}.)3 E 1.92 -.96(We w)72 419.6 T(ill see that).96
E F1(h)3 E F0(satis\214es A)3 E F2(0)5 I F0(and C)3 -5 M F2(0)5 I F0 3
(,a)-5 K(nd that the rules are complete, by sho)-3 E(wing that)-.3 E 18
(\(*\) [M])108 445.6 R F4<ce>3.96 E F3 -3([[)2.04 G F1(s)3 E F3 -3(]])C
F1(h)3 E F0(if)6 E(f)-.3 E 241.776 437.35 241.776 448.35 DL F6(Th)
226.104 445.6 Q F7(-)3 E F2(eq)5 I F0(C,A)3 -5 M F4<c9>3 E F0(M:)3 E F1
(s)A F0(.)A(The ar)72 471.6 Q
(gument will proceed by induction on the structure of type e)-.216 E
(xpressions.)-.18 E -.18(Fo)97 495.2 S 3.735(rat).18 G .735(ype v)-3.735
F .735(ariable t, the equi)-.3 F -.3(va)-.3 G .735(lence is a tri).3 F
.735(vial consequence of the de\214nition.)-.3 F -.18(Fo)6.736 G(r).18 E
(an)72 515.2 Q 3(yf)-.18 G(unctional type)-3 E F1(s)3 E/F8 15/Symbol SF
<ae>A F1(t)A F0 3(,s)C(uppose that the statement)-3 E(C,A)108 541.2 Q F4
<c9>3 E F0(M:)3 E F1(s)3 E F8<ae>A F1(t)A F0 1.319(is pro)72 567.2 R -.3
(va)-.18 G 1.319(ble from).3 F F6(Th)4.319 E F0 4.319(.W)C 4.319(em)
-5.279 G 1.319(ust sho)-4.319 F 4.319(wt)-.3 G 1.319(hat [M] belongs to)
-4.319 F F3 -3([[)4.319 G F1(s)3 E F8<ae>A F1(t)A F3 -3(]])C F1(h)3 E F0
7.318(.F)C 1.318(or an)-7.498 F 4.318(yt)-.18 G 1.318(erm N, if)-4.318 F
([N])72 587.2 Q F4<ce>.96 E F3 -3([[)-.96 G F1(s)3 E F3 -3(]])C F1(h)3 E
F0 3.088(,t)C .089(hen by the inducti)-3.088 F .449 -.18(ve h)-.3 H .089
(ypothesis there is a proof of C,A).12 F F4<c9>3.089 E F0(N:)3.089 E F1
(s)A F0 3.089(,a)C .089(nd so we can)-3.089 F(pro)72 607.2 Q 1.364 -.18
(ve C)-.18 H(,A).18 E F4<c9>4.004 E F0(MN:)4.004 E F1(t)A F0 1.004
(by rule \(app\).)4.004 F 1.004(Therefore, by the inducti)7.004 F 1.364
-.18(ve h)-.3 H 1.004(ypothesis, [MN]).12 F F4<ce>.96 E F3 -3([[)-.96 G
F1(t)3 E F3 -3(]])C F1(h)3 E F0(.)A(Thus, by de\214nition of)72 627.2 Q
F3 -3([[)3 G F1(s)6 E F8<ae>A F1(t)A F3 -3(]])3 G F1(h)3 E F0 3(,w)C 3
(eh)-3 G -2.7 -.24(av e)-3 H([M])3.24 E F4<ce>3.96 E F3 -3([[)2.04 G F1
(s)6 E F8<ae>A F1(t)A F3 -3(]])3 G F1(h)3 E F0(.)A -.18(Fo)97 650.8 S
3.813(rt).18 G .814(he con)-3.813 F -.18(ve)-.48 G .814
(rse, assume that [M]).18 F F4<ce>4.774 E F3 -3([[)2.854 G F1(s)6.814 E
F8<ae>A F1(t)A F3 -3(]])3.814 G F1(h)3 E F0 6.814(.F)C .814(or an)-6.994
F 3.814(yt)-.18 G .814(erm N, if C,A)-3.814 F F4<c9>3.814 E F0(N:)3.814
E F1(s)A F0(is)3.814 E(pro)72 670.8 Q -.3(va)-.18 G(ble, then [N]).3 E
F4<ce>.96 E F3 -3([[)-.96 G F1(s)3 E F3 -3(]])C F1(h)3 E F0
(by the inducti)3 E .36 -.18(ve h)-.3 H(ypothesis, and so).12 E([M])108
696.8 Q/F9 8/Times-Roman@0 SF<83>A F0([N] = [MN])A F4<ce>3.96 E F3 -3
([[)2.04 G F1(t)6 E F3 -3(]])3 G F1(h)3 E F0(.)A(Thus)72 722.8 Q 118.487
714.55 118.487 725.55 DL F6(Th)100.908 722.8 Q F7(-)4.907 E F0(C,A)4.907
E F4<c9>4.907 E F0(MN:)4.907 E F1(t)A F0 4.907(,a)C -.06(ga)-4.907 G
1.907(in by the induction h).06 F 4.907(ypothesis. In)-.06 F(particular)
4.907 E 4.907(,i)-.48 G 4.907(fxi)-4.907 G 4.907(sa)-4.907 G -.18(ny)
-4.907 G EP
%%Page: 20 20
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-2)275.004 56 S 3(0-)-3 G -.3(va)72 92 S
(riable with x:).3 E/F1 12/Symbol-Slanted SF(s)A/F2 12/Symbol SF<ce>.96
E F0(A, we can use this ar)-.96 E(gument to sho)-.216 E 3(wt)-.3 G(hat)
-3 E(C,A)108 118 Q F2<c9>3 E F0(Mx:)3 E F1(t)A F0(.)A
(and so, by rule \(abs\),)72 144 Q .44 LW 123.672 161.75 123.672 172.75
DL/F3 12/Times-Italic@0 SF(Th)108 170 Q/F4 11/Symbol SF(-)3 E/F5 10
/Times-Roman@0 SF(eq)5 I F0(C,A)3 -5 M F2<c9>3 E F1(l)6 E F0(x.Mx :)A F1
(s)A/F6 15/Symbol SF<ae>3 E F1(t)3 E F0(.)A .318
(By the construction of A, we may choose x to be a v)72 196 R .319
(ariable not free in M.)-.3 F .319(Therefore, we)6.319 F
(may use rule \(eta\) to deri)72 216 Q -.18(ve)-.3 G 221.82 207.75
221.82 218.75 DL F3(Th)206.148 216 Q F4(-)3 E F5(eq)5 I F0(C,A)3 -5 M F2
<c9>3 E F0(M:)3 E F1(s)A F6<ae>3 E F1(t)3 E F0 3(,w)C
(hich \214nishes the proof of \(*\).)-3 E(It is no)97 239.6 Q 3(we)-.3 G
(asy to see that)-3 E F1(h)3 E F0(satis\214es A)3 E F5(0)5 I F0(and C)3
-5 M F5(0)5 I F0 6(.I)-5 K 3(fx)-6 G(:)-3 E F1(s)A F2<ce>.96 E F0(A)-.96
E F5(0)5 I F0 3(,t)-5 K(hen x:)-3 E F1(s)A F2<ce>.96 E F0 3(Aa)-.96 G
(nd so)-3 E/F7 15/Times-Roman@0 SF -3([[)108 265.6 S F0(x)6 E F7 -3(]])3
G F1(h)3 E F0 3(=[)3 G(x])-3 E F2<ce>3.96 E F7 -3([[)2.04 G F1(s)6 E F7
-3(]])3 G F1(h)3 E F0 2.364(by \(*\). If)72 291.6 R F1(s)5.363 E F2<cd>A
F1(t)A F2<ce>6.323 E F0(C)4.403 E F5(0)5 I F0 5.363(,t)-5 K 2.363
(hen for e)-5.363 F -.18(ve)-.3 G 2.363(ry [M]).18 F F2<ce>.96 E F7 -3
([[)-.96 G F1(s)3 E F7 -3(]])C F1(h)3 E F0 5.363(,w)C 5.363(eh)-5.363 G
-2.7 -.24(av e)-5.363 H 389.768 283.35 389.768 294.35 DL F3(Th)371.733
291.6 Q F4(-)5.363 E F5(eq)5 I F0(C)5.363 -5 M F5(0)5 I F0(,A)-5 I F2
<c9>A F0(M:)A F1(s)A F0 2.363(by \(*\).)5.363 F .595
(Therefore, by rule \(coerce\), we ha)72 311.6 R -.18(ve)-.24 G 269.329
303.35 269.329 314.35 DL F3(Th)253.062 311.6 Q F4(-)3.595 E F5(eq)5 I F0
(C)3.595 -5 M F5(0)5 I F0(,A)-5 I F2<c9>A F0(M:)A F1(t)A F0 .595
(and so [M])3.595 F F2<ce>.96 E F7 -3([[)-.96 G F1(t)3 E F7 -3(]])C F1
(h)3 E F0 6.596(.T)C(hus)-6.596 E F1(h)3.596 E F0(satis-)3.596 E 1.129
(\214es C)72 331.6 R F5(0)5 I F0 7.129(.F)-5 K(inally)-7.129 E 4.129(,u)
-.78 G 1.129(sing \(*\) ag)-4.129 F 1.129(ain, we ha)-.06 F 1.489 -.18
(ve [)-.24 H(M).18 E F5(0)5 I F0(])-5 I F2<ce>5.088 E/F8 14
/Times-Roman@0 SF(/)-5.76 E F7 -3([[)4.128 G F1(s)3 E F5(0)5 I F7 -3(]])
-5 K F1(h)3 E F0 4.128(,a)C 1.128(nd so the unpro)-4.128 F -.3(va)-.18 G
1.128(ble typing).3 F(statement C)72 351.6 Q F5(0)5 I F0(,A)-5 I F5(0)5
I F2<c9>3 -5 M F0(M)3 E F5(0)5 I F0(:)-5 I F1(s)A F5(0)5 I F0
(does not hold in en)3 -5 M(vironment)-.48 E F1(h)3 E F0 6(.T)C(his pro)
-6 E -.18(ve)-.18 G 3(st).18 G(he theorem.)-3 E 1.892
(The completeness theorem has tw)97 375.2 R 4.892(oi)-.12 G 1.892
(mportant implications for)-4.892 F/F9 12/Times-Bold@0 SF(CC)4.893 E F0
(typing:)4.893 E F9(CC)4.893 E F0(is)4.893 E .006(semantically complete\
 for terms in normal form, and the three containment rules are com-)72
395.2 R(plete for deducing consequences of coercion sets.)72 415.2 Q(C)
97 442.4 Q/F10 9/Times-Roman@0 SF(OR)A(OLLAR)-.36 E(Y)-.585 E F0(9.)
4.182 E F3 1.182(If M is in)7.182 F F1(b)4.182 E F3 1.182
(-normal form and C,A)B F2<c9>4.183 E F3(M:)4.183 E F1(s)A F3 1.183
(holds in all lambda)4.183 F 160.66 454.15 160.66 465.15 DL
(models, then)97 462.4 Q F4(-)3 E F3(C,A)3 E F2<c9>3 E F3(M:)3 E F1(s)A
F3(.)A F0(P)97 489.6 Q F10 -.36(RO)C(OF).36 E F0 6.437(.S)3.437 G 3.436
(uppose C,A)-6.437 F F2<c9>3.436 E F0(M:)3.436 E F1(s)A F0 .436
(holds in all models.)3.436 F 453.425 481.35 453.425 492.35 DL .436
(Then by Corollary 7,)348.025 489.6 R F4(-)3.436 E F5(eq)5 I F0(C,A)
3.436 -5 M F2<c9>3.436 E F0(M:)72 509.6 Q F1(s)A F0 2.07
(without using rule \(eta\).)5.07 F 2.071
(By the equality postponement lemma, there is some N)8.07 F .51
(which is)72 529.6 R F1(b)3.51 E F0(-equi)A -.3(va)-.3 G 230.985 521.35
230.985 532.35 DL .509(lent to M with)157.608 529.6 R F4(-)3.509 E F0
(C,A)3.509 E F2<c9>3.509 E F0(N:)3.509 E F1(s)A F0 6.509(.B)C .509
(ut since M is in)-6.509 F F1(b)3.509 E F0 .509(-normal form, N must)B
(reduce to M.)72 549.6 Q
(Therefore, by the subject reduction lemma, it follo)6 E 418.308 541.35
418.308 552.35 DL(ws that)380.976 549.6 Q F4(-)3 E F0(C,A)3 E F2<c9>3 E
F0(M:)3 E F1(s)A F0(.)A(C)97 576.8 Q F10(OR)A(OLLAR)-.36 E(Y)-.585 E F0
(10.)3.365 E F3(If)6.365 E F1(s)3.365 E F2<cd>3.365 E F3 3.366(th)3.365
G .366(olds in e)-3.366 F .366(very model and en)-.18 F(vir)-.48 E .366
(onment satisfying coer)-.54 F(-)-.24 E 185.668 588.55 185.668 599.55 DL
(cion set C, then C)97 596.8 Q F4(-)3 E F1(s)3 E F2<cd>3 E F1(t)3 E F3
(.)A F0(P)97 624 Q F10 -.36(RO)C(OF).36 E F0 6.26(.N)3.26 G .26
(ote that if C semantically implies)-6.26 F F1(s)3.259 E F2<cd>3.259 E
F1(t)3.259 E F0 3.259(,t)C .259(hen C,{x:)-3.259 F F1(s)A F0(})A F2<c9>
3.259 E F0(x:)3.259 E F1(t)A F0 .259(must be v)3.259 F(alid)-.3 E .249
(for an)72 644 R 3.249(yv)-.18 G .249(ariable x.)-3.549 F .25
(Since x is in normal form, this typing statement is pro)6.249 F -.3(va)
-.18 G .25(ble using rule).3 F(\(v)72 664 Q .005
(ar\), \(app\), \(abs\) and \(coerce\).)-.3 F .005
(But then it is easy to see that the only applicable rules are)6.005 F
(\(v)72 684 Q 201.648 675.75 201.648 686.75 DL
(ar\) and \(coerce\). Thus C)81.696 684 Q F4(-)3 E F1(s)3 E F2<cd>3 E F1
(t)3 E F0(.)A .534(The proofs of both corollaries rely on equality post\
ponement and the subject reduc-)97 707.6 R 2.23
(tion lemma. Although rule \(arro)72 727.6 R 2.23
(w\) is not used in the proof of Theorem 8, it is used)-.3 F EP
%%Page: 21 21
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-2)275.004 56 S 3(1-)-3 G
(critically in the proof of subject reduction.)72 92 Q/F1 12
/Times-Bold@0 SF(5. T)72 155.6 Q(yping Algorithm with Unr)-.888 E
(estricted Coer)-.216 E(cions)-.216 E(5.1. Intr)72 199.2 Q(oduction)
-.216 E F0 1.494(Since semantic typing characterized by)97 226.4 R F1
(CC)4.494 E/F2 10/Times-Roman@0 SF(eq)5 I F0 1.495(and an)4.495 -5 N
4.495(yn)-.18 G(ontri)-4.495 E 1.495(vial lambda theory is)-.3 F .712
(undecidable, it is impossible to b)72 246.4 R .712
(uild a practical type check)-.24 F .712(er based on)-.12 F F1(CC)3.712
E F2(eq)5 I F0 6.712(.H)-5 K -.3(ow)-6.712 G -2.58 -.3(ev e).3 H -.48
(r,).3 G F1(CC)72 266.4 Q F0 .8(forms a natural subset of the)3.8 F F1
(CC)3.8 E F2(eq)5 I F0 .8(system, and we will see that there is an ef)
3.8 -5 N(\214cient)-.3 E .924(algorithm for)72 286.4 R F1(CC)3.924 E F0
3.923(typing. While)3.923 F .923(it might seem that)3.923 F F1(CC)3.923
E F0 .923(+\(eta\) w)B .923(ould also pro)-.12 F .923(vide a rea-)-.18 F
1.315(sonable basis for practical type checking, recall that by Lemma 4\
, the consequences of)72 306.4 R(the)72 326.4 Q F1(CC)3.47 E F0 .47
(rules are closed under rule \(eta\).)3.47 F .47
(Therefore, we will study algorithmic properties)6.47 F(of)72 346.4 Q F1
(CC)3.027 E F0 .027(typing in the remainder of the paper)3.027 F 6.027
(.S)-.66 G .027(ection 5 will be concerned with unrestricted)-6.027 F F1
(CC)72 366.4 Q F0 3.003(typing. In)3.003 F .002
(Section 6 we will consider a restriction of)3.003 F F1(CC)3.002 E F0
.002(typing in which only atomic)3.002 F(containment h)72 386.4 Q
(ypotheses are allo)-.06 E(wed.)-.3 E .377(One plausible approach to ty\
pe inference with subtyping might be to pro)97 410 R .378(vide a term)
-.18 F 3.982(Ma)72 430 S .982(nd coercion set C as input to a typing al\
gorithm, and then compute a description of)-3.982 F .448
(the set of all A and)72 450 R/F3 12/Symbol-Slanted SF(s)3.448 E .44 LW
225.456 441.75 225.456 452.75 DL F0 .448(such that)178.564 450 R/F4 11
/Symbol SF(-)3.448 E F0(C,A)A/F5 12/Symbol SF<c9>A F0(M:)A F3(s)A F0
6.448(.H)C -.3(ow)-6.448 G -2.58 -.3(ev e).3 H 1.408 -.48(r, t).3 H .449
(his approach does not seem fruit-).48 F 4.661(ful. The)72 470 R 1.66
(main problem is that there does not seem to be an)4.661 F 4.66(ys)-.18
G 1.66(uccinct, understandable)-4.66 F .99
(description of all suitable types and type assignments.)72 490 R .991
(If e)6.991 F -.18(ve)-.3 G .991(ry term had a semantically).18 F .1
(minimal type, in each conte)72 510 R .1(xt, then this w)-.18 F .1
(ould be a natural w)-.12 F .1(ay of characterizing all other)-.12 F
3.03(types. Ho)72 530 R(we)-.3 E -.18(ve)-.3 G .99 -.48(r, t).18 H .03
(ypable terms do not ha).48 F .39 -.18(ve h)-.24 H -2.7 -.24(av e).18 H
.031(minimal types in each conte)3.27 F 3.031(xt. T)-.18 F 3.031(og)-.96
G -2.58 -.3(iv e)-3.031 H(a)3.331 E 1.706(simple e)72 550 R 1.706
(xample, let us suppose we ha)-.18 F 2.066 -.18(ve ex)-.24 H 1.706
(pression and type constants; the same phe-).18 F 1.226
(nomenon occurs without this assumption, b)72 570 R 1.226
(ut slightly less ob)-.24 F(viously)-.18 E 7.226(.N)-.78 G 1.827 -.3
(ow s)-7.226 H 1.227(uppose the).3 F .755(only coercion is)72 590 R/F6
12/Times-Italic@0 SF(int)3.755 E F5<cd>A F6 -.444(re)C(al).444 E F0
3.755(,a)C .755(nd that function constant f has type)-3.755 F F6 -.444
(re)3.754 G(al).444 E/F7 15/Symbol SF<ae>A F6(bool)A F0 6.754(.I)C 3.754
(nt)-6.754 G .754(his con-)-3.754 F(te)72 610 Q(xt, the e)-.18 E
(xpression)-.18 E F3(l)108 636 Q F0(x.K x \(fx\),)A 1.588(where K=)72
662 R F3(l)A F0(u.)A F3(l)A F0 -.78(v.)C 4.588(ur).78 G 1.588
(eturns its \214rst ar)-4.588 F 1.588
(gument and discards its second, has types)-.216 F F6(int)4.589 E F7<ae>
A F6(int)A F0(,)A F6(int)72 682 Q F7<ae>A F6 -.444(re)C(al).444 E F0 4.2
(,a)C(nd)-4.2 E F6 -.444(re)4.2 G(al).444 E F7<ae>A F6 -.444(re)C(al)
.444 E F0 7.2(.I)C 4.2(ti)-7.2 G 4.2(se)-4.2 G 1.2(asy to see that)-4.2
F F6(int)4.2 E F7<ae>A F6(int)A F0 1.2(is contained in)4.2 F F6(int)4.2
E F7<ae>A F6 -.444(re)C(al).444 E F0 4.2(,b)C(ut)-4.44 E 1.282
(from Corollary 10 we can see that, neither)72 702 R F6(int)4.282 E F7
<ae>A F6(int)A F5<cd>4.282 E F6 -.444(re)4.282 G(al).444 E F7<ae>A F6
-.444(re)C(al).444 E F0 4.282(,n)C 1.282(or the re)-4.282 F -.18(ve)-.3
G 1.282(rse con-).18 F .973(tainment, is semantically v)72 722 R 3.973
(alid. Therefore,)-.3 F .973
(there is no semantically minimal type to use)3.973 F EP
%%Page: 22 22
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-2)275.004 56 S 3(2-)-3 G .8
(as a representation of all other types.)72 92 R .801
(This suggests that the seemingly natural approach)6.8 F .501(of lea)72
112 R .501(ving the set of coercions \214x)-.24 F .5(ed is impractical.)
-.18 F .5(Instead, our type inference algorithm)6.5 F .705
(will compute a minimal set of coercions necessary to type a gi)72 132 R
-.18(ve)-.3 G 3.706(nt).18 G 3.706(erm. Although)-3.706 F(there)3.706 E
2.67(is a certain computational cost associated with this, since sets o\
f coercions must be)72 152 R
(manipulated, there is an added generality which pro)72 172 Q
(vides some insight into typing.)-.18 E .866(The general typing algorit\
hm presented in this section is a straightforw)97 195.6 R .866
(ard general-)-.12 F 1.264(ization of the special case presented in [Mi\
tchell 84a] to arbitrary coercion sets.)72 215.6 R(Algo-)7.263 E .68
(rithm GA of this paper)72 235.6 R 3.68(,w)-.48 G .68(hich only allo)
-3.68 F .681(ws a restricted form of coercion set, corresponds)-.3 F
(to the original Algorithm TYPE of [Mitchell 84a].)72 255.6 Q/F1 12
/Times-Bold@0 SF(5.2. Substitutions, instances and most general typings)
72 299.2 Q F0 3.491(Au)97 322.8 S .491
(seful property of Curry typing is that the pro)-3.491 F -.3(va)-.18 G
.491(ble typings are closed under sub-).3 F(stitution.)72 342.8 Q F1(CC)
6.138 E F0 .139(typings are not only closed under substitution, b)3.138
F .139(ut also a more general rela-)-.24 F 1.646(tion in)72 362.8 R -.24
(vo)-.48 G 1.646(lving entailment of coercion sets.).24 F 1.646
(After a brief discussion of substitution, we)7.646 F .168
(will de\214ne "instance" and sho)72 382.8 R 3.168(wt)-.3 G .168(hat e)
-3.168 F -.18(ve)-.3 G .168(ry instance of a pro).18 F -.3(va)-.18 G
.168(ble typing is).3 F(pro)6.168 E -.3(va)-.18 G 3.168(ble. The).3 F
.548(correctness proof for algorithm G will later establish that e)72
402.8 R -.18(ve)-.3 G .547(ry term has a "most general).18 F
(typing" with all alternati)72 422.8 Q .36 -.18(ve t)-.3 H
(ypings as instances.).18 E(A)97 446.4 Q/F2 12/Times-Italic@0 SF
(substitution)6.067 E F0 3.068(is a function from type v)6.067 F 3.068
(ariables to type e)-.3 F 3.068(xpressions. W)-.18 F 6.068(ew)-.96 G
(rite)-6.068 E([)72 466.4 Q/F3 12/Symbol-Slanted SF(s)A/F4 10
/Times-Roman@0 SF(1)5 I F0(,...,)-5 I F3(s)A F4(n)5 I F0(/t)-5 I F4(1)5
I F0(,...,t)-5 I F4(n)5 I F0 4.11(]f)-5 K 1.11
(or the substitution mapping t)-4.11 F F4(i)5 I F0(to)4.11 -5 M F3(s)
4.11 E F4(i)5 I F0 4.11(,f)-5 K 1.11(or 1)-4.11 F/F5 12/Symbol SF<a3>
4.11 E F0(i)4.11 E F5<a3>4.11 E F0 1.11(n, and mapping e)4.11 F -.18(ve)
-.3 G(ry).18 E .96(other type v)72 486.4 R .96(ariable to itself.)-.3 F
(If)6.96 E F3(s)3.96 E F0 .96(is a type e)3.96 F .96
(xpression and S is a substitution, then S)-.18 F F3(s)A F0(is)3.96 E
.198(the type e)72 506.4 R .197(xpression obtained by replacing each v)
-.18 F .197(ariable t in)-.3 F F3(s)3.197 E F0 .197(with S\(t\).)3.197 F
.197(The composition)6.197 F(S)72 526.4 Q F5<b0>3.6 I F0 3(To)-3.6 K 3
(fs)-3 G(ubstitutions S and T is de\214ned by \(S)-3 E F5<b0>3.6 I F0
(T\))-3.6 I F3(s)A F0 3(=S)3 G(\(T)-3 E F3(s)A F0(\).)A 3(As)97 550 S
(ubstitution S applied to a type assignment A is the assignment SA with)
-3 E(SA = {x:S)108 576 Q F3(s)A F0 3(|x)3 G(:)-3 E F3(s)A F5<ce>.96 E F0
3(A})-.96 G(.)-3 E(Similarly)72 602 Q 3.861(,t)-.78 G .861(he applicati\
on SC of substitution S to coercion set C is de\214ned to be the fol-)
-3.861 F(lo)72 622 Q(wing set of subtype assertions.)-.3 E(SC = {S)108
648 Q F3(s)A F5<cd>3 E F0(S)3 E F3(t)A F0(|)3 E F3(s)3 E F5<cd>A F3(t)A
F5<ce>3.96 E F0 3(C})-.96 G(.)-3 E .644(An instance of a typing stateme\
nt may be obtained by applying a substitution to all)97 677.6 R 1.402
(of its type e)72 697.6 R 1.402
(xpressions, and possibly choosing a "stronger" coercion h)-.18 F 1.402
(ypothesis or type)-.06 F 4.399(assignment. More)72 717.6 R(precisely)
4.399 E 4.399(,at)-.78 G 1.399(yping statement C',A)-4.399 F(')-1.332 E
F5<c9>4.399 E F0(M:)4.399 E F3(s)A F0(')A F2 1.399(is an instance of)
4.399 F F0(C,A)4.398 E F5<c9>4.398 E F0(M:)72 737.6 Q F3(s)A F0
(if there e)3 E(xists a substitution S such that)-.18 E EP
%%Page: 23 23
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-2)275.004 56 S 3(3-)-3 G .44 LW 123 89.75 123
100.75 DL(C')108 98 Q/F1 11/Symbol SF(-)3 E F0 12(SC, A)3 F(')-1.332 E
/F2 12/Symbol SF<ca>3 E F0 6(SA, and)3 F/F3 12/Symbol-Slanted SF(s)9 E
F0 -3 3('= S)D F3(s)-3 E F0(.)A 1.074(In this case we say C',A)72 124 R
(')-1.332 E F2<c9>4.074 E F0(M:)4.075 E F3(s)A F0(')A/F4 12
/Times-Italic@0 SF 1.075(is an instance of)4.075 F F0(C,A)4.075 E F2<c9>
4.075 E F0(M:)4.075 E F3(s)A F4 1.075(by substitution)4.075 F F0 4.075
(S. Note)4.075 F 1.563(that coercion sets are compared using the entail\
ment relation, rather than syntactically)72 144 R(.)-.78 E .129
(One important f)72 164 R .129(act about instances is that e)-.12 F -.18
(ve)-.3 G .13(ry instance of a pro).18 F -.3(va)-.18 G .13
(ble typing statement is).3 F(pro)72 184 Q -.3(va)-.18 G(ble.).3 E(L)97
211.2 Q/F5 9/Times-Roman@0 SF(EMMA)A F0(11.)4.18 E F4 1.18(Suppose C',A)
7.18 F(')-.444 E F2<c9>4.18 E F4(M:)4.18 E F3(s)A F4 4.18('i)C 4.18(sa)
-4.18 G 4.18(ni)-4.18 G 1.18(nstance of C,A)-4.18 F F2<c9>4.179 E F4(M:)
4.179 E F3(s)A F4 7.179(.I)C 437.711 202.95 437.711 213.95 DL(f)430.196
211.2 Q F1(-)4.179 E F4(C,A)4.179 E F2<c9>4.179 E F4(M:)97 231.2 Q F3(s)
A F4 3(,t)C(hen the instance C',A)-3 E(')-.444 E F2<c9>3 E F4(M:)3 E F3
(s)A F4 3('i)C 3(sp)-3 G -2.04 -.54(ro v)-3 H(able also.).54 E F0(P)97
254.8 Q F5 -.36(RO)C(OF).36 E F0 6.308(.B)3.308 G 3.308(yL)-6.308 G .309
(emmas 1 and 3, it suf)-3.308 F .309(\214ces to sho)-.3 F 3.309(wt)-.3 G
366.72 246.55 366.72 257.55 DL .309(hat if)338.106 254.8 R F1(-)3.309 E
F0(C,A)3.309 E F2<c9>3.309 E F0(M:)3.309 E F3(s)A F0 3.309(,t)C 461.64
246.55 461.64 257.55 DL(hen)441.003 254.8 Q F1(-)3.309 E F0(SC,SA)3.309
E F2<c9>72 274.8 Q F0(M:S)3.883 E F3(s)A F0 .883(for an)3.883 F 3.883
(ys)-.18 G .883(ubstitution S.)-3.883 F .883
(An easy induction on coercion proofs sho)6.883 F 497.961 266.55 497.961
277.55 DL .882(ws that if C)435.765 274.8 R F1(-)3.882 E F3(s)72 294.8 Q
F2<cd>A F3(t)A F0 3.491(,t)C 140.505 286.55 140.505 297.55 DL .491
(hen SC)101.519 294.8 R F1(-)3.491 E F0(S)3.492 E F3(s)A F2<cd>A F0(S)A
F3(t)A F0 6.492(.U)C .492(sing this f)-6.492 F .492
(act for the \(coerce\) case, a straightforw)-.12 F .492(ard induction)
-.12 F(on the deri)72 314.8 Q -.3(va)-.3 G(tion of C,A).3 E F2<c9>3 E F0
(M:)3 E F3(s)A F0(pro)3 E -.18(ve)-.18 G 3(st).18 G
(he lemma. The details are left to the reader)-3 E(.)-.66 E(A)97 338.4 Q
F4 1.26(most g)4.26 F(ener)-.12 E 1.26(al typing for term)-.18 F F0 4.26
(Mi)4.26 G 4.26(sap)-4.26 G(ro)-4.26 E -.3(va)-.18 G 1.259
(ble typing statement which has e).3 F -.18(ve)-.3 G(ry).18 E .394
(other pro)72 358.4 R -.3(va)-.18 G .394
(ble typing for M as an instance.).3 F .395(More speci\214cally)6.394 F
3.395(,C)-.78 G(,A)-3.395 E F2<c9>3.395 E F0(M:)3.395 E F3(s)A F0 .395
(is a most gen-)3.395 F 171.72 370.15 171.72 381.15 DL .814
(eral typing for M if)72 378.4 R F1(-)3.813 E F0(C,A)3.813 E F2<c9>3.813
E F0(M:)3.813 E F3(s)A F0 .813(and, whene)3.813 F -.18(ve)-.3 G 315.801
370.15 315.801 381.15 DL(r)307.992 378.4 Q F1(-)3.813 E F0(C',A)3.813 E
(')-1.332 E F2<c9>3.813 E F0(M:)3.813 E F3(s)A F0 .813
(', the latter typing is an)B .105(instance of C,A)72 398.4 R F2<c9>
3.106 E F0(M:)3.106 E F3(s)A F0 6.106(.C)C(onsequently)-6.106 E 3.106
(,i)-.78 G 3.106(fC)-3.106 G(,A)-3.106 E F2<c9>3.106 E F0(M:)3.106 E F3
(s)A F0 .106(is a most general typing for M, then)3.106 F 72 410.15 72
421.15 DL F1(-)72 418.4 Q F0(C',A)3.092 E(')-1.332 E F2<c9>3.092 E F0
(M:)3.092 E F3(s)A F0 3.091('i)C .691 -.3(ff C)-3.091 H(',A).3 E(')
-1.332 E F2<c9>3.091 E F0(M:)3.091 E F3(s)A F0 3.091('i)C 3.091(sa)
-3.091 G 3.091(ni)-3.091 G .091(nstance of C,A)-3.091 F F2<c9>3.091 E F0
(M:)3.091 E F3(s)A F0 6.091(.S)C .091(ince the instance relation)-6.091
F .169(is easily seen to be decidable, the decision problem for)72 438.4
R/F6 12/Times-Bold@0 SF(CC)3.169 E F0 .169(-typing is ef)B(fecti)-.3 E
-.18(ve)-.3 G .169(ly reducible).18 F
(to the problem of computing most general typings.)72 458.4 Q -.48(Wi)97
482 S 1.261(thout coercions, a most general Curry typing is unique e).48
F 1.26(xcept for the names of)-.18 F 1.473(type v)72 502 R 4.473
(ariables. In)-.3 F 1.474
(addition, since substitutions cannot decrease the size of e)4.474 F
(xpressions,)-.18 E -2.58 -.3(ev e)72 522 T 1.084(ry most general Curry\
 typing is a Curry typing of minimal length \(when written out).3 F
3.069(symbolically\). Ho)72 542 R(we)-.3 E -.18(ve)-.3 G 1.029 -.48
(r, b).18 H .07
(ecause coercion sets are compared using entailment, there may).48 F
(be most general)72 562 Q F6(CC)3 E F0(typings of dif)3 E
(fering lengths.)-.3 E -.18(Fo)6 G 3(re).18 G(xample, both)-3.18 E({s)
108 588 Q F2<cd>A F0(t, u)A F2<cd>A F0(v},)A F2 3<c6c9>3 G F3(l)A F0
(x.x:u)A/F7 15/Symbol SF<ae>A F0 12(va)C 9(nd {u)-12 F F2<cd>A F0(v},)A
F2 3<c6c9>3 G F3(l)A F0(x.x:u)A F7<ae>A F0(v)A 1.254(are most general)72
614 R F6(CC)4.254 E F0 1.253(typings for the identity function.)4.254 F
1.253(The \214rst is easily seen to be an)7.253 F
(instance of the second \(by the identity substitution\), since)72 634 Q
({s)108 660 Q F2<cd>A F0(t, u)A F2<cd>A 165.636 651.75 165.636 662.75 DL
F0(v})150.876 660 Q F1(-)3 E F0(u)3 E F2<cd>A F0 -.78(v.)C(Con)72 686 Q
-.18(ve)-.48 G(rsely).18 E 3.592(,t)-.78 G .593(he second may be obtain\
ed as an instance of the \214rst by substituting s for t.)-3.592 F
(This reduces s)72 706 Q F2<cd>A F0 3(tt)C 3(oa)-3 G 3(ni)-3 G
(nstance of the re\215e)-3 E(xi)-.18 E(vity axiom s)-.3 E F2<cd>A F0(s.)
A EP
%%Page: 24 24
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-2)275.004 56 S 3(4-)-3 G/F1 12/Times-Bold@0
SF(5.3. Uni\214cation)72 92 Q F0 5.078(Au)97 115.6 S 2.078
(ni\214er is substitution which mak)-5.078 F 2.078(es tw)-.12 F 5.078
(oe)-.12 G 2.078(xpressions syntactically equal.)-5.258 F(More)8.078 E
(generally)72 135.6 Q 3.945(,i)-.78 G -6.944 3.945(fE i)-3.945 H 3.946
(sas)-3.945 G .946(et of pairs of e)-3.946 F .946
(xpressions, then substitution S)-.18 F/F2 12/Times-Italic@0 SF
(uni\214es)3.946 E F0 3.946(Ei)3.946 G 3.946(fS)-3.946 G/F3 12
/Symbol-Slanted SF(s)-3.946 E F0(=S)A F3(t)A F0(for)3.946 E -2.58 -.3
(ev e)72 155.6 T .514(ry pair <).3 F F3(s)A F0(,)A F3(t)A F0(>)A/F4 12
/Symbol SF<ce>4.474 E F0 3.514(E. Since)-.96 F .514
(such a set of pairs may be re)3.514 F -.06(ga)-.18 G .514
(rded as set of equations to be).06 F(solv)72 175.6 Q .221
(ed, we often write the pairs <)-.18 F F3(s)A F0(,)A F3(t)A F0(>)A F4
<ce>4.181 E F0 3.221(Ei)-.96 G 3.221(nt)-3.221 G .221(he form)-3.221 F
F3(s)3.221 E F0(=)A F3(t)A F0 6.221(.A)C 3.221(si)-6.221 G 3.221(nM)
-3.221 G 3.221(Lt)-3.221 G .221(yping [Milner 78],)-3.221 F .23
(we will use uni\214cation to combine typing statements about sube)72
195.6 R 3.23(xpressions. Although)-.18 F(we)3.23 E 1.681
(will see that the uni\214cation problems in)72 215.6 R -.24(vo)-.48 G
(lv).24 E 1.681(ed in Algorithm G ha)-.18 F 2.041 -.18(ve ve)-.24 H
1.681(ry simple solu-).18 F 2.015(tions, more dif)72 235.6 R 2.015
(\214cult uni\214cation problems will occur in the specialized v)-.3 F
2.015(ersions of the)-.18 F .434
(algorithm considered in later sections of the paper)72 255.6 R 6.435
(.S)-.66 G .435(ince we will need a general uni\214ca-)-6.435 F
(tion algorithm e)72 275.6 Q -.18(ve)-.3 G(ntually).18 E 3(,i)-.78 G 3
(tm)-3 G(ak)-3 E(es sense to start right of)-.12 E 3(fw)-.3 G
(ith one here.)-3 E 1.225(The uni\214cation algorithm computes most gen\
eral unifying substitutions, where we)97 299.2 R 1.341
(say substitution S)72 319.2 R F2 1.341(is mor)4.341 F 4.341(eg)-.444 G
(ener)-4.461 E 1.341(al than)-.18 F F0 1.341(R, and write S)4.341 F F4
<a3>4.341 E F0 1.342(R, if there is a substitution T)4.341 F(with R = T)
72 339.2 Q F4<b0>3.6 I F0(S.)-3.6 I(L)97 362.8 Q/F5 9/Times-Roman@0 SF
(EMMA)A F0(12.)3 E F2 .624
([Robinson 65] Let E be any set of equations between type e)100 382.8 R
(xpr)-.24 E 3.624(essions. Ther)-.444 F(e)-.444 E 1.783(is an algorithm)
97 402.8 R/F6 10/Times-Italic@0 SF(UNIFY)4.783 E F2(suc)4.783 E 4.784
(ht)-.18 G 1.784(hat if E is uni\214able)-4.784 F 4.784(,t)-.12 G(hen)
-4.784 E F6(UNIFY)4.784 E F2 1.784(\(E\) computes a)B(most g)97 422.8 Q
(ener)-.12 E(al uni\214er)-.18 E 6(.F)-1.332 G(urthermor)-6 E .24 -.12
(e, i)-.444 H 3(fEi).12 G 3(sn)-3 G(ot uni\214able)-3 E 3(,t)-.12 G(hen)
-3 E F6(UNIFY)3 E F2(\(E\) fails.)A F0 .587(If A)97 446.4 R/F7 10
/Times-Roman@0 SF(1)5 I F0 .587(and A)3.587 -5 N F7(2)5 I F0 .587(are t\
ype assignments, then uni\214cation can be used to \214nd a most gen-)
3.587 -5 N 2.528(eral substitution S such that SA)72 466.4 R F7(1)5 I F4
<c8>-5 I F0(SA)A F7(2)5 I F0 2.529(is a well-formed type assignment.)
5.528 -5 N(Generally)8.529 E 1.499(speaking, the union of tw)72 486.4 R
4.499(ot)-.12 G 1.499
(ype assignments is a type assignment precisely when both)-4.499 F(gi)72
506.4 Q 1.616 -.18(ve e)-.3 H 1.256(ach v).18 F 1.257
(ariable in common the same type.)-.3 F 1.257
(Therefore, to \214nd a most general S with)7.257 F(SA)72 526.4 Q F7(1)5
I F4<c8>-5 I F0(SA)A F7(2)5 I F0 .113
(well-formed, we simply unify the set of all equations)3.113 -5 N F3(s)
3.113 E F0(=)A F3(t)A F0 .113(such that x:)3.113 F F3(s)A F4<ce>.96 E F0
3.112(Aa)-.96 G(nd)-3.112 E(x:)72 546.4 Q F3(t)A F4<ce>.96 E F0(B.)-.96
E 2.799 -.96(To f)97 570 T .879(acilitate comparisons between v).84 F
.879(arious containment theories, a proof of Lemma)-.3 F .086(12 is sk)
72 590 R .086(etched in the Appendix.)-.12 F .086(There are ef)6.086 F
.086(\214cient, e)-.3 F -.18(ve)-.3 G 3.086(nl).18 G(inear)-3.086 E
3.086(,i)-.48 G .085(mplementations of uni\214-)-3.086 F .253(cation [P)
72 610 R .253(aterson and W)-.18 F -.18(eg)-.96 G .254
(man 78]. A parallel lo).18 F .254(wer bound is gi)-.3 F -.18(ve)-.3 G
3.254(ni).18 G 3.254(n[)-3.254 G(Dw)-3.254 E .254(ork, Kanellakis)-.12 F
(and Mitchell 84].)72 630 Q F1(5.4. Algorithm G f)72 673.6 Q
(or most general typings)-.3 E F0(Gi)97 697.2 Q -.18(ve)-.3 G 4.092(na)
.18 G 1.452 -.18(ny t)-4.092 H 1.092
(erm M, the algorithm G\(M\) produces a pro).18 F -.3(va)-.18 G 1.091
(ble typing C,A).3 F F4<c9>4.091 E F0(M:)A F3(s)A F0(for)4.091 E 4.404
(M. The)72 717.2 R 1.404(algorithm is written belo)4.404 F 4.404(wi)-.3
G 4.404(na)-4.404 G 4.404(na)-4.404 G(pplicati)-4.404 E -.18(ve)-.3 G
4.404(,p).18 G 1.404(attern-matching style. There are)-4.404 F 2.403
(three mutually recursi)72 737.2 R 2.763 -.18(ve c)-.3 H 2.403
(lauses, one for each possible form of lambda term.).18 F 2.402(In the)
8.402 F EP
%%Page: 25 25
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-2)275.004 56 S 3(5-)-3 G 1.317
(abstraction clause, we use A -- {x:)72 92 R/F1 12/Symbol-Slanted SF(s)A
F0 4.318(}t)C 4.318(od)-4.318 G 1.318(enote the set dif)-4.318 F 1.318
(ference, i.e., the type assign-)-.3 F(ment de\214ned by remo)72 112 Q
(ving x:)-.18 E F1(s)A F0(from A.)3 E(G\(x\) = { s)116.334 141.6 Q/F2 12
/Symbol SF<cd>A F0 3(t})C 3(,{)-3 G(x:s})-3 E F2<c9>3 E F0(x:t)3 E
(G\(MN\) =)116.334 181.6 Q/F3 12/Times-Bold@0 SF(let)131.334 201.6 Q F0
(C)3 E/F4 10/Times-Roman@0 SF(1)5 I F0 3(,A)-5 K F4(1)-3 5 M F2<c9>3 -5
M F0(M:)3 E F1(s)A F0 3(=G)3 G(\(M\))-3 E(C)146.334 221.6 Q F4(2)5 I F0
3(,A)-5 K F4(2)-3 5 M F2<c9>3 -5 M F0(N:)3 E F1(t)A F0 3(=G)3 G(\(N\),)
-3 E(with type v)161.334 241.6 Q
(ariables renamed to be disjoint from those in G\(M\))-.3 E 6(S=U)
146.334 261.6 S(NIFY\({)-6 E F1(a)A F0(=)A F1(b)A F0 3(|x)3 G(:)-3 E F1
(a)A F2<ce>.96 E F0(A)-.96 E F4(1)5 I F0(and x:)3 -5 M F1(b)A F2<ce>.96
E F0(A)-.96 E F4(2)5 I F0(})-5 I F2<c8>3 E F0({)3 E F1(s)A F0(=)A F1(t)A
/F5 15/Symbol SF<ae>A F0(t}\))A(where t is a fresh type v)161.334 281.6
Q(ariable)-.3 E F3(in)131.334 301.6 Q F0(SC)146.334 321.6 Q F4(1)5 I F2
<c8>-5 I F0(SC)A F4(2)5 I F2<c8>-5 I F0({St)A F2<cd>A F0 3(u}, SA)B F4
(1)5 I F2<c8>-5 I F0(SA)A F4(2)5 I F2<c9>3 -5 M F0(MN:u)3 E
(where u is a fresh type v)161.334 341.6 Q(ariable)-.3 E(G\()116.334
381.6 Q F1(l)A F0(x.M\) =)A F3(let)131.334 401.6 Q F0(C, A)3 E F2<c9>3 E
F0(M:)3 E F1(t)A F0 3(=G)3 G(\(M\))-3 E F3(in)131.334 421.6 Q F0(if x:)3
E F1(s)A F2<ce>.96 E F0 3(Af)-.96 G(or some)-3 E F1(s)3 E F0 3(then C)
146.334 441.6 R F2<c8>A F0({)A F1(s)A F5<ae>A F1(t)A F2<cd>A F0
(u}, \(A -- {x:)A F1(s)A F0(}\))A F2<c9>3 E F1(l)3 E F0(x.M:u)A 3
(else C)146.334 461.6 R F2<c8>A F0({s)A F5<ae>A F1(t)A F2<cd>A F0(u}, A)
A F2<c9>3 E F1(l)3 E F0(x.M:u,)A(where s, u are fresh type v)161.334
481.6 Q(ariables)-.3 E 1.956(The algorithm could concei)97 511.2 R -.3
(va)-.3 G(bly).3 E/F6 12/Times-Italic@0 SF(fail)4.956 E F0 1.956
(in the application case if the call to)4.956 F F4(UNIFY)4.955 E F6
(fails)72 531.2 Q F0 7.184(.H)C -.3(ow)-7.184 G -2.58 -.3(ev e).3 H
2.144 -.48(r, w).3 H 4.184(ew).48 G 1.184
(ill see that this does not happen.)-4.184 F 1.185
(It is not to hard to pro)7.185 F 1.545 -.18(ve t)-.18 H 1.185(hat if)
.18 F(G\(M\) succeeds, then it produces a pro)72 551.2 Q -.3(va)-.18 G
(ble typing for M.).3 E(T)97 578.4 Q/F7 9/Times-Roman@0 SF(HEOREM)A F0
(13.)3 E F6(If G\(M\) =)6 E(C,A)6 E F2<c9>3 E F6(M:)3 E F1(s)A F6 3(,t)C
.44 LW 303.406 570.15 303.406 581.15 DL(hen)283.078 578.4 Q/F8 11/Symbol
SF(-)3 E F6(C,A)3 E F2<c9>3 E F6(M:)3 E F1(s)A F6(.)A F0 .833(It follo)
72 598.4 R .833(ws, by Lemma 11, that e)-.3 F -.18(ve)-.3 G .832
(ry instance of G\(M\) is a pro).18 F -.3(va)-.18 G .832
(ble typing for M.).3 F(Con-)6.832 E -.18(ve)72 618.4 S(rsely).18 E 3
(,e)-.78 G -.18(ve)-3.3 G(ry pro).18 E -.3(va)-.18 G
(ble typing for M is an instance of G\(M\).).3 E(T)97 642 Q F7(HEOREM)A
F0(14.)4.629 E 217.213 633.75 217.213 644.75 DL F6(Suppose)169.588 642 Q
F8(-)7.629 E F6(C,A)4.629 E F2<c9>4.629 E F6(M:)4.63 E F1(s)A F6 7.63
(.T)C 1.63(hen G\(M\) succeeds and pr)-7.63 F 1.63(oduces a)-.54 F
(typing with C,A)97 662 Q F2<c9>3 E F6(M:)3 E F1(s)A F6(as an instance)3
E(.)-.18 E F0(Both theorems are pro)72 682 Q -.18(ve)-.18 G 3(db).18 G
(elo)-3 E -.78(w.)-.3 G 1.745(From Lemma 2, we kno)97 705.6 R 4.744(wt)
-.3 G 1.744(hat e)-4.744 F -.18(ve)-.3 G 1.744(ry term has a pro).18 F
-.3(va)-.18 G(ble).3 E F3(CC)4.744 E F0 4.744(typing. Therefore,)4.744 F
(Theorem 14 implies G\(M\) al)72 725.6 Q -.12(wa)-.12 G(ys succeeds.).12
E EP
%%Page: 26 26
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-2)275.004 56 S 3(6-)-3 G(C)97 92 Q/F1 9
/Times-Roman@0 SF(OR)A(OLLAR)-.36 E(Y)-.585 E F0(15.)3.844 E/F2 12
/Times-Italic@0 SF -1.26(Fo)6.845 G 3.845(re)1.26 G .845
(very untyped lambda term M, Algorithm G\(M\) succeeds)-4.025 F
(in \214nding a most g)97 112 Q(ener)-.12 E(al typing for M.)-.18 E F0
.783(In contrast to the typing algorithm gi)97 135.6 R -.18(ve)-.3 G
3.783(ni).18 G 3.783(n[)-3.783 G .783(Milner 78], Algorithm G tak)-3.783
F .783(es a term,)-.12 F -.24(bu)72 155.6 S 3.565(tn).24 G 3.565(ot)
-3.565 G .565(ype assignment, as input.)-3.565 F .566
(This style of typing algorithm for lambda terms seems)6.566 F 2.479
(to ha)72 175.6 R 2.839 -.18(ve o)-.24 H 2.479(riginated with [Lei).18 F
-.3(va)-.3 G 2.479(nt 83a].).3 F 2.479(The adv)8.479 F 2.479
(antage of Algorithm G o)-.3 F -.18(ve)-.18 G 5.479(rM).18 G(ilner')
-5.479 E(s)-.66 E .861(Algorithm W is that the algorithm and the correc\
tness condition are simpler to state.)72 195.6 R(In)6.861 E 1.51
(addition, since the type of a lambda term is determined without re)72
215.6 R -.06(ga)-.18 G 1.509(rd to conte).06 F 1.509(xt, this)-.18 F
.335(style of algorithm f)72 235.6 R .335(acilitates the e)-.12 F .335
(xtension to ML)-.18 F/F3 12/Times-Bold@0 SF(let)3.335 E F0 .335
(declarations, as presented in Section)3.335 F 5.353(7. The)72 255.6 R
(disadv)5.353 E 2.353
(antage is that in practice, Algorithm G may compute rather lar)-.3 F
2.352(ge type)-.216 F 1.474(assignments which must be uni\214ed.)72
275.6 R 1.474(In contrast, Milner')7.474 F 4.474(sA)-.66 G 1.474
(lgorithm W may be imple-)-4.474 F .471(mented so that entire type assi\
gnments need not be uni\214ed or returned as results of func-)72 295.6 R
1.127(tion calls.)72 315.6 R(Ho)7.127 E(we)-.3 E -.18(ve)-.3 G 2.087
-.48(r, i).18 H 4.127(ti).48 G 4.127(sn)-4.127 G 1.127(ot v)-4.127 F
1.127(ery dif)-.18 F 1.127(\214cult to use Algorithm G to de)-.3 F -.18
(ve)-.3 G 1.128(lop an algorithm).18 F(for)72 335.6 Q F3(CC)3 E F0
(typing in the style of Milner')3 E 3(sA)-.66 G(lgorithm W)-3 E(.)-1.104
E(P)97 359.2 Q F1 -.36(RO)C 1.448(OF OF).36 F F0(T)3.698 E F1(HEOREM)A
F0 4.448(13. The)4.448 F 1.447
(proof is by induction on the structure of terms.)4.448 F 1.447(It is)
7.447 F .729(easy to see that G\(x\) is al)72 379.2 R -.12(wa)-.12 G .73
(ys a well-typing, so we mo).12 F 1.09 -.18(ve o)-.18 H 3.73(nt).18 G
3.73(oa)-3.73 G .73(pplication and abstrac-)-3.73 F(tion.)72 399.2 Q
(Consider G\(MN\). By the inducti)97 422.8 Q .36 -.18(ve a)-.3 H
(ssumption, both).18 E 3(G\(M\) = C)108 448.8 R/F4 10/Times-Roman@0 SF
(1)5 I F0 3(,A)-5 K F4(1)-3 5 M/F5 12/Symbol SF<c9>3 -5 M F0(M:)3 E/F6
12/Symbol-Slanted SF(s)A F0 3(G\(N\) = C)108 488.8 R F4(2)5 I F0 3(,A)-5
K F4(2)-3 5 M F5<c9>3 -5 M F0(N:)3 E F6(t)A F0 .095(are pro)72 514.8 R
-.3(va)-.18 G .095(ble. \(W).3 F 3.095(ew)-.96 G .095
(ill assume that the type v)-3.095 F .094(ariables in G\(N\) ha)-.3 F
.454 -.18(ve b)-.24 H .094(een renamed to a).18 F -.24(vo)-.24 G(id).24
E .651(duplicating type v)72 534.8 R .651
(ariables in G\(M\), as speci\214ed in Algorithm G.\))-.3 F .652
(Since S uni\214es {)6.652 F F6(a)A F0(=)A F6(b)A F0(|)3.652 E(x:)72
554.8 Q F6(a)A F5<ce>.96 E F0(A)-.96 E F4(1)5 I F0 1.028(and x:)4.028 -5
N F6(b)A F5<ce>.96 E F0(A)-.96 E F4(2)5 I F0 1.028(}, the set SA)-5 J F4
(1)5 I F5<c8>-5 I F0(SA)A F4(2)5 I F0 1.027
(is a well-formed type assignment.)4.027 -5 N 1.027(By Lemma)7.027 F
(11, it follo)72 574.8 Q(ws that the tw)-.3 E 3(ot)-.12 G(ypings)-3 E
(SC)108 600.8 Q F4(1)5 I F5<c8>-5 I F0(SC)A F4(2)5 I F5<c8>-5 I F0({St)A
F5<cd>A F0(u}, SA)A F4(1)5 I F5<c8>-5 I F0(SA)A F4(2)5 I F5<c9>3 -5 M F0
(M:S)3 E F6(s)A F0(SC)108 640.8 Q F4(1)5 I F5<c8>-5 I F0(SC)A F4(2)5 I
F5<c8>-5 I F0({St)A F5<cd>A F0(u}, SA)A F4(1)5 I F5<c8>-5 I F0(SA)A F4
(2)5 I F5<c9>3 -5 M F0(N:S)3 E F6(t)A F0(are both pro)72 666.8 Q -.3(va)
-.18 G 3(ble. Since).3 F 3(Su)3 G(ni\214es)-3 E F6(s)3 E F0(and)3 E F6
(t)3 E/F7 15/Symbol SF<ae>A F0(t, we ha)A -.18(ve)-.24 G(SC)108 692.8 Q
F4(1)5 I F5<c8>-5 I F0(SC)A F4(2)5 I F5<c8>-5 I F0({St)A F5<cd>A F0
(u}, SA)A F4(1)5 I F5<c8>-5 I F0(SA)A F4(2)5 I F5<c9>3 -5 M F0(MN:St)3 E
(by rule \(app\), and hence G\(MN\) is pro)72 718.8 Q -.3(va)-.18 G
(ble using \(coerce\).).3 E EP
%%Page: 27 27
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-2)275.004 56 S 3(7-)-3 G
(The third case is an abstraction)97 92 Q/F1 12/Symbol-Slanted SF(l)3 E
F0 3(x.M. By)B(the inducti)3 E .36 -.18(ve a)-.3 H(ssumption,).18 E 3
(G\(M\) =)108 118 R(C, A)9 E/F2 12/Symbol SF<c9>3 E F0(M:)3 E F1(t)A F0
.19(is pro)72 144 R -.3(va)-.18 G .19(ble. If x:).3 F F1(s)A F2<ce>.96 E
F0 3.19(Af)-.96 G .19(or some type)-3.19 F F1(s)3.19 E F0 3.19(,t)C .19
(hen A = \(A -- {x:)-3.19 F F1(s)A F0(}\)[x:)A F1(s)A F0 3.19(]a)C .19
(nd so by rule \(abs\) we)-3.19 F(may deri)72 164 Q -.18(ve)-.3 G
(C, \(A -- {x:)108 190 Q F1(s)A F0(}\))A F2<c9>3 E F1(l)3 E F0(x.M:)A F1
(s)A/F3 15/Symbol SF<ae>A F1(t)A F0(.)A .962
(If x does not occur in A, then by Lemma 3, the typing C, A[x:t])72 216
R F2<c9>3.962 E F0(M:)3.962 E F1(t)A F0 .961(is pro)3.962 F -.3(va)-.18
G .961(ble, for).3 F(an)72 236 Q 3(yt)-.18 G(ype v)-3 E
(ariable t, and so)-.3 E(C, A)108 262 Q F2<c9>3 E F1(l)3 E F0(x.M:t)A F3
<ae>A F1(t)A F0(follo)72 288 Q 3.017(ws by rule \(abs\).)-.3 F 3.018
(In either case, augmenting the coercion set with)9.018 F F1(s)6.018 E
F3<ae>A F0(t)A F2<cd>A F0 6.018(uo)C(r)-6.018 E(s)72 308 Q F3<ae>A F0(t)
A F2<cd>A F0 3.435(up)C(reserv)-3.435 E .435(es pro)-.18 F -.3(va)-.18 G
.435(bility \(by Lemma 11\), and so by rule \(coerce\) we may pro).3 F
.794 -.18(ve t)-.18 H(hat).18 E F1(l)72 328 Q F0
(x.M has type u, as desired.)A(This pro)6 E -.18(ve)-.18 G 3(st).18 G
(he theorem.)-3 E(P)97 351.6 Q/F4 9/Times-Roman@0 SF -.36(RO)C 1.406
(OF OF).36 F F0(T)3.656 E F4(HEOREM)A F0 4.406(14. An)4.406 F 1.406
(easy induction on the structure of terms sho)4.406 F 1.406(ws that if)
-.3 F .334(G\(M\) succeeds, then it produces a typing C,A)72 371.6 R F2
<c9>3.334 E F0(M:)3.334 E F1(s)A F0 .334
(in which A assigns a type to x if)3.334 F 3.334(fx)-.3 G .142
(occurs free in M. This will be useful later in the proof.)72 391.6 R
.142(The main ar)6.142 F .142(gument no)-.216 F 3.142(wp)-.3 G(roceeds)
-3.142 E(by induction on the structure of terms.)72 411.6 Q -.18(Fo)97
435.2 S 3.811(rav).18 G .44 LW 223.887 426.95 223.887 437.95 DL .811
(ariable x, suppose)132.138 435.2 R/F5 11/Symbol SF(-)3.811 E F0(C,A)
3.811 E F2<c9>3.811 E F0(x:)3.811 E F1(t)A F0 6.811(.W)C .811
(ithout loss of generality)-7.291 F 3.81(,w)-.78 G 3.81(em)-3.81 G .81
(ay assume)-3.81 F .407(the proof uses axiom \(v)72 455.2 R .407
(ar\) follo)-.3 F .407(wed by rule \(coerce\).)-.3 F .408
(Since x must appear in A, we let)6.407 F F1(s)3.408 E F0 .168
(be the type with x:)72 475.2 R F1(s)A F2<ce>.96 E F0 .168
(A, and note that C must pro)-.96 F -.18(ve)-.18 G F1(s)3.348 E F2<cd>A
F1(t)A F0 6.168(.A)C .168(lgorithm G returns the typing)-6.168 F 3
(G\(x\) = {s)108 501.2 R F2<cd>A F0(t}, {x:s})A F2<c9>3 E F0(x:t.)3 E
2.055 -.96(To s)72 527.2 T(ho).96 E 3.135(wt)-.3 G .135(hat C,A)-3.135 F
F2<c9>3.135 E F0(x:)3.135 E F1(t)A F0 .135
(is an instance of G\(x\), let T be the substitution [)3.135 F F1(s)A F0
(,)A F1(t)A F0 3.136(/s,t]. It)B .136(is easy)3.136 F(to check that)72
547.2 Q(A)108 573.2 Q F2<ca>3 E F0 3(T{x:s} and)3 F(Tt =)9 E F1(t)3 E F0
(.)A 176.652 590.95 176.652 601.95 DL(Furthermore, since C)72 599.2 Q F5
(-)3 E F0(T{s)3 E F2<cd>A F0(t}, it follo)A(ws that C,A)-.3 E F2<c9>3 E
F0(x:)3 E F1(t)A F0(is an instance of G\(x\).)3 E 140.668 614.55 140.668
625.55 DL(Suppose)97 622.8 Q F5(-)3 E F0(C, A)3 E F2<c9>3 E F0(MN:)3 E
F1(r)A F0 6(.T)C(his typing must follo)-6 E 3(wf)-.3 G(rom pro)-3 E -.3
(va)-.18 G(ble typings).3 E(C, A)108 648.8 Q F2<c9>3 E F0(M:)3 E F1(m)A
F3<ae>A F1(n)A F0(C, A)108 688.8 Q F2<c9>3 E F0(N:)3 E F1(m)A 250.725
706.55 250.725 717.55 DL F0 .019
(by rules \(app\) and \(coerce\), where C)72 714.8 R F5(-)3.018 E F1(n)
3.018 E F2<cd>A F1(r)A F0 6.018(.B)C 3.018(yt)-6.018 G .018(he inducti)
-3.018 F .378 -.18(ve h)-.3 H .018(ypothesis, G\(M\) and G\(N\)).12 F
.992(are most general typings for M and N.)72 734.8 R .992
(This means that there e)6.992 F .993(xist substitutions T)-.18 F/F6 10
/Times-Roman@0 SF(1)5 I F0(and)3.993 -5 M EP
%%Page: 28 28
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-2)275.004 56 S 3(8-)-3 G(T)72 92 Q/F1 10
/Times-Roman@0 SF(2)5 I F0(such that)3 -5 M .44 LW 119.004 109.75
119.004 120.75 DL(C)108 118 Q/F2 11/Symbol SF(-)3 E F0(T)3 E F1(1)5 I F0
(C)-5 I F1(1)5 I F0 9(,A)-5 K/F3 12/Symbol SF<ca>-6 E F0(T)3 E F1(1)5 I
F0(A)-5 I F1(1)5 I F0 12(,T)-5 K F1(1)-12 5 M/F4 12/Symbol-Slanted SF(s)
-5 I F0(=)3 E F4(m)3 E/F5 15/Symbol SF<ae>A F4(n)A F0(,)A 119.004 149.75
119.004 160.75 DL(C)108 158 Q F2(-)3 E F0(T)3 E F1(2)5 I F0(C)-5 I F1(2)
5 I F0 9(,A)-5 K F3<ca>-6 E F0(T)3 E F1(2)5 I F0(A)-5 I F1(2)5 I F0 12
(,T)-5 K F1(2)-12 5 M F4(t)-5 I F0(=)3 E F4(m)3 E F0(,)A 1.318(where C)
72 184 R F1(1)5 I F0 4.318(,C)-5 K F1(2)-4.318 5 M F0 4.318(,e)-5 K
1.317(tc., are as in the application case of Algorithm G.)-4.318 F 1.317
(Because G renames)7.317 F -.3(va)72 204 S 1.23(riables, no type v).3 F
1.23(ariables in C)-.3 F F1(2)5 I F0(,A)-5 I F1(2)5 I F3<c9>4.23 -5 M F0
(N:)4.23 E F4(t)A F0 1.23(appear in C)4.23 F F1(1)5 I F0(,A)-5 I F1(1)5
I F3<c9>4.23 -5 M F0(M:)4.23 E F4(s)A F0 7.231(.T)C 1.231(his allo)
-7.231 F 1.231(ws us to)-.3 F 1.426(combine substitutions T)72 224 R F1
(1)5 I F0 1.426(and T)4.426 -5 N F1(2)5 I F0 7.426(.A)-5 K 1.425
(nticipating the need for a substitution that beha)-7.426 F -.18(ve)-.24
G(s).18 E .228(properly on the fresh v)72 244 R .228
(ariables t and u introduced in Algorithm G, we let T be an)-.3 F 3.228
(ys)-.18 G(ubsti-)-3.228 E(tution such that)72 264 Q(Ts = T)108 290 Q F1
(1)5 I F0 6(si)-5 K 3(fsa)-6 G(ppears in the typing of M,)-3 E(Ts = T)
108 330 Q F1(2)5 I F0 6(si)-5 K 3(fsa)-6 G(ppears in the typing of N,)-3
E(Tt =)108 370 Q F4(n)3 E F0(,)A 1.08 -.54(Tu =)108 410 T F4(r)3.54 E F0
(.)A -.48(Wi)72 436 S(thout considering the ef).48 E
(fect of T on t or u, it is easy to see that)-.3 E 119.004 453.75
119.004 464.75 DL(C)108 462 Q F2(-)3 E F0(TC)3 E F1(1)5 I F0 9(,A)-5 K
F3<ca>-6 E F0 -1.116(TA)3 G F1(1)1.116 5 M F0 12(,T)-5 K F4(s)-12 E F0
(=)3 E F4(m)3 E F5<ae>A F4(n)A F0(,)A 119.004 493.75 119.004 504.75 DL
(C)108 502 Q F2(-)3 E F0(TC)3 E F1(2)5 I F0 9(,A)-5 K F3<ca>-6 E F0
-1.116(TA)3 G F1(2)1.116 5 M F0 12(,T)-5 K F4(t)-12 E F0(=)3 E F4(m)3 E
F0(,)A 1.171(so that both instances are by the single substitution T)72
528 R 7.171(.B)-.888 G 4.171(yL)-7.171 G 1.171(emma 3, the assignment A)
-4.171 F .412(must gi)72 548 R .772 -.18(ve t)-.3 H .412
(ypes to all free v).18 F .412
(ariables of M and N and, as noted earlier)-.3 F 3.413(,a)-.48 G 3.413
(na)-3.413 G .413(ssignment pro-)-3.413 F 2.167(duced by G al)72 568 R
-.12(wa)-.12 G 2.167(ys contains e).12 F 2.167(xactly the v)-.18 F 2.166
(ariables that occur free.)-.3 F 2.166(Therefore, T must)8.166 F .132
(unify {)72 588 R F4(a)A F0(=)A F4(b)A F0 3.132(|x)3.132 G(:)-3.132 E F4
(a)A F3<ce>.96 E F0(A)-.96 E F1(1)5 I F0 .132(and x:)3.132 -5 N F4(b)A
F3<ce>.96 E F0(A)-.96 E F1(2)5 I F0 3.132(}. In)-5 J .132
(addition, since T)3.132 F F4(s)A F0(=)3.132 E F4(m)3.132 E F5<ae>A F4
(n)A F0 3.132(=T)3.132 G F4(t)-3.132 E F5<ae>A F0 .133
(Tt, the substitu-)B 1.396(tion T uni\214es)72 608 R F4(s)4.396 E F0(=)A
F4(t)A F5<ae>A F0 4.395(t. Since)B 4.395(Si)4.395 G 4.395(sam)-4.395 G
1.395(ost general uni\214er for these equations, there is a)-4.395 F
(substitution V with)72 628 Q 3(T=V)108 654 S F3<b0>-3 3.6 M F0(S.)-3.6
I .754(This implies that C,A)72 680 R F3<c9>3.754 E F0(MN:)3.755 E F4(n)
A F0 .755(is an instance of SC)3.755 F F1(1)5 I F3<c8>-5 I F0(SC)A F1(2)
5 I F0 3.755(,S)-5 K(A)-3.755 E F1(1)5 I F3<c8>-5 I F0(SA)A F1(2)5 I F3
<c9>3.755 -5 M F0 .755(MN:St by V)3.755 F 3.755(.I)-1.548 G(t)-3.755 E
(remains to consider the fresh type v)72 700 Q(ariable u and coercion)
-.3 E F4(n)3 E F3<cd>A F4(r)A F0(.)A EP
%%Page: 29 29
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-2)275.004 56 S 3(9-)-3 G .157(Since S is a m\
ost general uni\214er for a set of equations not containing u, we kno)97
92 R 3.157(wS)-.3 G(u)-3.157 E 3.814(=u)72 112 S 3.814(.S)-3.814 G .814
(ince we chose T)-3.814 F 3.815(u=)-.54 G/F1 12/Symbol-Slanted SF(r)A F0
3.815(,i)C 3.815(tf)-3.815 G(ollo)-3.815 E .815(ws that V)-.3 F(u=)-.9 E
F1(r)A F0 6.815(.W)C 3.815(eh)-7.775 G -2.7 -.24(av e)-3.815 H .815
(already seen that V\(St\) =)4.055 F F1(n)3.815 E F0(,)A
(and so putting the pieces together gi)72 132 Q -.18(ve)-.3 G 3(su).18 G
.44 LW 288.504 123.75 288.504 134.75 DL 3(sC)269.832 132 S/F2 11/Symbol
SF(-)A F0(V\(St)3 E/F3 15/Symbol SF<ae>3 E F0(u\). This sho)3 E(ws that)
-.3 E 119.004 149.75 119.004 160.75 DL(C)108 158 Q F2(-)3 E F0(V[SC)3 E
/F4 10/Times-Roman@0 SF(1)5 I/F5 12/Symbol SF<c8>3 -5 M F0(SC)3 E F4(2)5
I F5<c8>3 -5 M F0({St)3 E F3<ae>A F0(u}],)A
(which completes the proof that C,A)72 184 Q F5<c9>3 E F0(MN:)A F1(r)A
F0(is an instance of G\(MN\) by substitution V)3 E(.)-1.548 E .512
(The \214nal case to consider is an abstraction)97 207.6 R F1(l)3.512 E
386.953 199.35 386.953 210.35 DL F0 3.512(x.M. Suppose)313.593 207.6 R
F2(-)3.512 E F0(C',A)3.512 E(')-1.332 E F5<c9>3.512 E F1(l)3.512 E F0
(x.M:)A F1(r)A F0 6.512(.T)C(his)-6.512 E .991(must follo)72 227.6 R
3.991(wf)-.3 G .991(rom a pro)-3.991 F -.3(va)-.18 G .991
(ble typing C',A).3 F('[x:)-1.332 E F1(m)A F0(])A F5<c9>3.991 E F0(M:)
3.992 E F1(n)A 497.961 219.35 497.961 230.35 DL F0 .992
(by \(abs\) and \(coerce\), where C')341.069 227.6 R F2(-)A F1(m)72
247.6 Q F3<ae>A F1(n)A F5<cd>A F1(r)A F0 6(.B)C 3(yt)-6 G(he inducti)-3
E .36 -.18(ve h)-.3 H(ypothesis, C',A).12 E('[x:)-1.332 E F1(m)A F0(])A
F5<c9>3 E F0(M:)3 E F1(n)A F0(is an instance of)3 E(G\(M\) = C,A)108
273.6 Q F5<c9>3 E F0(M:)3 E F1(t)A F0(.)A
(This means that there is a substitution S such that)72 299.6 Q 123
317.35 123 328.35 DL(C')108 325.6 Q F2(-)3 E F0 6(SC, A)3 F('[x:)-1.332
E F1(m)A F0(])A F5<ca>3 E F0 6(SA and)3 F F1(n)9 E F0 3(=S)3 G F1(t)-3 E
F0(.)A -.48(Wi)72 351.6 S .441
(thout loss of generality we may assume Su=).48 F F1(r)A F0 6.441(.I)C
3.441(fx)-6.441 G(:)-3.441 E F1(s)A F0 .441(occurs in A, then S)3.441 F
F1(s)A F0 .441(must be)6.441 F F1(m)3.441 E F0(,)A .503(and so C',A)72
371.6 R(')-1.332 E F5<c9>3.503 E F1(l)3.503 E F0(x.M:)A F1(m)A F3<ae>A
F1(n)A F0 .504(is an instance of C,A--{x:)3.503 F F1(s)A F0(})A F5<c9>
3.504 E F1(l)3.504 E F0(x.M:)A F1(s)A F3<ae>A F1(t)A F0 .504
(by substitution S.)3.504 F 172.776 383.35 172.776 394.35 DL .928
(In addition, since C')72 391.6 R F2(-)A F1(m)3.928 E F3<ae>A F1(n)A F5
<cd>A F1(r)A F0 .928(and Su =)3.928 F F1(r)3.928 E F0 3.928(,t)C .927
(he typing C',A)-3.928 F(')-1.332 E F5<c9>3.927 E F1(l)3.927 E F0(x.M:)A
F1(r)A F0 .927(is an instance of)3.927 F(G\()72 411.6 Q F1(l)A F0
(x.M\) by S.)A .337(If x does not occur in A, then we may further assum\
e without loss of generality that)97 435.2 R .654(Ss =)72 455.2 R F1(m)
3.654 E F0 3.654(,w)C .654(here s is the fresh type v)-3.654 F .654
(ariable introduced in Algorithm G.)-.3 F .654(It is easy to check)6.654
F 3.692(the de\214nition and v)72 475.2 R 3.693(erify that C',A)-.18 F
(')-1.332 E F5<c9>6.693 E F1(l)6.693 E F0(x.M:)A F1(m)A F3<ae>A F1(n)A
F0 3.693(must be an instance of C,A)6.693 F F5<c9>6.693 E F1(l)72 495.2
Q F0(x.M:s)A F3<ae>A F1(t)A F0 .161(by substitution S.)3.161 F .161
(Furthermore, reasoning about coercions as abo)6.161 F -.18(ve)-.18 G
3.16(,w).18 G 3.16(ea)-3.16 G -.06(ga)-3.16 G(in).06 E 1.278
(conclude C',A)72 515.2 R(')-1.332 E F5<c9>4.278 E F1(l)4.278 E F0(x.M:)
A F1(r)A F0 1.278(is an instance of G\()4.278 F F1(l)A F0 1.278
(x.M\) by substitution S.)B 1.278(This pro)7.278 F -.18(ve)-.18 G 4.278
(st).18 G(he)-4.278 E(theorem.)72 535.2 Q/F6 12/Times-Bold@0 SF(6. T)72
578.8 Q(yping with Atomic Coer)-.888 E(cions)-.216 E(6.1. Intr)72 622.4
Q(oduction)-.216 E F0 1.466(In this section, we will study)97 646 R F6
(CC)4.466 E F0 1.465(typing with atomic coercions and gi)4.465 F 1.825
-.18(ve a)-.3 H 4.465(na).18 G(lgo-)-4.465 E .064
(rithm GA for \214nding the corresponding form of most general typing.)
72 666 R(An)6.064 E/F7 12/Times-Italic@0 SF .064(atomic coer)3.064 F
(cion)-.444 E F0 .756(is a containment s)72 686 R F5<cd>A F0 3.756(tb)C
.756(etween type v)-3.756 F .756
(ariables, or atomic type names if we were to e)-.3 F(xtend)-.18 E .555
(the syntax of type e)72 706 R .556(xpressions to include constants.)
-.18 F .556(This class of containments is practi-)6.556 F 1.048
(cally interesting, since man)72 726 R 4.048(yc)-.18 G 1.048
(ommon coercions lik)-4.048 F(e)-.12 E F7(int)4.048 E F5<cd>A F7 -.444
(re)C(al).444 E F0 1.048(are atomic.)4.048 F 1.048(It also seems)7.048 F
EP
%%Page: 30 30
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-3)275.004 56 S 3(0-)-3 G .688
(that, in light of W)72 92 R(and')-.96 E 3.688(st)-.66 G .688
(reatment of labeled record types [W)-3.688 F .688
(and 87], the kind of subtyp-)-.96 F .483(ing that arises in "object-or\
iented" languages with class hierarchies may be characterized)72 112 R
1.516(by subtyping axioms about atomic type names.)72 132 R 1.517
(The reader may wish to consult [Jate-)7.517 F -.06(ga)72 152 S
(onkar and Mitchell 88], which is based on the present paper).06 E(.)
-.66 E
(By concentrating on atomic types, we will eliminate coercions lik)97
175.6 Q(e)-.12 E(\(r)108 201.6 Q/F1 15/Symbol SF<ae>3 E F0(s\))3 E/F2 12
/Symbol SF<cd>3 E F0(t,)3 E 1.442(which allo)72 227.6 R 4.442(wt)-.3 G
1.442(erms without Curry typings to be gi)-4.442 F -.18(ve)-.3 G 4.442
(nt).18 G 4.442(ypes. In)-4.442 F -.12(fa)4.441 G 1.441
(ct, with atomic coer).12 F(-)-.24 E .221(cions, we will see that e)72
247.6 R -.18(ve)-.3 G .221
(ry pure term that is typable with coercions is also typable with-).18 F
3.044(out. This)72 267.6 R .044(means that when we e)3.044 F .044
(xtend Algorithm GA to ML)-.18 F/F3 12/Times-Bold@0 SF(let)3.044 E F0
.044(declarations, we will ha)3.044 F -.18(ve)-.24 G 1.261(an algorithm\
 for typing with subtypes that rejects precisely the same pure terms \(\
terms)72 287.6 R 1.465(without constants\) as the ML type check)72 307.6
R(er)-.12 E 7.465(.O)-.66 G 4.465(fc)-7.465 G 1.465
(ourse, this does not mean that atomic)-4.465 F .735(coercions ha)72
327.6 R 1.095 -.18(ve n)-.24 H 3.735(oe).18 G -.3(ff)-3.735 G .736
(ect; most typable terms will ha).3 F 1.096 -.18(ve m)-.24 H .736
(ore typings when coercions are).18 F 3(considered. F)72 347.6 R(or e)
-.18 E(xample, the application fx of f to x has typing)-.18 E({)108
373.6 Q/F4 12/Times-Italic@0 SF(int)A F2<cd>A F4 -.444(re)C(al).444 E F0
(}, {f:)A F4 -.444(re)C(al).444 E F1<ae>A F4 -.444(re)C(al).444 E F0 3
(,x)C(:)-3 E F4(int)A F0(})A F2<c9>3 E F0(fx:)3 E F4 -.444(re)C(al).444
E F0(,)A .195(while the application of a real function to an inte)72
399.6 R .194(ger ar)-.18 F .194(gument w)-.216 F .194
(ould not be typable with-)-.12 F(out coercions.)72 419.6 Q .612(Anothe\
r interest in atomic coercions stems from the normalization theorem for\
 typ-)97 443.2 R 1.224(ing deri)72 463.2 R -.3(va)-.3 G 1.224(tions gi)
.3 F -.18(ve)-.3 G 4.224(ni).18 G 4.224(nS)-4.224 G 1.224(ection 6.2.)
-4.224 F 1.224(This theorem \(Lemma 20\) sho)7.224 F 1.224
(ws that whene)-.3 F -.18(ve)-.3 G 4.224(ra).18 G 1.631
(typing statement C,A)72 483.2 R F2<c9>4.631 E F0(M:)4.631 E/F5 12
/Symbol-Slanted SF(s)A F0 1.631(with only atomic coercions is pro)4.631
F -.3(va)-.18 G 1.631(ble, there is a typing).3 F(deri)72 503.2 Q -.3
(va)-.3 G .511(tion in which \(coerce\) is only applied to v).3 F 3.51
(ariables. This)-.3 F .51(means that coercions only)3.51 F .982(enter i\
nto the base case of the typing algorithm, and so we may optimize the r\
emaining)72 523.2 R 3.47(cases. In)72 543.2 R .47
(addition, the restriction to atomic coercions allo)3.47 F .47(ws v)-.3
F .47(arious optimizations in the)-.3 F .028(representation of coercion\
 sets, and related algorithms \(which we will not go into in much)72
563.2 R 4.456(detail\). Before)72 583.2 R 1.455
(analyzing the structure of typing deri)4.456 F -.3(va)-.3 G 1.455
(tions with atomic coercions, we).3 F(will discuss some useful properti\
es of entailment with atomic coercions.)72 603.2 Q F3(6.2. Atomic coer)
72 646.8 Q(cions and "matching")-.216 E F0(An)97 670.4 Q F4 .256
(atomic coer)3.256 F .256(cion set)-.444 F F0 3.256(Ci)3.256 G 3.256
(sas)-3.256 G .256(et of coercions s)-3.256 F F2<cd>A F0 3.256(tb)C .256
(etween type v)-3.256 F .256(ariables. Although)-.3 F 2.313
(the phrase is slightly inaccurate, we will call a typing statement C,A)
72 690.4 R F2<c9>5.313 E F0(M:)5.312 E F5(s)A F0 2.312(with C)5.312 F
(atomic an)72 710.4 Q F4(atomic typing statement)3 E F0(.)A EP
%%Page: 31 31
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-3)275.004 56 S 3(1-)-3 G .44 LW 473.714 83.75
473.714 94.75 DL 1.555(When coercion sets only contain atomic coercions\
, it is easy to see that C)97 92 R/F1 11/Symbol SF(-)4.555 E/F2 12
/Symbol-Slanted SF(s)4.555 E/F3 12/Symbol SF<cd>A F2(t)A F0 1.096
(only if these tw)72 112 R 4.096(oe)-.12 G 1.096(xpressions ha)-4.276 F
1.456 -.18(ve e)-.24 H 1.095
(ssentially the same "shape," or pattern of type con-).18 F .183
(structors \(in our case,)72 132 R/F4 15/Symbol SF<ae>3.183 E F0 -.66
('s)C 3.183(\). T).66 F 3.183(ob)-.96 G 3.183(em)-3.183 G .183
(ore precise, we de\214ne the)-3.183 F/F5 12/Times-Italic@0 SF(matc)
3.184 E(hing)-.18 E F0 .184(relation on type)3.184 F -.18(ex)72 152 S
(pressions by).18 E(\(i\) if)108 178 Q F2(s)3 E F0(is a type v)3 E
(ariable, then)-.3 E F2(s)3 E F0(matches)3 E F2(t)3 E F0(if)3 E(f)-.3 E
F2(t)3 E F0(is a type v)3 E(ariable)-.3 E(\(ii\) if)108 218 Q F2(s)3 E
F0(=)A F2(s)A/F6 10/Times-Roman@0 SF(1)5 I F4<ae>-5 I F2(s)A F6(2)5 I F0
3(,t)-5 K(hen)-3 E F2(s)3 E F0(matches)3 E F2(t)3 E F0(if)3 E(f)-.3 E F2
(t)3 E F0(=)A F2(t)A F6(1)5 I F4<ae>-5 I F2(t)A F6(2)5 I F0(and)3 -5 M
F2(s)6 E F6(i)5 I F0(matches)3 -5 M F2(t)3 E F6(i)5 I F0(\(i=1, 2\).)3
-5 M(It is easy to v)72 244 Q(erify that matching is an equi)-.18 E -.3
(va)-.3 G(lence relation on types.).3 E(In addition we ha)6 E -.18(ve)
-.24 G(L)97 267.6 Q/F7 9/Times-Roman@0 SF(EMMA)A F0(16.)3 E 177.667
259.35 177.667 270.35 DL F5(If C)156.331 267.6 Q F1(-)3 E F2(s)3 E F3
<cd>3 E F2(t)3 E F5 3(,w)C(her)-3 E 3(eCi)-.444 G 3(sa)-3 G 3(na)-3 G
(tomic coer)-3 E(cion set, then)-.444 E F2(s)3 E F5(matc)3 E(hes)-.18 E
F2(t)3 E F5(.)A F0(This is easily pro)72 287.6 Q -.18(ve)-.18 G 3(db).18
G 3(yi)-3 G(nduction on the deri)-3 E -.3(va)-.3 G(tion of).3 E F2(s)3 E
F3<cd>3 E F2(t)3 E F0(from C.)3 E .08(The follo)97 311.2 R .079(wing le\
mma about the structure of proofs from atomic coercion sets will be)-.3
F(useful for analyzing deri)72 331.2 Q -.3(va)-.3 G
(tions of typing statements.).3 E(L)97 354.8 Q F7(EMMA)A F0(17.)3.65 E
F5(Let)6.65 E F2(s)3.651 E F5(and)3.651 E F2(t)3.651 E F5 .651
(be type e)3.651 F(xpr)-.24 E .651(essions with)-.444 F F2(s)3.651 E F5
(=)3.651 E F2(s)3.651 E/F8 10/Times-Italic@0 SF(1)5 I F4<ae>3.651 -5 M
F2(s)3.651 E F8(2)5 I F5(and)3.651 -5 M F2(t)3.651 E F5(=)3.651 E F2(t)
3.651 E F8(1)5 I F4<ae>3.651 -5 M F2(t)97 374.8 Q F8(2)5 I F5 6(.T)-5 K
153.696 366.55 153.696 377.55 DL(hen C)122.364 374.8 Q F1(-)3 E F2(s)3 E
F3<cd>3 E F2(t)3 E F5(if)3 E 215.223 366.55 215.223 377.55 DL 3(fC)
197.883 374.8 S F1(-)A F2(t)3 E F8(1)5 I F3<cd>3 -5 M F2(s)3 E F8(1)5 I
294.958 366.55 294.958 377.55 DL F5(and C)262.954 374.8 Q F1(-)3 E F2(s)
3 E F8(2)5 I F3<cd>3 -5 M F2(t)3 E F8(2)5 I F5(.)-5 I F0(P)97 402 Q F7
-.36(RO)C(OF).36 E F0 6.445(.O)3.445 G .445
(ne direction is a direct consequence of rule \(arro)-6.445 F 425.717
393.75 425.717 404.75 DL .444(w\): if C)384.053 402 R F1(-)3.444 E F2(t)
3.444 E F6(1)5 I F3<cd>3.444 -5 M F2(s)3.444 E F6(1)5 I F0 .444(and C)
3.444 -5 N 72 413.75 72 424.75 DL F1(-)72 422 Q F2(s)3 E F6(2)5 I F3<cd>
3 -5 M F2(t)3 E F6(2)5 I F0 3(,t)-5 K 157.399 413.75 157.399 424.75 DL
(hen C)126.067 422 Q F1(-)3 E F2(s)3 E F3<cd>3 E F2(t)3 E F0 6(.I)C 3
(tr)-6 G(emains to pro)-3 E .36 -.18(ve t)-.18 H(he con).18 E -.18(ve)
-.48 G(rse.).18 E 1.984 -.96(We s)97 445.6 T(ho).96 E 3.064(wt)-.3 G
186.384 437.35 186.384 448.35 DL .064(hat if C)147.192 445.6 R F1(-)
3.064 E F2(s)3.064 E F3<cd>3.064 E F2(t)3.064 E F0 .064(for an)3.064 F
(y)-.18 E F2(s)3.064 E F0(and)3.064 E F2(t)3.064 E F0 .064(of the form)
3.064 F F2(s)3.064 E F0(=)3.064 E F2(s)3.064 E F6(1)5 I F4<ae>3.064 -5 M
F2(s)3.064 E F6(2)5 I F0(and)3.064 -5 M F2(t)3.064 E F0(=)3.064 E F2(t)
3.065 E F6(1)5 I F4<ae>3.065 -5 M F2(t)3.065 E F6(2)5 I F0(,)-5 I .947
(then there is a proof of)72 465.6 R F2(s)3.947 E F3<cd>3.947 E F2(t)
3.947 E F0 .947(from C that ends with an application of rule \(arro)
3.947 F 3.946(w\). W)-.3 F(e)-.96 E(ar)72 485.6 Q .879
(gue by induction on the length of the proof of)-.216 F F2(s)3.879 E F3
<cd>3.879 E F2(t)3.879 E F0 .879(from C.)3.879 F .879
(If the proof is one step,)6.879 F 2.206
(then this is either an application of rule \(arro)72 505.6 R 2.205
(w\), in which case the lemma ob)-.3 F(viously)-.18 E .048
(holds, or an instance of \(ref\).)72 525.6 R(If)6.048 E F2(s)3.048 E F0
(and)3.048 E F2(t)3.048 E F0 .049(are identical, then we can also pro)
3.048 F .409 -.18(ve b)-.18 H(oth).18 E F2(s)3.049 E F6(1)5 I F3<cd>
3.049 -5 M F2(t)3.049 E F6(1)5 I F0(and)72 545.6 Q F2(s)3 E F6(2)5 I F3
<cd>3 -5 M F2(t)3 E F6(2)5 I F0(by \(ref\).)3 -5 M(This lets us pro)6 E
-.18(ve)-.18 G F2(s)3.18 E F3<cd>3 E F2(t)3 E F0(by \(arro)3 E(w\).)-.3
E -.18(Fo)97 569.2 S 3.48(rt).18 G .479(he inducti)-3.48 F .839 -.18
(ve s)-.3 H .479(tep, assume that we ha).18 F .839 -.18(ve a p)-.24 H
.479(roof whose \214nal step is a use of rule).18 F .415
(\(trans\) from antecedents)72 589.2 R F2(s)3.415 E F3<cd>3.415 E F2(r)
3.416 E F0(and)3.416 E F2(r)3.416 E F3<cd>3.416 E F2(t)3.416 E F0 6.416
(.B)C 3.416(yL)-6.416 G .416(emma 16, we kno)-3.416 F 3.416(wt)-.3 G
(hat)-3.416 E F2(r)3.416 E F0 .416(has the form)3.416 F F2(r)3.416 E F0
(=)72 609.2 Q F2(r)4.271 E F6(1)5 I F4<ae>4.271 -5 M F2(r)4.271 E F6(2)5
I F0 4.271(.S)-5 K 1.271(ince the proofs of)-4.271 F F2(s)4.271 E F3<cd>
4.271 E F2(r)4.271 E F0(and)4.271 E F2(r)4.271 E F3<cd>4.271 E F2(t)
4.271 E F0 1.271(are shorter)4.271 F 4.271(,w)-.48 G 4.27(em)-4.271 G
1.27(ay assume we ha)-4.27 F -.18(ve)-.24 G
(proofs of these inclusions ending in applications of rule \(arro)72
629.2 Q 3(w\). Thus)-.3 F 119.004 646.95 119.004 657.95 DL(C)108 655.2 Q
F1(-)3 E F2(r)3 E F6(1)5 I F3<cd>3 -5 M F2(s)3 E F6(1)5 I F0(,)-5 I F2
(s)6 E F6(2)5 I F3<cd>3 -5 M F2(r)3 E F6(2)5 I F0(,)-5 I F2(t)6 E F6(1)5
I F3<cd>3 -5 M F2(r)3 E F6(1)5 I F0(,)-5 I F2(r)6 E F6(2)5 I F3<cd>3 -5
M F2(t)3 E F6(2)5 I F0(.)-5 I(By rule \(trans\), we ha)72 681.2 Q
201.216 672.95 201.216 683.95 DL .36 -.18(ve C)176.064 681.2 T F1(-)3.18
E F2(t)3 E F6(1)5 I F3<cd>3 -5 M F2(s)3 E F6(1)5 I 280.279 672.95
280.279 683.95 DL F0(and C)248.947 681.2 Q F1(-)3 E F2(s)3 E F6(2)5 I F3
<cd>3 -5 M F2(t)3 E F6(2)5 I F0 3(,w)-5 K(hich pro)-3 E -.18(ve)-.18 G 3
(st).18 G(he lemma.)-3 E(Gi)97 704.8 Q -.18(ve)-.3 G 3.172(na).18 G .532
-.18(ny c)-3.172 H(oercion).18 E F2(s)3.173 E F3<cd>A F2(t)A F0 .173
(between matching type e)3.173 F(xpressions)-.18 E F2(s)3.173 E F0(and)
3.173 E F2(t)6.173 E F0 3.173(,t)C .173(here is a min-)-3.173 F
(imal atomic coercion set that implies)72 724.8 Q F2(s)3 E F3<cd>A F2(t)
A F0(.)A EP
%%Page: 32 32
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-3)275.004 56 S 3(2-)-3 G(L)97 92 Q/F1 9
/Times-Roman@0 SF(EMMA)A F0(18.)5.144 E/F2 12/Times-Italic@0 SF(Let)
8.144 E/F3 12/Symbol-Slanted SF(s)5.144 E F2(and)5.144 E F3(t)5.144 E F2
2.143(be matc)5.144 F 2.143(hing type e)-.18 F(xpr)-.24 E 5.143
(essions. Ther)-.444 F 5.143(ei)-.444 G 5.143(sa)-5.143 G 5.143(na)
-5.143 G(tomic)-5.143 E(coer)97 112 Q .568(cion set C =)-.444 F/F4 10
/Times-Italic@0 SF -1.94 -.37(AT O)3.568 H(MIC).37 E F2(\()A F3(s)A/F5
12/Symbol SF<cd>A F3(t)A F2 3.568(\)w)C .44 LW 285.992 103.75 285.992
114.75 DL .569(ith C)258.178 112 R/F6 11/Symbol SF(-)3.569 E F3(s)3.569
E F5<cd>A F3(t)A F2 .569(and suc)3.569 F 3.569(ht)-.18 G .569
(hat if C' is any atomic)-3.569 F(coer)97 132 Q 201.488 123.75 201.488
134.75 DL 1.234(cion set with C')117.88 132 R F6(-)4.234 E F3(s)4.233 E
F5<cd>A F3(t)A F2 4.233(,t)C 279.815 123.75 279.815 134.75 DL 1.233
(hen C')242.021 132 R F6(-)4.233 E F2 4.233(C. Furthermor)4.233 F 1.473
-.12(e, C m)-.444 H 1.233(ay be calculated).12 F(fr)97 152 Q(om a gr)
-.54 E(aph r)-.18 E(epr)-.444 E(esentation of)-.444 E F3(s)3 E F2(and)3
E F3(t)3 E F2(in linear time)3 E(.)-.18 E F0(P)97 175.6 Q F1 -.36(RO)C
(OF).36 E F0 6.918(.I)3.918 G 3.918(tf)-6.918 G(ollo)-3.918 E .918
(ws from Lemma 17 that we can compute)-.3 F/F7 10/Times-Roman@0 SF -.46
-1.11(AT O)3.919 H(MIC)1.11 E F0(\()A F3(s)A F5<cd>A F3(t)A F0 3.919
(\)r)C(ecursi)-3.919 E -.18(ve)-.3 G(ly).18 E(by)72 195.6 Q F7 -.46
-1.11(AT O)108 221.6 T(MIC)1.11 E F0(\(s)A F5<cd>A F0(t\) = { s)A F5<cd>
A F0 3(t})C F7 -.46 -1.11(AT O)108 261.6 T(MIC)1.11 E F0(\()A F3(s)A F7
(1)5 I/F8 15/Symbol SF<ae>-5 I F3(s)A F7(2)5 I F5<cd>-5 I F3(t)A F7(1)5
I F8<ae>-5 I F3(t)A F7(2)5 I F0 3(\)=)-5 K F7 -.46 -1.11(AT O)D(MIC)1.11
E F0(\()A F3(t)A F7(1)5 I F5<cd>-5 I F3(s)A F7(1)5 I F0(\))-5 I F5<c8>3
E F7 -.46 -1.11(AT O)3 H(MIC)1.11 E F0(\()A F3(s)A F7(2)5 I F5<cd>-5 I
F3(t)A F7(2)5 I F0(\))-5 I .101(This can be implemented ef)72 287.6 R
.101(\214ciently using a graph representation of type e)-.3 F .101
(xpressions sim-)-.18 F .204(ply by marking "positi)72 307.6 R -.18(ve)
-.3 G 3.204("a).18 G .204(nd "ne)-3.204 F -.06(ga)-.18 G(ti).06 E -.18
(ve)-.3 G 3.204("o).18 G .204(ccurrences of v)-3.204 F .204(ariables in)
-.3 F F3(s)3.204 E F0(and)3.204 E F3(t)3.204 E F0 6.204(.S)C .204
(ince com-)-6.204 F .904(paring corresponding positi)72 327.6 R 1.264
-.18(ve a)-.3 H .904(nd ne).18 F -.06(ga)-.18 G(ti).06 E 1.264 -.18
(ve p)-.3 H .903(ositions is entirely straightforw).18 F .903
(ard, this can)-.12 F .329(be programmed to run in linear time.)72 347.6
R .329(\(The notion of positi)6.329 F .689 -.18(ve a)-.3 H .329(nd ne)
.18 F -.06(ga)-.18 G(ti).06 E .69 -.18(ve o)-.3 H .33(ccurrences is).18
F 1.899(commonly used in logic.)72 367.6 R 1.899(Putting an e)7.899 F
1.899(xpression on the right of an)-.18 F F8<ae>4.898 E F0(preserv)4.898
E 1.898(es sign,)-.18 F(while putting an e)72 387.6 Q
(xpression on the left re)-.18 E -.18(ve)-.3 G
(rses the signs of all sube).18 E(xpressions.\))-.18 E .004(Using much \
the same idea, it is also easy to decide whether an atomic coercion set\
 C)97 411.2 R(implies)72 431.2 Q F3(s)3 E F5<cd>A F3(t)A F0(.)A(L)97
454.8 Q F1(EMMA)A F0(19.)3.95 E F2 .95(The pr)6.95 F 240.965 446.55
240.965 457.55 DL .95(edicate C)190.405 454.8 R F6(-)3.95 E F3(t)3.95 E
F5<cd>3.949 E F3(s)3.949 E F2 .949(is decidable in linear time)3.949 F
3.949(,g)-.12 G .949(iven a sub-)-3.949 F -.54(ro)97 474.8 S
(utine for the tr).54 E(ansitive closur)-.18 E 3(eo)-.444 G 3(fC)-3 G(.)
-3 E F0 1.562(The proof is straightforw)72 494.8 R 1.562
(ard using Lemma 17.)-.12 F 1.562(Since entailment from atomic coercion)
7.562 F .021(sets is easily reduced to transiti)72 514.8 R .381 -.18
(ve c)-.3 H .021
(losure, a reasonable representation for atomic coercion).18 F .346
(sets might be directed graphs or adjacenc)72 534.8 R 3.346(ym)-.18 G
3.346(atrices. This)-3.346 F -.12(wo)3.346 G .346(uld allo).12 F 3.346
(wt)-.3 G(ransiti)-3.346 E .706 -.18(ve c)-.3 H(losure,).18 E(and hence\
 entailment, to be computed by standard means [Aho, Hopcroft and Ullman\
].)72 554.8 Q/F9 12/Times-Bold@0 SF(6.3. A normalization theor)72 598.4
Q(em f)-.216 E(or typing deri)-.3 E -.12(va)-.12 G(tions).12 E F0 .982
(In general, a typing deri)97 622 R -.3(va)-.3 G .981
(tion may apply rule \(coerce\) to a term of an).3 F 3.981(yf)-.18 G
3.981(orm. F)-3.981 F(or)-.18 E 1.574
(this reason, Algorithm G for unrestricted)72 642 R F9(CC)4.574 E F0
1.574(typing, includes coercions in e)4.574 F -.18(ve)-.3 G 1.574
(ry case.).18 F(Ho)72 662 Q(we)-.3 E -.18(ve)-.3 G 2.265 -.48(r, w).18 H
1.305(ith atomic coercions, we can sho).48 F 4.304(wt)-.3 G 1.304(hat e)
-4.304 F -.18(ve)-.3 G 1.304(ry pro).18 F -.3(va)-.18 G 1.304
(ble typing can be trans-).3 F 1.535(formed into a typing deri)72 682 R
-.3(va)-.3 G 1.535(tion in which coercions are only applied to v).3 F
4.536(ariables. This)-.3 F(will be used to simplify Algorithm GA.)72 702
Q EP
%%Page: 33 33
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-3)275.004 56 S 3(3-)-3 G(L)97 92 Q/F1 9
/Times-Roman@0 SF(EMMA)A F0(20.)3.566 E/F2 12/Times-Italic@0 SF -1.26
(Fo)6.566 G 3.566(re)1.26 G .566(very pr)-3.746 F -.12(ov)-.54 G .566
(able atomic typing statement, C, A).12 F/F3 12/Symbol SF<c9>3.566 E F2
(M:)3.566 E/F4 12/Symbol-Slanted SF(s)A F2 3.565(,t)3.565 G(her)-3.565 E
3.565(ei)-.444 G(s)-3.565 E 3.682(ap)97 112 S -.54(ro)-3.682 G .682
(of in whic).54 F 3.682(hr)-.18 G .682(ule \(coer)-3.682 F .683
(ce\) is only used immediately after the typing axiom)-.444 F(\(var\).)
97 132 Q F0(The proof of this lemma appears belo)72 152 Q -.78(w.)-.3 G
3.909(As)97 175.6 S .909(imple e)-3.909 F .909(xample sho)-.18 F .908
(ws that Lemma 20 f)-.3 F .908(ails for unrestricted coercions.)-.12 F
(Consider)6.908 E(an)72 195.6 Q 3(yd)-.18 G(eri)-3 E -.3(va)-.3 G
(tion of the typing).3 E({\(s)108 221.6 Q/F5 15/Symbol SF<ae>A F0(s\))A
F3<cd>A F0(t},)A F3 3<c6c9>3 G F4(l)A F0(x.x : t.)A .25
(Since we must use \(abs\) to gi)72 247.6 R .61 -.18(ve a t)-.3 H .25
(ype to).18 F F4(l)3.25 E F0 .25(x.x, the typing deri)B -.3(va)-.3 G .25
(tion must use a statement).3 F(of the form)72 267.6 Q({\(s)108 293.6 Q
F5<ae>A F0(s\))A F3<cd>A F0(t},)A F3 3<c6c9>3 G F4(l)A F0(x.x :)A F4(s)3
E F5<ae>A F4(t)A F0(,)A .664(possibly follo)72 319.6 R .664
(wed by \(coerce\).)-.3 F .664(Since \(coerce\) is needed to remo)6.664
F 1.023 -.18(ve t)-.18 H(he).18 E F5<ae>3.663 E F0 .663(from the type)
3.663 F(of)72 339.6 Q F4(l)3 E F0
(x.x, we must use \(coerce\) after \(abs\).)A(Thus the lemma f)6 E
(ails.)-.12 E 1.657(Another class of countere)97 363.2 R 1.658
(xamples to Lemma 20 is illustrated by the typing state-)-.18 F(ment)72
383.2 Q({\(s)108 409.2 Q F5<ae>A F0(s\))A F3<cd>A F0(\(t)A F5<ae>A F0
(t\)}, y:s)A F3<c9>3 E F4(l)3 E F0(x.y : t)A F5<ae>A F0(t,)A 1.186(wher\
e although the coercion set is not atomic, the only coercions assumed a\
re between)72 435.2 R 3.502(matching type e)72 455.2 R 6.503
(xpressions. This)-.18 F 3.503(typing statement may be deri)6.503 F -.18
(ve)-.3 G 6.503(db).18 G 6.503<798c>-6.503 G 3.503(rst pro)-6.503 F
(ving)-.18 E F4(l)72 475.2 Q F0(x.y:s)A F5<ae>A F0 .527
(s, and then using \(coerce\).)B 2.447 -.96(We c)6.527 H .526
(annot apply \(coerce\) to the v).96 F .526(ariable y earlier in)-.3 F
.66(the deri)72 495.2 R -.3(va)-.3 G .66(tion since s).3 F F3<cd>A F0
3.66(ti)C 3.66(sn)-3.66 G .66(ot pro)-3.66 F -.3(va)-.18 G .66
(ble from the coercion h).3 F 3.66(ypothesis. Ho)-.06 F(we)-.3 E -.18
(ve)-.3 G 1.62 -.48(r, f).18 H .66(or typ-).48 F 1.418
(ing with coercions between matching type e)72 515.2 R 1.418
(xpressions, we can strengthen the coercion)-.18 F
(inference rules so that Lemma 20 holds.)72 535.2 Q(Speci\214cally)6 E 3
(,i)-.78 G 3(ts)-3 G(uf)-3 E(\214ces to add the inference rule)-.3 E
(\(arro)111 571 Q(w-in)-.3 E -.18(ve)-.48 G(rse\)).18 E F4(s)25.527 E/F6
10/Times-Roman@0 SF(1)5 I F3<cd>3 -5 M F4(s)3 E F0(,)A F4(t)6 E F3<cd>3
E F4(t)3 E F6(1)5 I F4(s)-83.911 -14.8 M F5<ae>3 E F4(t)3 E F3<cd>9 E F4
(s)6 E F6(1)5 I F5<ae>3 -5 M F4(t)3 E .48 LW 200.868 571 194.868 571 DL
205.906 571 199.906 571 DL 211.906 571 205.906 571 DL 217.906 571
211.906 571 DL 223.906 571 217.906 571 DL 229.906 571 223.906 571 DL
235.906 571 229.906 571 DL 241.906 571 235.906 571 DL 247.906 571
241.906 571 DL 253.906 571 247.906 571 DL 259.906 571 253.906 571 DL
265.906 571 259.906 571 DL 271.906 571 265.906 571 DL 277.906 571
271.906 571 DL 283.906 571 277.906 571 DL 289.906 571 283.906 571 DL
295.906 571 289.906 571 DL F6(1)289.106 566.2 Q F0 .168(Although this r\
ule is not sound without further restrictions on our semantics, it does\
 seem)72 601.8 R -.12(fa)72 621.8 S 1.713(irly plausible.).12 F 1.713
(In addition, the algorithmic aspects of typing with coercions between)
7.713 F 2.26(matching type e)72 641.8 R 2.26(xpressions and rule \(arro)
-.18 F(w-in)-.3 E -.18(ve)-.48 G 2.261
(rse\) seem quite similar to typing with).18 F(atomic coercions.)72
661.8 Q(P)97 685.4 Q F1 -.36(RO)C .179(OF OF).36 F F0(L)2.429 E F1(EMMA)
A F0 3.179(20. Note)3.179 F .178(that \(v)3.178 F .178
(ar\) is the only axiom scheme and so e)-.3 F -.18(ve)-.3 G .178
(ry proof is).18 F .415(essentially a tree with an instance of \(v)72
705.4 R .415(ar\) at each leaf.)-.3 F 2.335 -.96(We t)6.415 H .415
(hink of each node as labeled).96 F .975(by both the statement pro)72
725.4 R -.18(ve)-.18 G 3.974(da).18 G 3.974(tt)-3.974 G .974
(hat node and the \214nal rule used in that proof.)-3.974 F(Gi)6.974 E
-.18(ve)-.3 G 3.974(na).18 G EP
%%Page: 34 34
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-3)275.004 56 S 3(4-)-3 G .407
(proof of a statement C,A)72 92 R/F1 12/Symbol SF<c9>3.407 E F0(M:)3.407
E/F2 12/Symbol-Slanted SF(s)A F0 3.407(,d)C .407(e\214ne the)-3.407 F/F3
12/Times-Italic@0 SF(de)3.407 E(gr)-.48 E(ee)-.444 E F0 .408
(of the proof to be the number of pairs)3.407 F .107
(of internal tree nodes <)72 112 R F2(a)A F0(,)A F2(b)3.107 E F0 3.107
(>s)C .106(uch that there is a path from a leaf through)-3.107 F F2(a)
3.106 E F0(to)3.106 E F2(b)3.106 E F0 3.106(,n)C(ode)-3.106 E F2(a)3.106
E F0(is)3.106 E .171(labeled with a rule dif)72 132 R .171
(ferent from \(coerce\), and node)-.3 F F2(b)3.171 E F0 .171
(is labeled with rule \(coerce\).)3.171 F(Note)6.172 E(that)72 152 Q F2
(a)3.224 E F0(and)3.224 E F2(b)3.224 E F0 .223
(do not need to be adjacent.)3.224 F(Intuiti)6.223 E -.18(ve)-.3 G(ly)
.18 E 3.223(,t)-.78 G .223(he de)-3.223 F .223(gree gi)-.18 F -.18(ve)
-.3 G 3.223(su).18 G 3.223(sam)-3.223 G .223(easure of ho)-3.223 F(w)-.3
E -.12(fa)72 172 S 3.72(rt).12 G .72
(he occurrences of \(coerce\) are from the lea)-3.72 F -.18(ve)-.24 G
.72(s. W).18 F 3.72(es)-.96 G(ho)-3.72 E 3.72(wb)-.3 G 3.72(yi)-3.72 G
.72(nduction on the de)-3.72 F(gree)-.18 E(of a proof that e)72 192 Q
-.18(ve)-.3 G(ry pro).18 E -.3(va)-.18 G
(ble statement has a proof of de).3 E(gree zero.)-.18 E 4.696 -.96(We n)
97 215.6 T 2.775(eed a preliminary f).96 F 2.775
(act about proofs for the case in which a node labeled)-.12 F .746
(\(coerce\) follo)72 235.6 R .746(ws a node labeled \(abs\).)-.3 F .746
(Suppose we are gi)6.746 F -.18(ve)-.3 G 3.747(nap).18 G .747
(roof of C,A[x:)-3.747 F F2(s)A F0(])A F1<c9>3.747 E F0(M:)3.747 E F2(t)
A .44 LW 126.471 247.35 126.471 258.35 DL F0 .713(and that C)72 255.6 R
/F4 11/Symbol SF(-)3.713 E F2(r)3.713 E F1<cd>3.713 E F2(s)3.713 E F0
3.713(.T)C .713(hen we can produce a proof of C,A[x:)-3.713 F F2(r)A F0
(])A F1<c9>3.713 E F0(M:)3.713 E F2(t)A F0 .712(by replacing e)3.713 F
-.18(ve)-.3 G(ry).18 E .896(leaf labeled with the statement C,A[x:)72
275.6 R F2(s)A F0(])A F1<c9>3.897 E F0(x:)3.897 E F2(s)A F0 .897
(by a short proof of this statement be)3.897 F(gin-)-.18 E .008
(ning with C,A[x:)72 295.6 R F2(r)A F0(])A F1<c9>3.008 E F0(x:)3.008 E
F2(r)A F0 .008(and then using \(coerce\).)3.008 F .007
(Note that the proof we produce has the)6.007 F(same de)72 315.6 Q
(gree as the proof we start with.)-.18 E 1.148(It is no)97 339.2 R 4.148
(was)-.3 G 1.149(imple matter to pro)-4.148 F 1.509 -.18(ve b)-.18 H
4.149(yi).18 G 1.149(nduction on the de)-4.149 F 1.149
(gree of proofs that e)-.18 F -.18(ve)-.3 G(ry).18 E(pro)72 359.2 Q -.3
(va)-.18 G .293(ble statement has a proof of de).3 F .292(gree zero.)
-.18 F .292(The three possibilities to consider are that)6.292 F .655
(rule \(coerce\) may follo)72 379.2 R 3.655(wau)-.3 G .655
(se of rule \(app\), \(abs\) or another use of rule \(coerce\).)-3.655 F
.656(If we)6.655 F(ha)72 399.2 Q 1.556 -.18(ve a n)-.24 H 1.196
(ode labeled \(coerce\) follo).18 F 1.195
(wing another node labeled \(coerce\), then we can col-)-.3 F 1.499
(lapse these tw)72 419.2 R 4.499(op)-.12 G 1.499
(roof steps into one using rule \(trans\) for inclusions.)-4.499 F 1.5
(So it remains to)7.499 F(consider \(abs\) and \(app\).)72 439.2 Q -.18
(Fo)97 462.8 S 3.327(rt).18 G .327(he \(app\) case, suppose C,A)-3.327 F
F1<c9>3.327 E F0(MN:)3.327 E F2(t)A F0(follo)3.327 E .327(ws from C,A)
-.3 F F1<c9>3.327 E F0(M:)3.326 E F2(s)3.326 E/F5 15/Symbol SF<ae>3.326
E F2(t)3.326 E F0 .326(and C,A)3.326 F F1<c9>3.326 E F0(N:)72 482.8 Q F2
(s)A F0 .75(by rule \(app\) and then C,A)3.75 F F1<c9>3.75 E F0(MN:)3.75
E F2(r)A F0(follo)3.75 E .75(ws by \(coerce\). W)-.3 F 3.75(eh)-.96 G
-2.7 -.24(av e)-3.75 H 433.363 474.55 433.363 485.55 DL(C)421.608 482.8
Q F4(-)3.751 E F2(t)3.751 E F1<cd>A F2(r)A F0 6.751(.T)C(here-)-6.751 E
(fore, by rule \(arro)72 502.8 Q(w\),)-.3 E 119.004 520.55 119.004
531.55 DL(C)108 528.8 Q F4(-)3 E F0(\()3 E F2(s)A F5<ae>3 E F2(t)3 E F0
(\))A F1<cd>3 E F0(\()3 E F2(s)A F5<ae>3 E F2(r)3 E F0(\).)A .52
(So we can deri)72 554.8 R .88 -.18(ve C)-.3 H(,A).18 E F1<c9>3.52 E F0
(M:)3.52 E F2(s)A F5<ae>3.519 E F2(r)3.519 E F0 .519(from C,A)3.519 F F1
<c9>3.519 E F0(M:)3.519 E F2(s)A F5<ae>3.519 E F2(t)3.519 E F0 .519
(by rule \(coerce\) and then pro-)3.519 F 1
(ceed to use rule \(app\) to deri)72 574.8 R 1.36 -.18(ve C)-.3 H(,A).18
E F1<c9>4 E F0(MN:)4 E F2(r)4 E F0 7(.T)C 1(his reduces the de)-7 F 1
(gree of the proof by)-.18 F(one.)72 594.8 Q .124
(The \214nal case is a node labeled \(coerce\) follo)97 618.4 R .124
(wing a node labeled \(abs\). Suppose the)-.3 F
(proof has a path with nodes labeled)72 638.4 Q EP
%%Page: 35 35
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-3)275.004 56 S 3(5-)-3 G(C,A[x:)108 98 Q/F1
12/Symbol-Slanted SF(s)A/F2 10/Times-Roman@0 SF(1)5 I F0(])-5 I/F3 12
/Symbol SF<c9>6 E F0(M:)6 E F1(s)A F2(2)5 I F0(C,A)108 138 Q F3<c9>3 E
F1(l)3 E F0(x.M:)A F1(s)A F2(1)5 I/F4 15/Symbol SF<ae>3 -5 M F1(s)3 E F2
(2)5 I F0(\(by rule abs\))9 -5 M(C,A)108 178 Q F3<c9>3 E F1(l)3 E F0
(x.M:)A F1(r)A F2(1)5 I F4<ae>3 -5 M F1(r)3 E F2(2)5 I F0
(\(by rule coerce\),)9 -5 M 1.209(where we ha)72 204 R 1.569 -.18(ve u)
-.24 H 1.21(sed Lemma 16 to assume without loss of generality that the \
\214nal type).18 F(has the form)72 224 Q F1(r)3 E F2(1)5 I F4<ae>-5 I F1
(r)A F2(2)5 I F0(.)-5 I 1.92 -.96(We w)97 247.6 T(ould lik).84 E 3(et)
-.12 G 3(om)-3 G .36 -.18(ove r)-3 H(ule \(coerce\) abo).18 E .36 -.18
(ve \()-.18 H 3(abs\). Note).18 F(that since)3 E .44 LW 119.004 265.35
119.004 276.35 DL(C)108 273.6 Q/F5 11/Symbol SF(-)3 E F1(s)6 E F2(1)5 I
F4<ae>3 -5 M F1(s)3 E F2(2)5 I F3<cd>3 -5 M F1(r)3 E F2(1)5 I F4<ae>3 -5
M F1(r)3 E F2(2)5 I F0(,)-5 I 1.639(we ha)72 299.6 R 130.149 291.35
130.149 302.35 DL 1.999 -.18(ve C)101.719 299.6 T F5(-)4.819 E F1(r)
4.639 E F2(1)5 I F3<cd>4.639 -5 M F1(s)4.639 E F2(1)5 I 220.222 291.35
220.222 302.35 DL F0 1.639(and C)185.612 299.6 R F5(-)4.639 E F1(s)4.639
E F2(2)5 I F3<cd>4.638 -5 M F1(r)4.638 E F2(1)5 I F0 1.638(by Lemma 17.)
4.638 -5 N 1.638(By the preliminary f)7.638 F 1.638(act noted)-.12 F
(abo)72 319.6 Q -.18(ve)-.18 G 5.436(,t).18 G 2.436
(here is a proof of C, A[x:)-5.436 F F1(r)A F2(1)5 I F0(])-5 I F3<c9>
5.436 E F0(M:)5.436 E F1(s)A F2(2)5 I F0 2.437(with the same de)5.437 -5
N 2.437(gree as the proof of)-.18 F(C,A[x:)72 339.6 Q F1(s)A F2(1)5 I F0
(])-5 I F3<c9>6.175 E F0(M:)6.175 E F1(s)A F2(2)5 I F0 6.175(.N)-5 K -.3
(ow)-6.175 G 3.175(,a)-.48 G .174(pplying rule coerce, we can pro)-3.175
F .534 -.18(ve C)-.18 H(,A[x:).18 E F1(r)A F2(1)5 I F0(])-5 I F3<c9>
6.174 E F0(M:)6.174 E F1(r)A F2(2)5 I F0 .174(and so)3.174 -5 N 1.022
(by rule \(abs\) we ha)72 359.6 R 1.383 -.18(ve C)-.24 H(,A).18 E F3<c9>
7.023 E F1(l)7.023 E F0(x.M:)A F1(r)A F2(1)5 I F4<ae>4.023 -5 M F1(r)
4.023 E F2(2)5 I F0 7.023(.T)-5 K 1.023(his reduces the de)-7.023 F
1.023(gree of the proof by)-.18 F
(one and \214nishes the proof of the lemma.)72 379.6 Q/F6 12
/Times-Bold@0 SF
(6.4. Substitutions, instances and most general atomic typings)72 423.2
Q F0 3.196 -.96(We w)97 446.8 T 1.276(ill apply substitutions to atomic\
 coercion sets by computing the least atomic).96 F .594
(coercion set that implies the substitution instance.)72 466.8 R 3.594
(As)6.594 G .594(ubstitution S)-3.594 F/F7 12/Times-Italic@0 SF -.444
(re)3.594 G(spects).444 E F0 .594(coercion set)3.594 F 3.149(Ci)72 486.8
S .149(f, for e)-3.149 F -.18(ve)-.3 G(ry).18 E F1(s)3.149 E F3<cd>A F1
(t)A F0 .149(in C, the substitution instances S)3.149 F F1(s)A F0 .149
(and S)3.149 F F1(t)A F0 3.148(match. If)3.148 F 3.148(Sr)3.148 G .148
(espects C, then)-3.148 F(we de\214ne the action of S on C by)72 506.8 Q
(S)108 532.8 Q/F8 8/Times-Roman@0 SF<83>A F0 3(C=)C F3<c8>A/F9 10
/Symbol-Slanted SF(s)5 I/F10 10/Symbol SF<cd>A F9(t)A F10<ce>.8 E F2(C)
-.8 E -.46 -1.11(AT O)9 -5 P(MIC)1.11 E F0(\(S)A F1(s)A F3<cd>A F0(S)A
F1(t)A F0(\).)A .67(The instance relation on typings with atomic coerci\
ons is de\214ned just as with unre-)97 562.4 R 1.216
(stricted coercions, e)72 582.4 R 1.216
(xcept that we interpret the application SC of substitution S to coer)
-.18 F(-)-.24 E .043(cion set C using)72 602.4 R F2 -.46 -1.11(AT O)
3.043 H(MIC)1.11 E F0 .043(as abo)3.043 F -.18(ve)-.18 G 6.043(.M).18 G
.043(ore precisely)-6.043 F 3.043(,at)-.78 G .044(yping statement C',A)
-3.043 F(')-1.332 E F3<c9>3.044 E F0(M:)3.044 E F1(s)A F0(')A F7 .044
(is an)3.044 F(atomic instance of)72 622.4 Q F0(C,A)3 E F3<c9>3 E F0(M:)
3 E F1(s)A F0(if there e)3 E
(xists a substitution S respecting C such that)-.18 E 123 640.15 123
651.15 DL(C')108 648.4 Q F5(-)3 E F0(S)3 E F8<83>A F0 12(C, A)B(')-1.332
E F3<ca>3 E F0 6(SA, and)3 F F1(s)9 E F0 -3 3('= S)D F1(s)-3 E F0(.)A
.625(Note that by Lemma 18, S)72 674.4 R F8<83>A 216.216 666.15 216.216
677.15 DL F0(C)204.587 674.4 Q F5(-)3.625 E F0 .625
(SC, and so by Lemma 1 an)3.625 F 3.625(yC)-.18 G 3.625('w)-3.625 G
424.946 666.15 424.946 677.15 DL .625(ith C')393.024 674.4 R F5(-)3.625
E F0(S)3.625 E F8<83>A F0 3.625(Ca)C .625(lso satis-)-3.625 F 107.5
686.15 107.5 697.15 DL .416(\214es C')72 694.4 R F5(-)3.416 E F0 3.416
(SC. Therefore,)3.416 F .416(it follo)3.416 F .416
(ws from Lemma 11 that e)-.3 F -.18(ve)-.3 G .416
(ry atomic instance of a pro).18 F(v-)-.18 E
(able atomic typing is also a pro)72 714.4 Q -.3(va)-.18 G
(ble atomic typing.).3 E EP
%%Page: 36 36
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-3)275.004 56 S 3(6-)-3 G(L)97 92 Q/F1 9
/Times-Roman@0 SF(EMMA)A F0(21.)4.074 E/F2 12/Times-Italic@0 SF 1.074
(Suppose C',A)7.074 F(')-.444 E/F3 12/Symbol SF<c9>4.074 E F2(M:)4.074 E
/F4 12/Symbol-Slanted SF(s)A F2 4.074('i)C 4.074(sa)-4.074 G 4.073(na)
-4.074 G 1.073(tomic instance of C,A)-4.073 F F3<c9>4.073 E F2(M:)4.073
E F4(s)A F2 7.073(.I)C .44 LW 472.961 83.75 472.961 94.75 DL(f)465.552
92 Q/F5 11/Symbol SF(-)4.073 E F2(C,A)97 112 Q F3<c9>3 E F2(M:)3 E F4(s)
A F2 3(,t)C 179.992 103.75 179.992 114.75 DL(hen)159.664 112 Q F5(-)3 E
F2(C',A)3 E(')-.444 E F3<c9>3 E F2(M:)3 E F4(s)A F2('.)A F0 1.015
(An interesting corollary is that e)97 135.6 R -.18(ve)-.3 G 1.015
(ry pure lambda term with an atomic typing also).18 F
(has a Curry typing.)72 155.6 Q(C)97 182.8 Q F1(OR)A(OLLAR)-.36 E(Y)
-.585 E F0(22.)4.748 E F2 1.748(Suppose C is atomic and M is a pur)7.748
F 4.747(el)-.444 G 1.747(ambda term without)-4.747 F 161.668 194.55
161.668 205.55 DL 3(constants. If)97 202.8 R F5(-)3 E F2(C,A)3 E F3<c9>3
E F2(M:)3 E F4(s)A F2 3(,t)C(hen M has a Curry typing)-3 E(.)-.18 E F0
.193(This follo)72 222.8 R .193(ws from the f)-.3 F .193
(act that if we instantiate C,A)-.12 F F3<c9>3.194 E F0(M:)3.194 E F4(s)
A F0 .194(using a substitution that maps)3.194 F .006(all type v)72
242.8 R .006(ariables to a single v)-.3 F .005(ariable t, then we ha)-.3
F .365 -.18(ve a t)-.24 H .005(yping for M with all coercions fol-).18 F
(lo)72 262.8 Q 1.956(wing from re\215e)-.3 F(xi)-.18 E 1.956
(vity of containment. Therefore, this typing may be pro)-.3 F -.18(ve)
-.18 G 4.956(dw).18 G(ithout)-4.956 E .394(using rule \(coerce\).)72
282.8 R .394(The details of are left to the reader)6.394 F 6.394(.F)-.66
G .393(or the reader interested in type)-6.574 F .262
(constants, it is w)72 302.8 R .262(orth pointing out that if M has a)
-.12 F/F6 12/Times-Bold@0 SF(CC)3.263 E F0 .263
(typing with type constants, the con-)3.263 F 1.775
(stants may be replaced by type v)72 322.8 R 1.774
(ariables to yield a pro)-.3 F -.3(va)-.18 G 1.774
(ble typing without type con-).3 F 3(stants. Then,)72 342.8 R
(by applying a substitution as abo)3 E -.18(ve)-.18 G 3(,w).18 G 3(ec)-3
G(an produce a Curry typing.)-3 E F6(6.5. Matching substitutions f)72
386.4 Q(or atomic coer)-.3 E(cion sets)-.216 E F0 1.618(In the typing a\
lgorithm for atomic coercions, we will use an algorithm similar to)97
410 R .386(uni\214cation to maintain the "atomicity" constraint.)72 430
R .386(The need for this arises when we ha)6.386 F -.18(ve)-.24 G .549
(typings C)72 450 R/F7 10/Times-Roman@0 SF(1)5 I F0(,A)-5 I F7(1)5 I F3
<c9>3.549 -5 M F0(M:)3.549 E F4(s)A F0 .549(and C)3.549 F F7(2)5 I F0
(,A)-5 I F7(2)5 I F3<c9>3.549 -5 M F0(N:)3.549 E F4(t)A F0 .549
(for terms M and N, and wish to \214nd a typing for)3.549 F 3.084
(MN. Using)72 470 R .084(uni\214cation, we can \214nd common substituti\
on instances of the typing assump-)3.084 F .995(tions in A)72 490 R F7
(1)5 I F0 .995(and A)3.995 -5 N F7(2)5 I F0 .996(which could mak)3.996
-5 N 3.996(eM)-.12 G 3.996(Nw)-3.996 G .996(ell-typed \(if, in f)-3.996
F .996(act MN is typable\). Ho)-.12 F(w-)-.3 E -2.58 -.3(ev e)72 510 T
1.583 -.48(r, t).3 H .623(he substitution gi).48 F .623
(ving us a typing of MN may not respect the coercion sets C)-.3 F F7(1)5
I F0(and)3.622 -5 M(C)72 530 Q F7(2)5 I F0 3.612(.T)-5 K .612
(herefore, gi)-3.612 F -.18(ve)-.3 G 3.612(nas).18 G .612(et C deri)
-3.612 F -.18(ve)-.3 G 3.612(df).18 G .612(rom C)-3.612 F F7(1)5 I F0
.612(and C)3.612 -5 N F7(2)5 I F0 3.612(,w)-5 K 3.612(ew)-3.612 G .612
(ill need to \214nd the most gen-)-3.612 F .723
(eral substitution S which, for e)72 550 R -.18(ve)-.3 G(ry).18 E F4(s)
3.723 E F3<cd>A F4(t)A F3<ce>.96 E F0 .723(C, produces matching type e)
-.96 F .723(xpressions S)-.18 F F4(s)A F0(and)3.723 E(S)72 570 Q F4(t)A
F0 6.196(.W)C 3.196(ew)-7.156 G .196(ill say that S)-3.196 F F2 .196
(is a matc)3.196 F .196(hing substitution for)-.18 F F0 3.196(Ci)6.196 G
.196(f, for e)-3.196 F -.18(ve)-.3 G(ry).18 E F4(s)3.197 E F3<cd>A F4(t)
A F3<ce>.96 E F0 .197(C, the substitu-)-.96 F(tion instances S)72 590 Q
F4(s)A F0(and S)3 E F4(t)A F0(match.)3 E(L)97 617.2 Q F1(EMMA)A F0(23.)
3.068 E F2 .067(Let C be a set of containment e)6.068 F(xpr)-.24 E .067
(essions of the form)-.444 F F4(s)3.067 E F3<cd>A F4(t)A F2 3.067(,w)C
(her)-3.067 E(e)-.444 E F4(s)3.067 E F2(and)97 637.2 Q F4(t)5.495 E F2
2.495(may not necessarily matc)5.495 F 5.495(h. Ther)-.18 F 5.495(ei)
-.444 G 5.495(sa)-5.495 G 5.495(na)-5.495 G(lgorithm)-5.495 E/F8 10
/Times-Italic@0 SF(MA)5.495 E(TCH)-.37 E F2(suc)5.495 E 5.495(ht)-.18 G
(hat)-5.495 E(whene)97 657.2 Q 1.804(ver ther)-.18 F 4.804(ei)-.444 G
4.804(sa)-4.804 G(matc)-.001 E 1.803(hing substitution for C, then)-.18
F F8(MA)4.803 E(TCH)-.37 E F2 1.803(\(C\) pr)B 1.803(oduces a)-.54 F
1.83(most g)97 677.2 R(ener)-.12 E 1.83(al matc)-.18 F 1.83
(hing substitution.)-.18 F 1.83(If C has no matc)7.83 F 1.831
(hing substitution, then)-.18 F F8(MA)97 697.2 Q(TCH)-.37 E F2
(\(C\) fails.)A F0(Algorithm)72 717.2 Q F7(MA)6 E(TCH)-1.11 E F0 3(,w)C
(hich is similar to uni\214cation, is discussed in the Appendix.)-3 E EP
%%Page: 37 37
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-3)275.004 56 S 3(7-)-3 G/F1 12/Times-Bold@0
SF(6.6. Algorithm GA f)72 92 Q(or most general atomic typings)-.3 E F0
(Gi)97 115.6 Q -.18(ve)-.3 G 5.112(na).18 G 2.472 -.18(ny t)-5.112 H
2.112(erm M, the algorithm GA\(M\) belo).18 F 5.112(wp)-.3 G 2.111
(roduces an atomic typing C,A)-5.112 F/F2 12/Symbol SF<c9>72 135.6 Q F0
(M:)A/F3 12/Symbol-Slanted SF(s)A F0 1.368(for M, or)4.368 F/F4 12
/Times-Italic@0 SF(fails)4.368 E F0 7.368(.T)C 1.368
(he algorithm is written belo)-7.368 F 4.368(wi)-.3 G 4.368(nt)-4.368 G
1.368(he same applicati)-4.368 F -.18(ve)-.3 G 4.368(,p).18 G(attern-)
-4.368 E(matching style as algorithm G, using similar notation.)72 155.6
Q(GA\(x\) = { s)112.002 185.2 Q F2<cd>A F0 3(t})C 3(,{)-3 G(x:s})-3 E F2
<c9>3 E F0(x:t)3 E(GA\(MN\) =)112.002 225.2 Q F1(let)127.002 245.2 Q F0
(C)3 E/F5 10/Times-Roman@0 SF(1)5 I F0 3(,A)-5 K F5(1)-3 5 M F2<c9>3 -5
M F0(M:)3 E F3(s)A F0 3(=G)3 G(A\(M\))-3 E(C)142.002 265.2 Q F5(2)5 I F0
3(,A)-5 K F5(2)-3 5 M F2<c9>3 -5 M F0(N:)3 E F3(t)A F0 3(=G)3 G(A\(N\),)
-3 E(with type v)157.002 285.2 Q
(ariables renamed to be disjoint from those in GA\(M\))-.3 E 6(R=U)
142.002 305.2 S(NIFY\({)-6 E F3(a)A F0(=)A F3(b)A F0 3(|x)3 G(:)-3 E F3
(a)A F2<ce>.96 E F0(A)-.96 E F5(1)5 I F0(and x:)3 -5 M F3(b)A F2<ce>.96
E F0(A)-.96 E F5(2)5 I F0(})-5 I F2<c8>3 E F0({)3 E F3(s)A F0(=)A F3(t)A
/F6 15/Symbol SF<ae>A F0(t}\))A(where t is a fresh type v)157.002 325.2
Q(ariable)-.3 E 6(S=M)142.002 345.2 S -1.332(AT)-6 G(CH\(RC)1.332 E F5
(1)5 I F2<c8>-5 I F0(RC)A F5(2)5 I F0(\))-5 I F2<b0>3 3.6 M F0(R)3 -3.6
M F1(in)127.002 365.2 Q F0(S)142.002 385.2 Q/F7 8/Times-Roman@0 SF<83>A
F0(\(C)A F5(1)5 I F2<c8>-5 I F0(C)A F5(2)5 I F0(\), SA)-5 I F5(1)5 I F2
<c8>-5 I F0(SA)A F5(2)5 I F2<c9>3 -5 M F0(MN:St)3 E(GA\()112.002 425.2 Q
F3(l)A F0(x.M\) =)A F1(let)127.002 445.2 Q F0(C, A)3 E F2<c9>3 E F0(M:)3
E F3(t)A F0 3(=G)3 G(A\(M\))-3 E F1(in)127.002 465.2 Q F0(if x:)3 E F3
(s)A F2<ce>3.96 E F0 3(Af)2.04 G(or some)-3 E F3(s)3 E F0 3(then C,)
142.002 485.2 R(\(A -- {x:)3 E F3(s)A F0(}\))A F2<c9>3 E F3(l)3 E F0
(x.M:)A F3(s)A F6<ae>A F3(t)A F0 3(else C,)142.002 505.2 R(A)3 E F2<c9>3
E F3(l)3 E F0(x.M:t)A F6<ae>A F3(t)A F0(,)A(where t is a ne)157.002
525.2 Q 3(wt)-.3 G(ype v)-3 E(ariable)-.3 E .191(While Algorithm G al)97
554.8 R -.12(wa)-.12 G .191(ys succeeds, Algorithm GA may).12 F F4(fail)
3.191 E F0 .19(in the application case)3.19 F .529(if the call to)72
574.8 R F5(UNIFY)3.529 E F0(or)3.529 E F5(MA)3.529 E(TCH)-1.11 E F4
(fails)3.529 E F0 6.529(.T)C .529(his is to be e)-6.529 F .529
(xpected since, by Corollary 22, Algo-)-.18 F .578(rithm GA must f)72
594.8 R .578(ail on e)-.12 F -.18(ve)-.3 G .578
(ry term that does not ha).18 F .937 -.18(ve a C)-.24 H .577(urry type.)
.18 F .577(In particular)6.577 F 3.577(,G)-.48 G(A\(M\))-3.577 E .021
(must f)72 614.8 R .021(ail if an)-.12 F 3.022(ys)-.18 G .022
(ubterm of M has no normal form.)-3.022 F 1.942 -.96(We c)6.022 H .022
(an pro).96 F .382 -.18(ve t)-.18 H .022(hat if GA\(M\) succeeds,).18 F
(then it produces a pro)72 634.8 Q -.3(va)-.18 G(ble typing for M.).3 E
(T)97 662 Q/F8 9/Times-Roman@0 SF(HEOREM)A F0(24.)3.952 E F4 .951
(If GA\(M\) =)6.951 F(C,A)6.951 E F2<c9>3.951 E F4(M:)3.951 E F3(s)A F4
3.951(,t)C .951(hen C,A)-3.951 F F2<c9>3.951 E F4(M:)3.951 E F3(s)A F4
.951(is a pr)3.951 F -.12(ov)-.54 G .951(able atomic).12 F
(typing statement.)97 682 Q F0 1.044(It follo)72 702 R 1.044
(ws, by Lemma 21, that e)-.3 F -.18(ve)-.3 G 1.044
(ry atomic instance of GA\(M\) is a pro).18 F -.3(va)-.18 G 1.044
(ble typing for).3 F 3(M. Con)72 722 R -.18(ve)-.48 G(rsely).18 E 3(,e)
-.78 G -.18(ve)-3.3 G(ry pro).18 E -.3(va)-.18 G
(ble atomic typing for M is an atomic instance of GA\(M\).).3 E EP
%%Page: 38 38
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-3)275.004 56 S 3(8-)-3 G(T)97 92 Q/F1 9
/Times-Roman@0 SF(HEOREM)A F0(25.)3.065 E .44 LW 212.521 83.75 212.521
94.75 DL/F2 12/Times-Italic@0 SF(Suppose)166.46 92 Q/F3 11/Symbol SF(-)
6.065 E F2(C,A)3.064 E/F4 12/Symbol SF<c9>3.064 E F2(M:)3.064 E/F5 12
/Symbol-Slanted SF(s)A F2 .064(is a pr)3.064 F -.12(ov)-.54 G .064
(able atomic typing).12 F 6.064(.T)-.18 G .064(hen GA\(M\))-6.064 F
3.658(succeeds and pr)97 112 R 3.658(oduces an atomic typing with C,A)
-.54 F F4<c9>6.658 E F2(M:)6.659 E F5(s)A F2 3.659(as an atomic)6.659 F
(instance)97 132 Q(.)-.18 E F0 .63(Both theorems are pro)72 152 R -.18
(ve)-.18 G 3.63(da).18 G 3.63(tt)-3.63 G .63(he end of this section.)
-3.63 F .629(One consequence of Theorem 25 is)6.629 F .101(that if GA\(\
M\) succeeds, then we may compute a most general Curry typing from GA\(\
M\).)72 172 R .446(In stating and discussing this corollary)72 192 R
3.446(,i)-.78 G 3.446(ti)-3.446 G 3.446(su)-3.446 G .445
(seful to introduce some notation.)-3.446 F .445(If C is an)6.445 F
(atomic coercion set, let E)72 212 Q/F6 10/Times-Roman@0 SF(C)5 I F0
(be the set of equations)3 -5 M(E)108 238 Q F6(C)5 I F0 3(={)3 -5 O
(s=t | s)-3 E F4<cd>A F0(t)A F4<ce>.96 E F0(C},)-.96 E .063
(and for t appearing in C, let [t])72 264 R F6(C)5 I F0 .064
(be the set of all s with s=t in the re\215e)3.064 -5 N(xi)-.18 E -.18
(ve)-.3 G 3.064(,s).18 G .064(ymmetric and)-3.064 F(transiti)72 284 Q
.878 -.18(ve c)-.3 H .518(losure of E).18 F F6(C)5 I F0 6.518(.I)-5 K
3.518(no)-6.518 G .518(ther w)-3.518 F .518(ords, we write [t])-.12 F F6
(C)5 I F0 .518(for the equi)3.518 -5 N -.3(va)-.3 G .517
(lence class of t with).3 F(respect to the least equi)72 304 Q -.3(va)
-.3 G(lence relation containing E).3 E F6(C)5 I F0(.)-5 I(C)97 331.2 Q
F1(OR)A(OLLAR)-.36 E(Y)-.585 E F0(26.)3.583 E F2 .584(Let GA\(M\) = C,A)
6.583 F F4<c9>3.584 E F2(M:)3.584 E F5(s)A F2 .584(be a most g)3.584 F
(ener)-.12 E .584(al atomic typing for)-.18 F 3.252(M. Let)97 351.2 R
3.252(Sb)3.252 G 3.252(eas)-3.252 G .252(ubstitution that is a c)-3.252
F .251(hoice function on equivalence classes [t])-.18 F/F7 10
/Times-Italic@0 SF(C)5 I F2 .871
(of type variables appearing in C, so that whene)97 371.2 R .871(ver t)
-.18 F F7(1)5 I F2 3.871(,t)-5 K F7(2)-3.871 5 M F4<ce>.96 -5 M F2([t])
-.96 E F7(C)5 I F2 3.872(,w)-5 K 3.872(eh)-3.872 G .872(ave St)-3.872 F
F7(1)5 I F2(=)3.872 -5 M(St)97 391.2 Q F7(2)5 I F4<ce>.96 -5 M F2([t])
-.96 E F7(C)5 I F2 6(.T)-5 K(hen)-6 E F4<c6>3 E F2(,SA)A F4<c9>3 E F2
(M:S)3 E F5(s)A F2(is a most g)3 E(ener)-.12 E(al Curry typing for M.)
-.18 E F0(P)97 418.4 Q F1 -.36(RO)C(OF).36 E F0 6.656(.I)3.657 G 3.656
(ts)-6.656 G .656(hould be clear from the de\214nition of S that)-3.656
F F4<c6>3.656 E F0(,SA)A F4<c9>3.656 E F0(M:S)3.656 E F5(s)A F0 .656
(is an atomic)3.656 F .087(instance of GA\(M\).)72 438.4 R .087
(By Theorem 25, e)6.087 F -.18(ve)-.3 G .088
(ry Curry typing is an atomic instance of GA\(M\),).18 F 2.065
(so it suf)72 458.4 R 2.065(\214ces to sho)-.3 F 5.065(wt)-.3 G 2.065
(hat e)-5.065 F -.18(ve)-.3 G 2.065
(ry Curry instance of GA\(M\) is an instance of).18 F F4<c6>5.064 E F0
(,SA)A F4<c9>5.064 E F0(M:S)72 478.4 Q F5(s)A F0(.)A(If)97 502 Q F4<c6>
4.16 E F0(,A)A(')-1.332 E F4<c9>4.16 E F0(M:)4.16 E F5(s)A F0 4.16('i)C
4.16(sa)-4.16 G 4.16(ni)-4.16 G 1.16(nstance of GA\(M\) =)-4.16 F(C,A)
7.16 E F4<c9>4.16 E F0(M:)4.16 E F5(s)A F0 1.161(by substitution T)4.16
F 4.161(,t)-.888 G(hen)-4.161 E F4<c6>4.161 E F0 1.103(must pro)72 522 R
1.463 -.18(ve T)-.18 H 4.103(s=T).18 G 4.103(tf)-4.103 G 1.103(or e)
-4.103 F -.18(ve)-.3 G 1.103(ry s).18 F F4<cd>A F0(t)A F4<ce>.96 E F0
1.103(C. Consequently)-.96 F 4.103(,Tm)-.78 G 1.103(ust unify E)-4.103 F
F6(C)5 I F0 7.102(.B)-5 K 1.102(ut since S is a)-7.102 F 1.297
(most general uni\214er for E)72 542 R F6(C)5 I F0 4.297(,a)-5 K 4.297
(si)-4.297 G 4.298(se)-4.297 G 1.298(asily v)-4.298 F 1.298
(eri\214ed, there is some substitution R with T =)-.18 F(R)72 562 Q F4
<b0>3.6 I F0 4.761(S. It)-3.6 J(follo)4.761 E 1.761(ws that)-.3 F F4<c6>
4.761 E F0(,A)A(')-1.332 E F4<c9>4.761 E F0(M:)4.761 E F5(s)A F0 4.761
('i)C 4.761(sa)-4.761 G 4.76(ni)-4.761 G 1.76(nstance of)-4.76 F F4<c6>
4.76 E F0(,SA)A F4<c9>4.76 E F0(M:S)4.76 E F5(s)A F0 1.76(by R, pro)4.76
F 1.76(ving the)-.18 F(corollary)72 582 Q(.)-.78 E .472(Further discuss\
ion of the relationship between coercion sets and uni\214cation is gi)97
605.6 R -.18(ve)-.3 G(n).18 E .008(in the appendix.)72 625.6 R .007
(The remainder of this section is de)6.008 F -.24(vo)-.3 G .007
(ted to pro).24 F .007(ving Theorems 24 and 25.)-.18 F(P)97 649.2 Q F1
-.36(RO)C 1.498(OF OF).36 F F0(T)3.748 E F1(HEOREM)A F0 4.498(24. It)
4.498 F 1.498(is easy to see that G\(x\) is al)4.498 F -.12(wa)-.12 G
1.498(ys a well-typing, so we).12 F(mo)72 669.2 Q .36 -.18(ve o)-.18 H 3
(nt).18 G 3(oa)-3 G(pplication and abstraction.)-3 E
(Consider GA\(MN\). By the inducti)97 692.8 Q .36 -.18(ve a)-.3 H
(ssumption, both).18 E EP
%%Page: 39 39
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-3)275.004 56 S 3(9-)-3 G 3(GA\(M\) = C)108 98
R/F1 10/Times-Roman@0 SF(1)5 I F0 3(,A)-5 K F1(1)-3 5 M/F2 12/Symbol SF
<c9>3 -5 M F0(M:)3 E/F3 12/Symbol-Slanted SF(s)A F0 3(GA\(N\) = C)108
138 R F1(2)5 I F0 3(,A)-5 K F1(2)-3 5 M F2<c9>3 -5 M F0(N:)3 E F3(t)A F0
.014(are pro)72 164 R -.3(va)-.18 G .014
(ble. \(As in the proof of Theorem 13, we assume that the type v).3 F
.013(ariables in GA\(N\))-.3 F(ha)72 184 Q .834 -.18(ve b)-.24 H .474
(een renamed.\)).18 F .474
(Since S is de\214ned from the uni\214er R by composition, S must unify)
6.474 F({)72 204 Q F3(a)A F0(=)A F3(b)A F0 3.544(|x)3.544 G(:)-3.544 E
F3(a)A F2<ce>.96 E F0(A)-.96 E F1(1)5 I F0 .544(and x:)3.544 -5 N F3(b)A
F2<ce>.96 E F0(A)-.96 E F1(2)5 I F0 .543(}, and)-5 J F3(s)3.543 E F0(=)A
F3(t)A/F4 15/Symbol SF<ae>A F0 3.543(t. This)B .543(implies that SA)
3.543 F F1(1)5 I F2<c8>-5 I F0(SA)A F1(2)5 I F0 .543(is a well-formed)
3.543 -5 N .132(type assignment.)72 224 R .133
(Since S is a matching substitution for C)6.133 F F1(1)5 I F2<c8>-5 I F0
(C)A F1(2)5 I F0 3.133(,w)-5 K 3.133(ek)-3.133 G(no)-3.133 E 3.133(wt)
-.3 G .133(hat S)-3.133 F/F5 8/Times-Roman@0 SF<83>A F0(\(C)A F1(1)5 I
F2<c8>-5 I F0(C)A F1(2)5 I F0(\))-5 I .594
(is a well-de\214ned atomic coercion set.)72 244 R .594(Therefore, ar)
6.594 F .594(guing as in the proof of Theorem 13,)-.216 F
(Lemma 11, implies that the tw)72 264 Q 3(ot)-.12 G(ypings)-3 E(S)108
290 Q F5<83>A F0(\(C)A F1(1)5 I F2<c8>-5 I F0(C)A F1(2)5 I F0(\)SA)-5 I
F1(1)5 I F2<c8>-5 I F0(SA)A F1(2)5 I F2<c9>3 -5 M F0(M:S)3 E F3(s)A F0
(S)108 330 Q F5<83>A F0(\(C)A F1(1)5 I F2<c8>-5 I F0(C)A F1(2)5 I F0
(\)SA)-5 I F1(1)5 I F2<c8>-5 I F0(SA)A F1(2)5 I F2<c9>3 -5 M F0(N:S)3 E
F3(t)A F0(are both pro)72 356 Q -.3(va)-.18 G(ble and so).3 E(S)108 382
Q F5<83>A F0(\(C)A F1(1)5 I F2<c8>-5 I F0(C)A F1(2)5 I F0(\)SA)-5 I F1
(1)5 I F2<c8>-5 I F0(SA)A F1(2)5 I F2<c9>3 -5 M F0(MN:St)3 E(follo)72
408 Q(ws by rule \(app\).)-.3 E(Therefore GA\(MN\) is a pro)6 E -.3(va)
-.18 G(ble atomic typing statement.).3 E 1.196(The abstraction case is \
similar to the case considered in the proof of Theorem 13,)97 431.6 R
-.18(ex)72 451.6 S .57
(cept that no additional coercions are introduced.).18 F .569
(Since the details are may be check)6.57 F(ed)-.12 E(quite easily)72
471.6 Q 3(,w)-.78 G 3(el)-3 G(ea)-3 E .36 -.18(ve t)-.24 H
(his task to the reader).18 E 6(.T)-.66 G(his pro)-6 E -.18(ve)-.18 G 3
(st).18 G(he theorem.)-3 E(P)97 495.2 Q/F6 9/Times-Roman@0 SF -.36(RO)C
.068(OF OF).36 F F0(T)2.318 E F6(HEOREM)A F0 3.068(25. As)3.068 F .068
(in the proof of Theorem 14, an easy induction sho)3.068 F .069(ws that)
-.3 F .376(when GA\(M\) succeeds, it produces a typing which A assigns \
a type to x if)72 515.2 R 3.376(fxo)-.3 G .376(ccurs free)-3.376 F .64
(in M.)72 535.2 R .64(The main ar)6.64 F .641
(gument proceeds by induction on the structure of terms, and is essen-)
-.216 F 1.479(tially similar to the proof of Theorem 14 in the v)72
555.2 R 1.478(ariable and lambda abstraction cases.)-.3 F -.18(Fo)72
575.2 S 3(rt).18 G(his reason, we will only check the application case.)
-3 E .44 LW 141.045 590.55 141.045 601.55 DL(Suppose)97 598.8 Q/F7 11
/Symbol SF(-)3.377 E F0 .377(C, A)3.377 F F2<c9>3.377 E F0(MN:)3.377 E
F3(n)A F0 .377(is a pro)3.377 F -.3(va)-.18 G .377
(ble atomic typing statement.).3 F .378(By Lemma 20, this)6.377 F
(must follo)72 618.8 Q 3(wf)-.3 G(rom pro)-3 E -.3(va)-.18 G
(ble atomic typings).3 E(C, A)108 644.8 Q F2<c9>3 E F0(M:)3 E F3(m)A F4
<ae>A F3(n)A F0(C, A)108 684.8 Q F2<c9>3 E F0(N:)3 E F3(m)A F0 .458
(by rules \(app\).)72 710.8 R .458(By the inducti)6.458 F .818 -.18
(ve h)-.3 H .458(ypothesis, GA\(M\) and GA\(N\) are most general atomic)
.12 F(typings for M and N.)72 730.8 Q(This means that there e)6 E
(xist substitutions T)-.18 E F1(1)5 I F0(and T)3 -5 M F1(2)5 I F0
(such that)3 -5 M EP
%%Page: 40 40
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-4)275.004 56 S 3(0-)-3 G .44 LW 119.004 89.75
119.004 100.75 DL(C)108 98 Q/F1 11/Symbol SF(-)3 E F0(T)3 E/F2 10
/Times-Roman@0 SF(1)5 I/F3 8/Times-Roman@0 SF<83>-5 I F0(C)A F2(1)5 I F0
(A)9 -5 M/F4 12/Symbol SF<ca>3 E F0(T)3 E F2(1)5 I F0(A)-5 I F2(1)5 I F0
(T)12 -5 M F2(1)5 I/F5 12/Symbol-Slanted SF(s)-5 I F0(=)3 E F5(m)3 E/F6
15/Symbol SF<ae>A F5(n)A 119.004 129.75 119.004 140.75 DL F0(C)108 138 Q
F1(-)3 E F0(T)3 E F2(2)5 I F3<83>-5 I F0(C)A F2(2)5 I F0(A)9 -5 M F4<ca>
3 E F0(T)3 E F2(2)5 I F0(A)-5 I F2(2)5 I F0(T)12 -5 M F2(2)5 I F5(t)-5 I
F0(=)3 E F5(m)3 E F0(,)A .162(where C)72 164 R F2(1)5 I F0 3.162(,C)-5 K
F2(2)-3.162 5 M F0 3.162(,e)-5 K .162
(tc., are as in the application case of Algorithm GA.)-3.162 F .163
(Because GA renames)6.162 F .523(type v)72 184 R .523
(ariables, no type v)-.3 F .522(ariables in C)-.3 F F2(2)5 I F0(,A)-5 I
F2(2)5 I F4<c9>3.522 -5 M F0(N:)3.522 E F5(t)A F0 .522(appear in C)3.522
F F2(1)5 I F0(,A)-5 I F2(1)5 I F4<c9>3.522 -5 M F0(M:)3.522 E F5(s)A F0
6.522(.T)C .522(his allo)-6.522 F .522(ws us)-.3 F .367
(to combine substitutions T)72 204 R F2(1)5 I F0 .367(and T)3.367 -5 N
F2(2)5 I F0 6.367(.A)-5 K .367
(nticipating the need for a substitution that beha)-6.367 F -.18(ve)-.24
G(s).18 E .747(properly on the fresh v)72 224 R .746
(ariable t introduced in the algorithm, we let T be an)-.3 F 3.746(ys)
-.18 G(ubstitution)-3.746 E(such that)72 244 Q(Ts = T)108 270 Q F2(1)5 I
F0 3(si)-5 K 3(fsa)-3 G(ppears in the typing of M,)-3 E(Ts = T)108 310 Q
F2(2)5 I F0 3(si)-5 K 3(fsa)-3 G(ppears in the typing of N,)-3 E(Tt =)
108 350 Q F5(n)3 E F0 -.48(Wi)72 376 S(thout considering the ef).48 E
(fect of T on t, it is easy to see that)-.3 E 119.004 393.75 119.004
404.75 DL(C)108 402 Q F1(-)3 E F0(TC)3 E F2(1)5 I F0(A)9 -5 M F4<ca>3 E
F0 -1.116(TA)3 G F2(1)1.116 5 M F0(T)12 -5 M F5(s)A F0(=)3 E F5(m)3 E F6
<ae>A F5(n)A 119.004 433.75 119.004 444.75 DL F0(C)108 442 Q F1(-)3 E F0
(TC)3 E F2(2)5 I F0(A)9 -5 M F4<ca>3 E F0 -1.116(TA)3 G F2(2)1.116 5 M
F0(T)12 -5 M F5(t)A F0(=)3 E F5(m)3 E F0 1.171
(so that both instances are by the single substitution T)72 468 R 7.171
(.B)-.888 G 4.171(yL)-7.171 G 1.172(emma 3, the assignment A)-4.171 F
.413(must gi)72 488 R .773 -.18(ve t)-.3 H .413(ypes to all free v).18 F
.412(ariables of M and N and, as noted earlier)-.3 F 3.412(,a)-.48 G
3.412(na)-3.412 G .412(ssignment pro-)-3.412 F 2.166(duced by G al)72
508 R -.12(wa)-.12 G 2.166(ys contains e).12 F 2.166(xactly the v)-.18 F
2.167(ariables that occur free.)-.3 F 2.167(Therefore, T must)8.167 F
.133(unify {)72 528 R F5(a)A F0(=)A F5(b)A F0 3.132(|x)3.133 G(:)-3.132
E F5(a)A F4<ce>.96 E F0(A)-.96 E F2(1)5 I F0 .132(and x:)3.132 -5 N F5
(b)A F4<ce>.96 E F0(A)-.96 E F2(2)5 I F0 3.132(}. In)-5 J .132
(addition, since T)3.132 F F5(s)A F0(=)3.132 E F5(m)3.132 E F6<ae>A F5
(n)A F0 3.132(=T)3.132 G F5(t)-3.132 E F6<ae>A F0 .132
(Tt, the substitu-)B 1.311(tion T uni\214es)72 548 R F5(s)4.312 E F0(=)A
F5(t)A F6<ae>A F0 4.312(t. Since)B 4.312(Ri)4.312 G 4.312(sam)-4.312 G
1.312(ost general uni\214er for these equations, there is a)-4.312 F
(substitution V with)72 568 Q 3(T=V)108 594 S F4<b0>-3 3.6 M F0(R.)-3.6
I 1.222(Since C is atomic, V must be a matching substitution for RC)72
620 R F2(1)5 I F4<c8>-5 I F0(RC)A F2(2)5 I F0 4.221(.B)-5 K 1.221
(ut since)-4.221 F F2(MA)4.221 E(TCH)-1.11 E F0
(computes most general matching substitutions, this implies that)72 640
Q 3(V=W)108 666 S F4<b0>3.6 I F2(MA)3 -3.6 M(TCH)-1.11 E F0(\(RC)A F2(1)
5 I F4<c8>-5 I F0(RC)A F2(2)5 I F0(\))-5 I 2.278(for some W)72 692 R
5.278(.I)-1.104 G 5.278(tf)-5.278 G(ollo)-5.278 E 2.278(ws that C,A)-.3
F F4<c9>5.278 E F0(MN:)5.278 E F5(n)A F0 2.279(is an instance of S)5.278
F F3<83>A F0(\(C)A F2(1)5 I F4<c8>-5 I F0(C)A F2(2)5 I F0 2.279(\), SA)
-5 J F2(1)5 I F4<c8>-5 I F0(SA)A F2(2)5 I F4<c9>5.279 -5 M F0
(MN:St by W)72 712 Q 6(.T)-1.104 G(his pro)-6 E -.18(ve)-.18 G 3(st).18
G(he theorem.)-3 E EP
%%Page: 41 41
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-4)275.004 56 S 3(1-)-3 G/F1 12/Times-Bold@0
SF(7. V)72 92 Q(ariations and extensions of the typing algorithms)-1.104
E(7.1. Inserting Con)72 135.6 Q -.12(ve)-.48 G(rsion Functions).12 E F0
1.388(Algorithm G and GA calculate the set of subtyping assumptions nee\
ded to type a)97 159.2 R(gi)72 179.2 Q -.18(ve)-.3 G 4.136(nt).18 G
1.136(erm, b)-4.136 F 1.136(ut do not insert an)-.24 F 4.137(yt)-.18 G
1.137(ype con)-4.137 F -.18(ve)-.48 G 1.137(rsion functions.).18 F 1.137
(This is consistent with the)7.137 F(vie)72 199.2 Q 3.175(wt)-.3 G .175
(hat whene)-3.175 F -.18(ve)-.3 G(r).18 E/F2 12/Symbol-Slanted SF(s)
3.175 E F0 .175(is a subtype of)3.175 F F2(t)3.175 E F0 3.175(,e)C -.18
(ve)-3.475 G .175(ry v).18 F .175(alues of type)-.3 F F2(s)3.175 E F0
.175(is also a v)3.175 F .175(alue of type)-.3 F F2(t)3.174 E F0 6.174
(.I)C(n)-6.174 E 1.787(practice, ho)72 219.2 R(we)-.3 E -.18(ve)-.3 G
2.747 -.48(r, i).18 H 4.787(tm).48 G 1.787
(ay be useful to represent elements of)-4.787 F F2(s)4.787 E F0 1.787
(is some w)4.787 F 1.788(ay that tak)-.12 F(es)-.12 E(adv)72 239.2 Q
.724(antage of the particular features that distinguish)-.3 F F2(s)3.724
E F0(from)3.724 E F2(t)3.724 E F0 6.723(.F)C .723(or e)-6.903 F .723
(xample, e)-.18 F -.18(ve)-.3 G 3.723(nt).18 G(hough)-3.723 E .989
(the subrange of inte)72 259.2 R .99
(gers from 1 to 12 is most naturally re)-.18 F -.06(ga)-.18 G .99
(rded as a subset of the inte-).06 F .031(gers, it may be useful to sa)
72 279.2 R .391 -.18(ve s)-.24 H .031(pace by allocating fe).18 F .03
(wer bytes to the representation of each)-.3 F 1.046(element of the sub\
type. Then, when an element of the subtype is used as an element of)72
299.2 R .589(the supertype, it may be desirable to con)72 319.2 R -.18
(ve)-.48 G .589(rt from one representation to another).18 F 6.588(.\()
-.66 G(Other)-6.588 E(-)-.24 E 1.532(wise, it w)72 339.2 R 1.533(ould b\
e necessary to discriminate between representations at run-time.\))-.12
F(This)7.533 E .905(may be accomplished by making relati)72 359.2 R -.18
(ve)-.3 G .905(ly minor changes in either typing algorithm, as).18 F(sk)
72 379.2 Q .293(etched brie\215y belo)-.12 F 4.853 -.78(w. T)-.3 H 3.293
(os)-.18 G .293
(implify the discussion, we will only consider Algorithm GA.)-3.293 F(T\
he modi\214cations to Algorithm G are similar and left to the intereste\
d reader)72 399.2 Q(.)-.66 E 3.358 -.96(We a)97 422.8 T 1.438
(ssume that whene).96 F -.18(ve)-.3 G(r).18 E F2(s)4.438 E/F3 12/Symbol
SF<cd>A F2(t)A F0 4.438(,w)C 4.438(ea)-4.438 G 1.438(re gi)-4.438 F -.18
(ve)-.3 G 4.438(nac).18 G(on)-4.438 E -.18(ve)-.48 G 1.438
(rsion function h).18 F/F4 10/Symbol-Slanted SF(s)5 I/F5 10
/Times-Roman@0 SF(,)A F4(t)3.937 E F0(mapping)4.437 -5 M -.3(va)72 442.8
S .834(lues of type).3 F F2(s)3.835 E F0 .835(into type)3.835 F F2(t)
3.835 E F0 6.835(.G)C -2.58 -.3(iv e)-6.835 H 3.835(nc).3 G(on)-3.835 E
-.18(ve)-.48 G .835(rsion functions for each subtyping assertion in).18
F .121(C, we may construct con)72 462.8 R -.18(ve)-.48 G .121
(rsion functions for e).18 F -.18(ve)-.3 G(ry).18 E F2(s)3.121 E F3<cd>A
F2(t)A F0(pro)3.121 E -.3(va)-.18 G .121(ble from C.).3 F(Unfortunately)
6.121 E(,)-.78 E 1.089(the only w)72 482.8 R 1.089
(ay to do this seems to depend on the w)-.12 F 1.089(ay we pro)-.12 F
-.18(ve)-.18 G F2(s)4.27 E F3<cd>A F2(t)A F0 1.09(from C.)4.09 F 1.09
(This illus-)7.09 F(trates a general problem with user)72 502.8 Q
(-supplied type con)-.24 E -.18(ve)-.48 G(rsion functions.).18 E .44 LW
120.098 518.15 120.098 529.15 DL .551(If C)97 526.4 R/F6 11/Symbol SF(-)
3.551 E F2(s)3.551 E F3<cd>A F2(t)A F0 3.551(,t)C .551
(hen we de\214ne the untyped lambda term h)-3.551 F F4(s)5 I F5(,)A F4
(t)3.051 E F0 .551(by induction on the proof)3.551 -5 N(of)72 546.4 Q F2
(s)5.925 E F3<cd>A F2(t)A F0 2.925(from C, as follo)5.925 F 5.925(ws. W)
-.3 F 5.925(eu)-.96 G 2.925(se the standard abbre)-5.925 F 2.925
(viation M)-.3 F F3<b0>5.925 3.6 M F0 5.925(Nf)5.925 -3.6 O 2.925
(or the term)-5.925 F F2(l)72 566.4 Q F0(x.M\(Nx\).)A(\(i\) If)108 592.4
Q F2(s)3 E F3<cd>A F2(t)A F0(follo)3 E(ws from)-.3 E F2(s)3 E F3<cd>A F2
(r)A F0(and)3 E F2(r)3 E F3<cd>A F2(t)A F0 3(,t)C(hen h)-3 E F4(s)5 I F5
(,)A F4(t)2.5 E F0 3(::= h)6 -5 N F4(r)5 I F5(,)A F4(t)2.5 E F3<b0>3
-1.4 M F0(h)3 -3.6 M F4(s)5 I F5(,)A F4(r)2.5 E F0(\(ii\) If \()108
632.4 Q F2(s)A F5(1)5 I/F7 15/Symbol SF<ae>-5 I F2(s)A F5(2)5 I F0(\))-5
I F3<cd>A F0(\()A F2(t)A F5(1)5 I F7<ae>-5 I F2(t)A F5(2)5 I F0 3(\)f)-5
K(ollo)-3 E(ws from)-.3 E F2(t)108 652.4 Q F5(1)5 I F3<cd>-5 I F2(s)A F5
(1)5 I F0(and)3 -5 M F2(s)3 E F5(2)5 I F3<cd>-5 I F2(t)A F5(2)5 I F0 3
(,t)-5 K(hen h)-3 E F4(s)5 I F5(,)A F4(t)2.5 E F0(::=)6 -5 M F2(l)3 E F0
(x. h)A F4(s)5 I/F8 8/Times-Roman@0 SF(2)4 I F5(,)-4 I F4(t)2.5 E F8(2)4
I F3<b0>3 -5.4 M F0(x)3 -3.6 M F3<b0>3 3.6 M F0(h)3 -3.6 M F4(t)5 I F8
(1)4 I F5(,)-4 I F4(s)2.5 E F8(1)4 I F0(.)3 -9 M 1.334
(The conditions in [Re)72 678.4 R 1.334(ynolds 80] may vie)-.18 F 1.334
(wed as a natural w)-.3 F 1.333(ay of guaranteeing that the)-.12 F .692
(function h)72 698.4 R F4(s)5 I F5(,)A F4(t)A F0 .693
(is determined by the coercions associated with the h)3.692 -5 N .693
(ypotheses C, and inde-)-.06 F(pendent the proof used to construct h)72
718.4 Q F4(s)5 I F5(,)A F4(t)A F0(.)-5 I EP
%%Page: 42 42
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-4)275.004 56 S 3(2-)-3 G -1.2 -.96(Tw o)97 92
T 1.469(modi\214cations to Algorithm GA are needed.)5.43 F 1.469
(The \214rst is in the v)7.469 F 1.469(ariable case,)-.3 F
(where coercions are used.)72 112 Q(Instead of returning)6 E(GA\(x\) =)
108 138 Q({s)6 E/F1 12/Symbol SF<cd>A F0(t}, {x:s})A F1<c9>3 E F0(x:t)3
E(the algorithm inserts a coercion)72 164 Q(GA\(x\) =)108 190 Q({s)6 E
F1<cd>A F0(t}, {x:s})A F1<c9>3 E F0(h)3 E/F2 10/Times-Roman@0 SF(s, t)5
I F0(\(x\):t)-5 I(The second modi\214cation is in the use of substituti\
ons in the application case.)72 216 Q .613(While substitutions are only\
 applied to types in Algorithm GA, we must no)97 239.6 R 3.614(wa)-.3 G
(pply)-3.614 E .731(substitutions to terms as well. The reason is that \
when the type of a v)72 259.6 R .73(ariable is changed,)-.3 F .135
(we must also change the con)72 279.6 R -.18(ve)-.48 G .136
(rsion function associated with it. Therefore, we replace the).18 F
(last line of the application case of Algorithm GA by)72 299.6 Q(S)108
325.6 Q/F3 8/Times-Roman@0 SF<83>A F0(\(C)A F2(1)5 I F1<c8>-5 I F0(C)A
F2(2)5 I F0(\), SA)-5 I F2(1)5 I F1<c8>-5 I F0(SA)A F2(2)5 I F1<c9>3 -5
M F0(S\(MN\):St,)3 E .098(with S no)72 351.6 R 3.098(wa)-.3 G .097(ppli\
ed to the term MN, and de\214ne the application of a type substitution \
to an)-3.098 F(untyped term with con)72 371.6 Q -.18(ve)-.48 G
(rsion functions as follo).18 E(ws.)-.3 E .378(The ef)97 395.2 R .378(f\
ect of applying a type substitution S to an untyped lambda term M with \
con-)-.3 F -.18(ve)72 415.2 S .761
(rsion functions is to replace each con).18 F -.18(ve)-.48 G .761
(rsion function h).18 F/F4 10/Symbol-Slanted SF(s)5 I F2(,)A F4(t)A F0
.76(with h)3.76 -5 N F2(S)5 I F4(s)A F2(,S)A F4(t)A F0 6.76(.R)-5 K .76
(ecall that the)-6.76 F 1.791(de\214nition of h)72 435.2 R F4(s)5 I F2
(,)A F4(t)A F0 1.791(depends on the proof of)4.791 -5 N/F5 12
/Symbol-Slanted SF(s)4.791 E F1<cd>A F5(t)A F0 1.792(from C. W)4.792 F
4.792(ew)-.96 G 1.792(ill produce a con)-4.792 F -.18(ve)-.48 G(rsion)
.18 E 1.34(function h)72 455.2 R F2(S)5 I F4(s)A F2(,S)A F4(t)A F0 1.34
(corresponding to a proof of S)4.34 -5 N F5(s)A F1<cd>A F0(S)A F5(t)A F0
1.34(from S)4.34 F F3<83>A F0 4.339(C. Speci\214cally)B 4.339(,w)-.78 G
4.339(ew)-4.339 G 1.339(ill use)-4.339 F .446(the proof of)72 475.2 R(S)
6.446 E F5(s)A F1<cd>A F0(S)A F5(t)A F0 .447
(obtained by replacing each nonlogical axiom a)3.446 F F1<cd>A F0(b)A F1
<ce>.96 E F0 3.447(Ci)-.96 G 3.447(nt)-3.447 G .447(he proof of)-3.447 F
F5(s)72 495.2 Q F1<cd>A F5(t)A F0 .116(with a proof of Sa)3.116 F F1<cd>
A F0 .116(Sb from S)B F3<83>A F0 .116
(C. \(Lemma 18 and the de\214nition of S)B F3<83>A F0 3.115(Cg)C .115
(uarantee that)-3.115 F .036(there is a proof of Sa)72 515.2 R F1<cd>A
F0 .037(Sb from S)B F3<83>A F0 3.037(C.\) No)B 3.037(wt)-.3 G .037
(hat we ha)-3.037 F .397 -.18(ve \214)-.24 H -.18(xe).18 G 3.037(dh).18
G F2(S)-3.037 5 M F4(s)A F2(,S)A F4(t)A F0 3.037(,i)-5 K 3.037(ti)-3.037
G 3.037(se)-3.037 G .037(asy to see from)-3.037 F 1.704(the inducti)72
535.2 R 2.063 -.18(ve d)-.3 H 1.703(e\214nition of h).18 F F4(s)5 I F2
(,)A F4(t)A F0 1.703(that h)4.703 -5 N F2(S)5 I F4(s)A F2(,S)A F4(t)A F0
1.703(may be obtained by substituting an untyped)4.703 -5 N
(lambda term h)72 555.2 Q F2(Sa,Sb)5 I F0(for each basic con)3 -5 M -.18
(ve)-.48 G(rsion function h).18 E F2(a,b)5 I F0(in h)3 -5 M F4(s)5 I F2
(,)A F4(t)A F0(.)-5 I 1.367(The inducti)97 578.8 R 1.727 -.18(ve p)-.3 H
1.368(roof of Theorem 13 may be modi\214ed to sho).18 F 4.368(wt)-.3 G
1.368(hat if the modi\214ed)-4.368 F -.18(ve)72 598.8 S 1.643
(rsion of GA\(M\) succeeds, it produces a typing C, A).18 F F1<c9>4.643
E F0(N:)4.643 E F5(s)A F0 1.642(such that A)4.643 F F1<c9>4.642 E F0(N:)
4.642 E F5(s)A F0 1.642(is a)4.642 F .901(Curry typing \(i.e., pro)72
618.8 R -.3(va)-.18 G .902(ble from rules \(v).3 F .902
(ar\), \(app\) and \(abs\) only\), pro)-.3 F .902(vided we assume)-.18 F
(h)72 638.8 Q F4(s)5 I F2(,)A F4(t)3.971 E F0(:)-5 I F5(s)A/F6 15/Symbol
SF<ae>A F5(t)A F0 7.47(.F)C 1.47(urthermore, if each h)-7.47 F F4(s)5 I
F2(,)A F4(t)A F0 1.47(in N is replaced by the identity function, then N)
4.47 -5 N .176(reduces to M.)72 658.8 R .176
(The proof of Theorem 14 may also be modi\214ed to sho)6.176 F 3.177(wt)
-.3 G .177(hat the ne)-3.177 F 3.177(wa)-.3 G(lgo-)-3.177 E .386
(rithm is also guaranteed to \214nd a typing whene)72 678.8 R -.18(ve)
-.3 G 3.386(rt).18 G .385(here is a method for inserting con)-3.386 F
-.18(ve)-.48 G -.24(r-).18 G(sion functions.)72 698.8 Q EP
%%Page: 43 43
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-4)275.004 56 S 3(3-)-3 G/F1 12/Times-Bold@0
SF(7.2. ML P)72 92 Q(olymor)-.24 E(phism)-.12 E F0 .582
(Algorithms G and GA can also be e)97 115.6 R .582
(xtended to lambda calculus with a polymorphic)-.18 F F1(let)72 135.6 Q
F0 .644(construct as in ML [Gordon, et. al. 79, Milner 78].)3.644 F -.18
(Fo)6.644 G 3.644(rn).18 G .644(otational simplicity)-3.644 F 3.644(,w)
-.78 G 3.644(ed)-3.644 G(is-)-3.644 E 2.093(cuss only Algorithm G belo)
72 155.6 R 6.653 -.78(w. F)-.3 H 2.093(rom a theoretical point of vie)
.78 F 3.653 -.78(w, t)-.3 H 2.093(he simplest w).78 F 2.094(ay to)-.12 F
-.18(ex)72 175.6 S .726(tend the algorithm is to consider).18 F F1(let)
3.726 E F0 .726(an abbre)3.726 F .725(viation in lambda terms.)-.3 F
.725(If we de\214ne)6.725 F F1(let)3.725 E F0(by)72 195.6 Q F1(let)108
221.6 Q F0(x=M)3 E F1(in)3 E F0 9(N:)3 G 6(:= [M/x]N,)-9 F .736
(then it follo)72 247.6 R .736(ws immediately that our typing algorithm\
s may be used to \214nd most general)-.3 F .091(typings for terms with)
72 267.6 R F1(let)3.091 E F0 6.091(.F)C .091
(rom a practical point of vie)-6.091 F 1.651 -.78(w, i)-.3 H 3.091(ti)
.78 G 3.09(sm)-3.091 G .09(ore useful to e)-3.09 F .09(xtend G to)-.18 F
.737(type terms with)72 287.6 R F1(let)3.737 E F0(directly)3.737 E 6.737
(.H)-.78 G -.3(ow)-6.737 G -2.58 -.3(ev e).3 H 1.697 -.48(r, w).3 H
3.737(ec).48 G .737(an use this f)-3.737 F .737(act that G\()-.12 F F1
(let)A F0(x=M)3.738 E F1(in)3.738 E F0 .738(N\) should)3.738 F(be equi)
72 307.6 Q -.3(va)-.3 G(lent to G\([M/x]N\) to pro).3 E
(vide some intuition for the e)-.18 E(xtension of G to)-.18 E F1(let)3 E
F0(.)A .712
(Since Algorithm G deduces a typing for each subterm independently)97
331.2 R 3.712(,t)-.78 G .712(he algorithm)-3.712 F .536(will type e)72
351.2 R -.18(ve)-.3 G .536
(ry occurrence of M in [M/x]N by precisely the same process.).18 F .537
(If we wish to)6.537 F(type an e)72 371.2 Q(xpression of the form)-.18 E
F1(let)108 397.2 Q F0(x=M)3 E F1(in)3 E F0(N)3 E .444(without substitut\
ing M for x in N, then we may compute G\(M\) once and be)72 423.2 R .444
(gin to type N)-.18 F .356(as usual.)72 443.2 R .356
(When we see an x inside N, we then substitute the typing for M.)6.356 F
.357(More speci\214-)6.357 F(cally)72 463.2 Q 3.506(,i)-.78 G 3.506(fG)
-3.506 G .506(\(M\) = C,A)-3.506 F/F2 12/Symbol SF<c9>3.505 E F0(M:)
3.505 E/F3 12/Symbol-Slanted SF(s)A F0 .505
(is the typing for M, then we w)3.505 F .505(ould lik)-.12 F 3.505(et)
-.12 G 3.505(ou)-3.505 G .505(se C,A)-3.505 F F2<c9>3.505 E F0(x:)3.505
E F3(s)A F0(as)3.505 E .066(the typing for x inside N.)72 483.2 R(Ho)
6.066 E(we)-.3 E -.18(ve)-.3 G 1.026 -.48(r, s).18 H .067
(ince substitution [M/x]N in).48 F -.24(vo)-.48 G(lv).24 E .067
(es some renaming of)-.18 F .636(bound v)72 503.2 R .636
(ariables in N to a)-.3 F -.24(vo)-.24 G .636(id capture of free v).24 F
.636(ariables in M, there are some minor com-)-.3 F .935(plications re)
72 523.2 R -.06(ga)-.18 G .935(rding v).06 F .935
(ariables that occur free in M.)-.3 F .935
(These details are easily resolv)6.935 F .936(ed, as)-.18 F .69(describ\
ed in detail in [Kanellakis and Mitchell 89, Kanellakis, Mairson and Mi\
tchell 9+,)72 543.2 R(Mitchell 90]; see especially the appendix of [Kan\
ellakis, Mairson and Mitchell 9+].)72 563.2 Q F1
(8. Conclusion and Futur)72 606.8 Q 3(eD)-.216 G(ir)-3 E(ections)-.216 E
F0 .579(As with Curry typing without coercions, a relati)97 630.4 R -.18
(ve)-.3 G .58(ly simple set of inference rules is).18 F(suf)72 650.4 Q
1.758(\214cient to deduce all semantically v)-.3 F 1.758
(alid typing statements.)-.3 F(Ho)7.758 E(we)-.3 E -.18(ve)-.3 G 2.718
-.48(r, s).18 H 1.758(emantic com-).48 F .977(pleteness is achie)72
670.4 R -.18(ve)-.3 G 3.977(da).18 G 3.977(tt)-3.977 G .977
(he cost of making the set of types of a term undecidable.)-3.977 F -1.2
-.96(Tw o)6.978 H .675(type inference algorithms for the decidable set \
of inference rules \(without term equality\))72 690.4 R .561(are presen\
ted, one using arbitrary subtyping assumptions, and the other restricte\
d to sub-)72 710.4 R .518(typing assumptions between atomic types.)72
730.4 R .518(These algorithms could be used to e)6.518 F .518(xtend the)
-.18 F EP
%%Page: 44 44
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-4)275.004 56 S 3(4-)-3 G .453
(programming language ML with simple forms of subtyping.)72 92 R 2.373
-.96(We h)6.453 H -2.7 -.24(av e).96 H .453(also addressed the)3.693 F
.605(algorithminc problem of inserting calls to type con)72 112 R -.18
(ve)-.48 G .605(rsion functions at compile time, b).18 F(ut)-.24 E
(not the semantics of type con)72 132 Q -.18(ve)-.48 G(rsion.).18 E 3.69
-.96(We h)97 155.6 T -2.7 -.24(av e).96 H 1.77
(only considered one semantic interpretation for the type connecti)5.01
F -.18(ve)-.3 G/F1 15/Symbol SF<ae>4.951 E F0(.)A -1.2 -.96(Tw o)72
175.6 T 2.997
(additional possibilities are the quotient-set semantics [Hindle)6.957 F
5.997(y8)-.18 G 2.996(3a] and the F-)-5.997 F 1.587(semantics [Hindle)72
195.6 R 4.587(y8)-.18 G 4.587(3b]. It)-4.587 F 1.587(seems lik)4.587 F
1.587(ely that the techniques of [Hindle)-.12 F 4.587(y8)-.18 G 1.587
(3a, Hindle)-4.587 F(y)-.18 E 1.415(83b] will suf)72 215.6 R 1.414
(\214ce to pro)-.3 F 1.774 -.18(ve c)-.18 H 1.414
(ompleteness theorems for typing with coercions for both of).18 F .693
(these semantics.)72 235.6 R .694
(Some discussion of the relationships between these semantics, and fur)
6.693 F(-)-.24 E(ther references, are gi)72 255.6 Q -.18(ve)-.3 G 3(ni)
.18 G 3(n[)-3 G(Mitchell 88].)-3 E/F2 12/Times-Italic@0 SF(Ac)97 302.8 Q
(knowledg)-.24 E(ements:)-.12 E F0 .3(Thanks to Ra)3.3 F .3
(vi Sethi for originally suggesting the study of type)-.24 F
(inference with coercions and to Lalita Jate)72 322.8 Q -.06(ga)-.18 G
(onkar for man).06 E 3(yh)-.18 G(elpful suggestions.)-3 E EP
%%Page: 45 45
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-4)275.004 56 S 3(5-)-3 G/F1 12/Times-Bold@0
SF -.3(Ap)75 92 S(pendix. Algorithms UNIFY and MA).3 E(TCH)-1.14 E
(8.1. Uni\214cation)72 135.6 Q F0 .223(Since matching is an e)97 162.8 R
.223(xtension of uni\214cation, we be)-.18 F .223(gin with a short re)
-.18 F(vie)-.3 E 3.223(wo)-.3 G 3.223(fau)-3.223 G(ni-)-3.223 E 2.838
(\214cation algorithm.)72 182.8 R 2.838
(Uni\214cation may be programmed in the same functional, pattern-)8.838
F .926(matching style as the typing algorithms.)72 202.8 R .927
(In the clauses belo)6.926 F 2.487 -.78(w, w)-.3 H 3.927(ea).78 G .927
(ssume that an)-3.927 F 3.927(yn)-.18 G(on-)-3.927 E .099
(empty set matches a pattern consisting of the union of tw)72 222.8 R
3.099(os)-.12 G .099(ets. Although the matching of)-3.099 F 3.268(as)72
242.8 S .269(et to a pattern is nondeterministic, this does not af)
-3.268 F .269(fect the correctness of the algorithm.)-.3 F 2.151 -.96
(We a)72 262.8 T .231
(lso assume a form of pattern-matching for equations which tak).96 F
.231(es commutati)-.12 F .231(vity into)-.3 F 3(account. F)72 282.8 R
(or e)-.18 E(xample, we assume that an equation)-.18 E/F2 12
/Symbol-Slanted SF(s)3 E/F3 10/Times-Roman@0 SF(1)5 I/F4 15/Symbol SF
<ae>-5 I F2(s)A F3(2)5 I F0 3(=sm)3 -5 O(atches the pattern t=)-3 E F2
(t)A F0(.)A(Gi)97 306.4 Q -.18(ve)-.3 G 3.867(nas).18 G .868
(et of equations E and a substitution S, the algorithm)-3.867 F F3
(UNIFY)3.868 E F0 .868(\(E,S\) attempts)B .907
(to \214nd the most general substitution T)72 326.4 R/F5 12/Symbol SF
<b3>A F0 3.906(Su)C .906(nifying E.)-3.906 F .906
(While we are generally interested)6.906 F .38(in calling)72 346.4 R F3
(UNIFY)3.38 E F0 .38(with the identity substitution to be)3.38 F .381
(gin with, the substitution parameter is)-.18 F(useful on recursi)72
366.4 Q .36 -.18(ve c)-.3 H(alls.).18 E F3(UNIFY)121.633 396 Q F0(\()A
F5<c6>A F0 3(,S)C 3(\)=S)-3 G(;)-3 E F3(UNIFY)121.633 436 Q F0(\(E)A F5
<c8>A F0({t=)A F2(t)A F0(}, S\) =)A F1(if)136.633 456 Q F2(t)3 E F0
(is the v)3 E(ariable t)-.3 E F1(then)3 E F3(UNIFY)6 E F0(\(E, S\))A F1
3(else if)136.633 476 R F0 3(td)6 G(oes not occur in)-3 E F2(t)3 E F1
(then)6 E F3(UNIFY)6 E F0(\([)A F2(t)A F0(/t]E, [)A F2(t)A F0(/t])A F5
<b0>3.6 I F0(S\))-3.6 I F1(else)6 E/F6 12/Times-Italic@0 SF(fail)6 E F3
(UNIFY)121.633 516 Q F0(\(E)A F5<c8>A F0({)A F2(s)A F3(1)5 I F4<ae>-5 I
F2(s)A F3(2)5 I F0(=)3 -5 M F2(t)3 E F3(1)5 I F4<ae>-5 I F2(t)A F3(2)5 I
F0(}, S\) =)-5 I F3(UNIFY)3 E F0(\(E)A F5<c8>A F0({)A F2(s)A F3(1)5 I F0
(=)-5 I F2(t)A F3(1)5 I F0(,)-5 I F2(s)3 E F3(2)5 I F0(=)-5 I F2(t)A F3
(2)5 I F0(}, S})-5 I(Intuiti)97 562 Q -.18(ve)-.3 G(ly).18 E 3.684(,i)
-.78 G(f)-3.684 E F3(UNIFY)3.684 E F0 .684
(\(E, S\) is computed using a recursi)B 1.043 -.18(ve c)-.3 H(all).18 E
F3(UNIFY)3.683 E F0(\(E)A F3(1)5 I F0 3.683(,S)-5 K F3(1)-3.683 5 M F5
<b0>-1.4 I F0 .683(S\), then)-3.6 J(S)72 582 Q F3(1)5 I F0 1.348
(is a partial solution to E, with E)4.347 -5 N F3(1)5 I F0 1.348
(the "simpler" problem remaining.)4.348 -5 N 3.268 -.96(To p)7.348 H(ro)
.96 E 1.708 -.18(ve m)-.18 H(ore).18 E(rigorously that)72 602 Q F3
(UNIFY)3 E F0(is correct, we \214rst sho)3 E 3(wt)-.3 G
(hat the algorithm al)-3 E -.12(wa)-.12 G(ys terminates.).12 E(L)97
629.2 Q/F7 9/Times-Roman@0 SF(EMMA)A F0(27.)3.111 E F6 -1.26(Fo)6.111 G
3.111(re)1.26 G .111
(very \214nite set of equations E and substitution S, the algorithm)
-3.291 F/F8 10/Times-Italic@0 SF(UNIFY)97 649.2 Q F6
(\(E, S\) terminates.)A F0(P)97 676.4 Q F7 -.36(RO)C(OF).36 E F0 7.167
(.T)4.167 G 1.167(ermination is pro)-8.007 F -.18(ve)-.18 G 4.168(db).18
G 4.168(ya)-4.168 G 1.168(ssociating a "de)-4.168 F 1.168
(gree" with each set E of equa-)-.18 F 1.045(tions, and sho)72 696.4 R
1.045(wing that the de)-.3 F 1.045(gree decreases with each recursi)-.18
F 1.405 -.18(ve c)-.3 H 4.045(all. Although).18 F(se)4.045 E -.18(ve)-.3
G(ral).18 E .488
(other de\214nitions will do equally well, we will say that the)72 716.4
R F6(de)3.488 E(gr)-.48 E(ee)-.444 E F0 .488(of set E of equations is)
3.488 F(the pair of natural numbers)72 736.4 Q EP
%%Page: 46 46
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-4)275.004 56 S 3(6-)-3 G(de)108 98 Q
(gree\(E\) = <# of occurrences of)-.18 E/F1 15/Symbol SF<ae>3 E F0 3
(,#o)C 3(fe)-3 G(quations in E>.)-3 E 2.601 -.96(We o)72 124 T .681
(rder de).96 F .681(grees le)-.18 F(xicographically)-.18 E 3.681(,s)-.78
G 3.681(ot)-3.681 G .681
(hat <m,n> is less than <i,j> if either m<i or m=i)-3.681 F 1.717
(and n<j.)72 144 R 1.717(It is easy to check that each recursi)7.717 F
2.077 -.18(ve c)-.3 H 1.718(all in).18 F -.24(vo)-.48 G(lv).24 E 1.718
(es a set E of lo)-.18 F 1.718(wer de)-.3 F(gree.)-.18 E .621(Since the\
re is no in\214nite decreasing sequence of pairs of natural numbers, it\
 follo)72 164 R .621(ws that)-.3 F/F2 10/Times-Roman@0 SF(UNIFY)72 184 Q
F0(\(E,S\) al)A -.12(wa)-.12 G(ys terminates.).12 E(L)97 211.2 Q/F3 9
/Times-Roman@0 SF(EMMA)A F0(28.)3.5 E/F4 12/Times-Italic@0 SF .5
(Let E be a \214nite set of equations and S be any substitution.)6.5 F
.501(If any)6.501 F(T)97 231.2 Q/F5 12/Symbol SF<b3>4.159 E F4 4.159(Su)
4.159 G 1.159(ni\214es E, then)-4.159 F/F6 10/Times-Italic@0 SF(UNIFY)
4.159 E F4 1.159(\(E, S\) computes a uni\214er R for E with T)B F5<b3>
4.159 E F4(R)4.158 E F5<b3>4.158 E F4(S.)4.158 E(Otherwise)97 251.2 Q(,)
-.12 E F6(UNIFY)3 E F4(\(E, S\) fails.)A F0(P)97 278.4 Q F3 -.36(RO)C
(OF).36 E F0 6.65(.W)3.65 G 3.65(eu)-7.61 G .65(se induction on the de)
-3.65 F .651(gree of E, using the same de)-.18 F .651
(gree function as in)-.18 F .462(the proof of Lemma 27.)72 298.4 R .462
(If E is a set with de)6.462 F .461
(gree <0, 0>, then E must be empty and so it)-.18 F(is easy to v)72
318.4 Q(erify that the lemma holds.)-.18 E(No)97 342 Q 4.112(ws)-.3 G
1.112(uppose that E has de)-4.112 F 1.113
(gree <m, n> with at least one of these numbers greater)-.18 F 1.262
(than 0.)72 362 R 1.262(Since E cannot be empty)7.262 F 4.262(,Em)-.78 G
1.262(ust be of the form E)-4.262 F F2(1)5 I F5<c8>-5 I F0({)A/F7 12
/Symbol-Slanted SF(s)A F0(=)A F7(t)A F0 4.261(}f)C 1.261
(or some equation)-4.261 F F7(s)72 382 Q F0(=)A F7(t)A F0 3.205(.I)C
3.205(fo)-3.205 G .205(ne of these, say)-3.205 F F7(s)3.205 E F0 3.205
(,i)C 3.205(sav)-3.205 G .206
(ariable t, then the second clause of the algorithm applies.)-3.505 F
.825(It is easy to see that an)72 402 R 3.825(yu)-.18 G .825
(ni\214er must map t to some substitution instance of)-3.825 F F7(t)
3.824 E F0 .824(\(since the)3.824 F 2.184(equation t=)72 422 R F7(t)A F0
2.184(must be satis\214ed\), and must satisfy the remaining equations [)
5.184 F F7(t)A F0 5.184(/t]E. The)B(remaining case, with E = E)72 442 Q
F2(1)5 I F5<c8>-5 I F0({)A F7(s)A F2(1)5 I F1<ae>-5 I F7(s)A F2(2)5 I F0
(=)3 -5 M F7(t)3 E F2(1)5 I F1<ae>-5 I F7(t)A F2(2)5 I F0
(}, is straightforw)-5 I(ard.)-.12 E/F8 12/Times-Bold@0 SF
(8.2. Most general matching substitutions)72 485.6 Q F0 .209
(Let C be a set of coercion e)97 509.2 R(xpressions)-.18 E F7(s)3.209 E
F5<cd>A F7(t)A F0 3.208(,w)C(here)-3.208 E F7(s)3.208 E F0(and)3.208 E
F7(t)3.208 E F0 .208(may not match. Then S is)3.208 F(a)72 529.2 Q F4
(matc)3.374 E .374(hing substitution for)-.18 F F0 3.374(Ci)3.374 G .374
(f, for e)-3.374 F -.18(ve)-.3 G(ry).18 E F7(s)3.374 E F5<cd>A F7(t)A F0
.374(in C, the e)3.374 F .374(xpressions S)-.18 F F7(s)A F0 .374(and S)
3.374 F F7(t)A F0 3.375(match. A)3.375 F 1.08
(matching substitution S is a)72 549.2 R F4 1.08(most g)4.08 F(ener)-.12
E 1.08(al matc)-.18 F 1.08(hing substitution)-.18 F F0 1.08(if e)4.08 F
-.18(ve)-.3 G 1.08(ry other matching).18 F .158(substitution R may be o\
btained as the composition of S with some substitution T)72 569.2 R
6.158(.M)-.888 G(atch-)-6.158 E .1
(ing substitutions are related to uni\214cation by the follo)72 589.2 R
.1(wing lemma.)-.3 F 3.099(As)6.099 G .099(ubstitution is)-3.099 F F4
(vari-)3.099 E(able-to-variable)72 609.2 Q F0
(if it is a function from v)3 E(ariables to v)-.3 E(ariables.)-.3 E(L)97
636.4 Q F3(EMMA)A F0(29.)4.08 E F4 1.08
(Let C be a set of possibly non-matc)7.08 F 1.08(hing containment e)-.18
F(xpr)-.24 E(essions)-.444 E F7(s)97 656.4 Q F5<cd>A F7(t)A F4
(and let E be the set of equations)3 E F0 3(E={)133 682.4 S F7(s)-3 E F0
(=)A F7(t)A F0(|)3 E F7(s)3 E F5<cd>A F7(t)A F5<ce>3.96 E F0(C}.)2.04 E
F4 .807(Then S is a matc)97 708.4 R .807(hing substitution for C if)-.18
F 3.807(ft)-.216 G(her)-3.807 E 3.807(ei)-.444 G 3.807(sav)-3.807 G .807
(ariable-to-variable sub-)-3.807 F(stitution T suc)97 728.4 Q 3(ht)-.18
G(hat T)-3 E F5<b0>3.6 I F4 3(Su)-3.6 K(ni\214es E.)-3 E EP
%%Page: 47 47
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-4)275.004 56 S 3(7-)-3 G(P)97 92 Q/F1 9
/Times-Roman@0 SF -.36(RO)C(OF).36 E F0 6.192(.S)3.192 G .192
(uppose T is v)-6.192 F(ariable-to-v)-.3 E .192(ariable and T)-.3 F/F2
12/Symbol SF<b0>3.6 I F0 3.192(Su)-3.6 K .193(ni\214es E.)-3.192 F .193
(Since T is v)6.193 F(ariable-to-)-.3 E -.3(va)72 112 S 3.42(riable, S)
.3 F/F3 12/Symbol-Slanted SF(s)A F0 3.419(matches T\(S)6.42 F F3(s)A F0
6.419(\)a)C 3.419(nd S)-6.419 F F3(t)A F0 3.419(matches T\(S)6.419 F F3
(t)A F0 6.419(\)f)C 3.419(or e)-6.419 F -.18(ve)-.3 G(ry).18 E F3(s)
6.419 E F2<cd>A F3(t)A F0 3.419(in C.)6.419 F 3.419(But since)9.419 F
(T\(S)72 132 Q F3(s)A F0(\)=T\(S)A F3(t)A F0
(\), S must be a matching substitution for C.)A 2.733 -.96(To p)97 155.6
T(ro).96 E 1.173 -.18(ve t)-.18 H .813(he con).18 F -.18(ve)-.48 G .814
(rse, suppose S is a matching substitution for C, and let T be the).18 F
2.082(substitution which maps all v)72 175.6 R 2.082
(ariables to some arbitrarily chosen v)-.3 F 2.082(ariable t.)-.3 F
2.082(Then, for)8.082 F -2.58 -.3(ev e)72 195.6 T(ry).3 E F3(s)4.54 E F0
(=)A F3(t)A F0 1.54(in E, we kno)4.54 F 4.54(wt)-.3 G 1.541(hat S)-4.54
F F3(s)A F0 1.541(and S)4.541 F F3(t)A F0(dif)4.541 E 1.541
(fer only in the names of v)-.3 F 1.541(ariables, and so)-.3 F(T\(S)72
215.6 Q F3(s)A F0(\)=T\(S)A F3(t)A F0(\). Thus T)A F2<b0>3.6 I F0 3(Su)
-3.6 K(ni\214es E.)-3 E 4.534 -.96(We w)97 239.2 T 2.614
(ill use this lemma to design a matching algorithm.).96 F(Essentially)
8.613 E 5.613(,a)-.78 G(lgorithm)-5.613 E/F4 10/Times-Roman@0 SF(MA)72
259.2 Q(TCH)-1.11 E F0 .037
(will \214rst unify a set of equations, and then e)3.037 F .037
(xtract a most general matching substi-)-.18 F .501
(tution from the most general uni\214er)72 279.2 R 6.5(.W)-.66 G .5
(hile this may seem an unnecessarily indirect w)-6.5 F(ay)-.12 E .641(o\
f computing a most general matching substitution, it is actually quite \
ef)72 299.2 R .641(\214cient when we)-.3 F 3.889(implement uni\214catio\
n using the usual graph representation of terms [P)72 319.2 R 3.889
(aterson and)-.18 F -1.26 -.96(We g)72 339.2 T
(man 78, Aho, Sethi and Ullman 86].).96 E .058(It is w)97 362.8 R .058
(orth mentioning that Lemma 29 f)-.12 F .058
(ails when constants are added to type e)-.12 F(xpres-)-.18 E .479
(sions. F)72 382.8 R .479(or e)-.18 F .479(xample, C={s)-.18 F F2<cd>A
F0 .479(a, s)B F2<cd>A F0 .479(b} has a matching substitution \(namely)B
3.479(,t)-.78 G .479(he identity sub-)-3.479 F .386(stitution\), b)72
402.8 R .387(ut E={s=a, s=b} cannot be uni\214ed since a and b are dif)
-.24 F .387(ferent constants. Ho)-.3 F(w-)-.3 E -2.58 -.3(ev e)72 422.8
T 2.008 -.48(r, b).3 H 4.048(yt).48 G 1.048(reating constants as v)
-4.048 F 1.047(ariables, we may still use Lemma 29 to reduce matching)
-.3 F(with constants to uni\214cation with constants.)72 442.8 Q .82
(The reduction of matching to uni\214cation requires a fe)97 466.4 R
3.82(wp)-.3 G .82(reliminary de\214nitions and)-3.82 F 3.072(lemmas. If)
72 486.4 R F3(s)3.072 E F0 .072(is an)3.072 F 3.072(yt)-.18 G .072
(ype e)-3.072 F .072
(xpression, it is easy to construct a most general type e)-.18 F
(xpression)-.18 E F3(t)72 506.4 Q F0(matching)3.94 E F3(s)3.94 E F0 .941
(simply by replacing each v)3.94 F .941(ariable occurrence in)-.3 F F3
(s)3.941 E F0 .941(by a distinct fresh v)3.941 F(ari-)-.3 E 3.881
(able. By)72 526.4 R 3.881(as)3.881 G .881(imilar process, we can "f)
-3.881 F .881(actor" an)-.12 F 3.881(ys)-.18 G .881
(ubstitution S into the composition of a)-3.881 F .025(substitution S)72
546.4 R F4(1)5 I F0 .026(which produces a most general type matching St\
 for each t we choose, and)3.025 -5 N 3(as)72 566.4 S(ubstitution S)-3 E
F4(2)5 I F0(that replaces v)3 -5 M(ariables to mak)-.3 E 3(e\()-.12 G(S)
-3 E F4(2)5 I F2<b0>-1.4 I F0(S)-3.6 I F4(1)5 I F0(\)t=St.)-5 I(Let)97
590 Q/F5 12/Times-Bold@0 SF(V)3.097 E F0 .097(be a set of type v)3.097 F
3.097(ariables. A)-.3 F .096(substitution S)3.096 F/F6 12/Times-Italic@0
SF -.18(ch)3.096 G .096(ooses variables fr).18 F .096(eely on)-.444 F F5
(V)3.096 E F0 .096(if \(i\))3.096 F(for each v)72 610 Q F2<ce>.96 E F5
(V)-.96 E F0 3(,n)C 3(ot)-3 G(ype v)-3 E(ariable appears twice in Sv)-.3
E .437(\(ii\) for distinct u, v)72 650 R F2<ce>.96 E F5(V)-.96 E F0
3.437(,n)C 3.437(ot)-3.437 G .437(ype v)-3.437 F .437
(ariable in Su appears in Sv)-.3 F 6.438(.E)-.78 G(ssentially)-6.438 E
3.438(,t)-.78 G .438(his means that)-3.438 F .89(if v)72 670 R F4(1)5 I
F0 3.89(,v)-5 K F4(2)-3.89 5 M F0 3.89(,.)-5 K 3.89(.. is)-3.89 F .89
(an enumeration of)3.89 F F5(V)3.89 E F0 3.89(,t)C .89(hen no type v)
-3.89 F .89(ariable appears twice in the list Sv)-.3 F F4(1)5 I F0(,)-5
I(Sv)72 690 Q F4(2)5 I F0 3(,.)-5 K 3(.. The)-3 F(follo)3 E
(wing lemma is easy to pro)-.3 E -.18(ve)-.18 G(.).18 E(L)97 717.2 Q F1
(EMMA)A F0(30.)4.441 E F6 1.441(Suppose substitution S c)7.441 F 1.441
(hooses variables fr)-.18 F 1.441(eely on)-.444 F F5(V)4.441 E F6 1.441
(and that T)4.441 F -.18(ch)97 737.2 S 1.76(ooses variables fr).18 F
1.76(eely on the set of all type variables occurring in Sv)-.444 F 4.759
(,f)-.888 G(or)-4.759 E EP
%%Page: 48 48
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-4)275.004 56 S 3(8-)-3 G/F1 12/Times-Italic@0
SF(v)97 92 Q/F2 12/Symbol SF<ce>.96 E/F3 12/Times-Bold@0 SF(V)-.96 E F1
6(.T)C(hen S)-6 E F2<b0>3.6 I F1 3(Tc)-3.6 K(hooses variables fr)-3.18 E
(eely on)-.444 E F3(V)3 E F1(.)A F0(The proof is straightforw)72 112 Q
(ard and is omitted.)-.12 E 3.099 -.96(We w)97 135.6 T 1.179(ill no).96
F 4.179(ws)-.3 G(ho)-4.179 E 4.179(wh)-.3 G 1.779 -.3(ow t)-4.179 H
4.179(of).3 G 1.179(actor an)-4.299 F 4.179(ys)-.18 G 1.179
(ubstitution into the composition of one that)-4.179 F .783(chooses v)72
155.6 R .783(ariables freely and one that replaces the freely-chosen v)
-.3 F .783(ariables to produce the)-.3 F .417(original substitution.)72
175.6 R .417(It will be useful to write S=)6.417 F/F4 10/Times-Bold@0 SF
(V)5 I F0 3.417(Ti)-5 K 3.417(fs)-3.417 G .418
(ubstitutions S and T agree on all)-3.417 F -.3(va)72 195.6 S
(riables from).3 E F3(V)3 E F0(.)A(L)97 222.8 Q/F5 9/Times-Roman@0 SF
(EMMA)A F0(31.)3.596 E F1 .596(Let S be any substitution and let)6.596 F
F3(V)3.596 E F1 .595(be a set of type variables suc)3.595 F(h)-.18 E
.982(that ther)97 242.8 R 3.982(ea)-.444 G 1.87 -.444(re i)-3.982 H .982
(n\214nitely many type variables not in).444 F F3(V)3.983 E F1 6.983(.T)
C(her)-6.983 E 3.983(ea)-.444 G 1.871 -.444(re s)-3.983 H(ubstitutions)
.444 E(S)97 262.8 Q/F6 10/Times-Italic@0 SF(1)5 I F1 .417(and S)3.417 -5
N F6(2)5 I F1 3.417(,c)-5 K .417(omputable fr)-3.417 F .416
(om a symbolic r)-.54 F(epr)-.444 E .416(esentation of S in linear time)
-.444 F 3.416(,s)-.12 G(uc)-3.416 E(h)-.18 E 1.408(that S)97 282.8 R F6
(1)5 I F1 -.18(ch)4.408 -5 O 1.409(ooses variables fr).18 F 1.409
(eely on)-.444 F F3(V)4.409 E F1 4.409(,s)C 1.409(ubstitution S)-4.409 F
F6(2)5 I F1 1.409(is variable-to-variable)4.409 -5 N(,)-.12 E 1.849
(and S =)97 302.8 R F4(V)5 I F1(S)4.849 -5 M F6(2)5 I F2<b0>-1.4 I F1(S)
-3.6 I F6(1)5 I F1 7.849(.F)-5 K(urthermor)-7.849 E 2.088 -.12(e, i)
-.444 H 4.848(fS=).12 G F4(V)-4.848 5 M F1(T)4.848 -5 M F6(2)5 I F2<b0>
-1.4 I F1(T)-3.6 I F6(1)5 I F1 1.848(for some variable-to-variable)4.848
-5 N 2.851(substitution T)97 322.8 R F6(2)5 I F1 5.851(,t)-5 K 2.851
(hen ther)-5.851 F 5.851(ee)-.444 G 2.852
(xists a variable-to-variable substitution R with)-6.091 F(T)97 342.8 Q
F6(1)5 I F1(=)-5 I F4(V)5 I F1(R)-5 I F2<b0>3.6 I F1(S)-3.6 I F6(1)5 I
F1(.)-5 I F0(P)97 370 Q F5 -.36(RO)C(OF).36 E F0 6.575(.T)3.575 G 3.575
(od)-7.535 G .575(e\214ne S)-3.575 F/F7 10/Times-Roman@0 SF(1)5 I F0
.575(and S)3.575 -5 N F7(2)5 I F0 3.575(,l)-5 K .575(et v)-3.575 F F7(1)
5 I F0 3.575(,v)-5 K F7(2)-3.575 5 M F0 3.574(,.)-5 K .574
(.. be an enumeration)-3.574 F F3(V)3.574 E F0 .574
(and let us partition)3.574 F 1.02(the complement of)72 390 R F3(V)4.02
E F0 1.02(into disjoint in\214nite sets)4.02 F F3(V)4.02 E F7(1)5 I F0
(,)-5 I F3(V)4.021 E F7(2)5 I F0 4.021(,.)-5 K 4.021(.. This)-4.021 F
1.021(is a technical de)4.021 F 1.021(vice for)-.3 F .835
(associating a dif)72 410 R .835(ferent set of type v)-.3 F .835
(ariables with each element of)-.3 F F3(V)3.835 E F0 6.835(.I)C 3.834
(tw)-6.835 G .834(ill also be con-)-3.834 F -.18(ve)72 430 S
(nient to choose some enumeration of each).18 E F3(V)3 E F7(i)5 I F0 3
(,s)-5 K(ay)-3 E F3(V)3 E F7(i)5 I F0 3(={)3 -5 O(v)-3 E F7(i,1)5 I F0 3
(,v)-5 K F7(i,2)-3 5 M F0 3(,.)-5 K(..}.)-3 E -.18(Fo)97 453.6 S 3.133
(re).18 G .133(ach v)-3.133 F F7(i)5 I F2<ce>.96 -5 M F3(V)-.96 E F0
3.133(,l)C .133(et S)-3.133 F F7(1)5 I F0(v)-5 I F7(i)5 I F0 .134
(be the type e)3.133 -5 N .134(xpression deri)-.18 F -.18(ve)-.3 G 3.134
(df).18 G .134(rom Sv)-3.134 F F7(i)5 I F0 .134(by replacing the j-th)
3.134 -5 N -.3(va)72 473.6 S 1.372(riable occurrence in Sv).3 F F7(i)5 I
F0 1.371(\(reading the e)4.372 -5 N 1.371
(xpression from left-to-right, say\), with the j-th)-.18 F -.3(va)72
493.6 S .338(riable v).3 F F7(i,j)5 I F0(from)3.338 -5 M F3(V)3.338 E F7
(i)5 I F0 6.338(.L)-5 K .338(et S)-6.338 F F7(2)5 I F0 .338(map v)3.338
-5 N F7(i,j)5 I F0 .338(back to the v)3.338 -5 N .339
(ariable occurring in the j-th position in)-.3 F(Sv)72 513.6 Q F7(i)5 I
F0 6.549(.S)-5 K .549(ince the)-6.549 F F3(V)3.549 E F7(i)5 I F0 1.869
-.66('s a)-5 L .549(re disjoint, and each v).66 F .549
(ariable occurrence in S)-.3 F F7(1)5 I F0(v)-5 I F7(i)5 I F0 .548
(contains a dif)3.549 -5 N(ferent)-.3 E(v)72 533.6 Q F7(i,j)5 I F0 3.829
(,s)-5 K .829(ubstitution S)-3.829 F F7(1)5 I F0 .829(chooses v)3.829 -5
N .829(ariables freely on)-.3 F F3(V)3.829 E F0 6.829(.I)C 3.83(ts)
-6.829 G .83(hould be clear from the de\214nition)-3.83 F .168(that S)72
553.6 R F7(2)5 I F0 .168(is v)3.168 -5 N(ariable-to-v)-.3 E .167
(ariable and S =)-.3 F F4(V)5 I F0(S)3.167 -5 M F7(2)5 I F2<b0>-1.4 I F0
(S)-3.6 I F7(1)5 I F0 6.167(.S)-5 K .167(ince S)-6.167 F F7(1)5 I F0
.167(and S)3.167 -5 N F7(2)5 I F0 .167(may be constructed using)3.167 -5
N 3.136(as)72 573.6 S .137(ingle left-to-right scan of a symbolic repre\
sentation of S, both may be computed in lin-)-3.136 F(ear time.)72 593.6
Q -.18(Fo)97 617.2 S 3.158(rt).18 G .158
(he second part of the lemma, suppose S =)-3.158 F F4(V)5 I F0(T)3.158
-5 M F7(2)5 I F2<b0>-1.4 I F0(T)-3.6 I F7(1)5 I F0 3.158(,w)-5 K .157
(ith T)-3.158 F F7(2)5 I F0 -.3(va)3.157 -5 O(riable-to-v).3 E(ariable.)
-.3 E .356(Since S)72 637.2 R F7(2)5 I F0 .356(and T)3.356 -5 N F7(2)5 I
F0 .357(are both v)3.356 -5 N(ariable-to-v)-.3 E .357
(ariable substitutions, the three type e)-.3 F .357(xpressions Sv)-.18 F
(,)-.78 E(S)72 657.2 Q F7(1)5 I F0 3.798(va)-5 K .798(nd T)-3.798 F F7
(1)5 I F0 3.798(vm)-5 K .798(ust match, for each v)-3.798 F F2<ce>.96 E
F3(V)-.96 E F0 3.798(.T)C .798(herefore, since S)-3.798 F F7(1)5 I F0
.798(chooses v)3.798 -5 N .798(ariables freely on)-.3 F F3(V)72 677.2 Q
F0 3.618(,t)C .619(here is a function \(substitution\) R mapping the v)
-3.618 F .619(ariable occurring in the j-th position)-.3 F .158(of S)72
697.2 R F7(1)5 I F0 3.158(vt)-5 K 3.158(ot)-3.158 G .157(he v)-3.158 F
.157(ariable occurring in the j-th position of T)-.3 F F7(1)5 I F0 4.717
-.78(v. S)-5 L .157(ince T).78 F F7(1)5 I F0(=)3.157 -5 M F4(V)5 I F0(R)
3.157 -5 M F2<b0>3.6 I F0(S)-3.6 I F7(1)5 I F0 3.157(,t)-5 K .157
(his pro)-3.157 F -.18(ve)-.18 G(s).18 E(the lemma.)72 717.2 Q EP
%%Page: 49 49
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-4)275.004 56 S 3(9-)-3 G 1.92 -.96(We m)97 92
T(ay no).96 E 3(wc)-.3 G
(ombine Lemmas 31 and 29 to reduce matching to uni\214cation.)-3 E(L)97
119.2 Q/F1 9/Times-Roman@0 SF(EMMA)A F0(32.)3.735 E/F2 12/Times-Italic@0
SF(Ther)6.735 E 3.735(ei)-.444 G 3.735(sa)-3.735 G 3.735(na)-3.735 G
(lgorithm)-3.735 E/F3 10/Times-Italic@0 SF(MA)3.735 E(TCH)-.37 E F2
(whic)3.735 E .736(h, given a \214nite set of coer)-.18 F(cion)-.444 E
-.24(ex)97 139.2 S(pr).24 E 2.519(essions C, pr)-.444 F 2.518
(oduces a most g)-.54 F(ener)-.12 E 2.518(al matc)-.18 F 2.518
(hing substitution for C if any)-.18 F(matc)97 159.2 Q
(hing substitution e)-.18 E(xists, and fails otherwise)-.24 E(.)-.18 E
F0 .992(It will be clear from the proof that)97 182.8 R/F4 10
/Times-Roman@0 SF(MA)3.993 E(TCH)-1.11 E F0 .993(has the same comple)
3.993 F .993(xity as uni\214cation,)-.18 F(pro)72 202.8 Q 2.353(vided t\
hat uni\214cation produces a representation of the most general uni\214\
er S that)-.18 F(allo)72 222.8 Q .661(ws us to read of)-.3 F 3.661(fS)
-.3 G 3.661(tf)-3.661 G .661(or each type v)-3.661 F .662
(ariable t. This is actually a nontri)-.3 F .662(vial assumption,)-.3 F
1.912(since man)72 242.8 R 4.912(yi)-.18 G 1.912
(mplementations of uni\214cation will produce a composition S)-4.912 F
F4(1)5 I/F5 12/Symbol SF<b0>-1.4 I F0(S)-3.6 I F4(2)5 I F5<b0>-1.4 I F0
(...)-3.6 I F5<b0>3.6 I F0(S)-3.6 I F4(k)5 I F0(of)4.911 -5 M(se)72
262.8 Q -.18(ve)-.3 G .867
(ral substitutions, and the number of operations in).18 F -.24(vo)-.48 G
(lv).24 E .867(ed in simplifying such a result)-.18 F .692
(may be quadratic in the length of the input.)72 282.8 R(Ho)6.692 E(we)
-.3 E -.18(ve)-.3 G 1.652 -.48(r, w).18 H .691
(hen terms are represented using).48 F 3
(graphs, the unifying substitution is generally represented as an equi)
72 302.8 R -.3(va)-.3 G 3(lence relation.).3 F(Algorithm)72 322.8 Q F4
(MA)3.391 E(TCH)-1.11 E F0 .391(may then be implemented ef)3.391 F .39
(\214ciently as an algorithm for accessing the)-.3 F
(graph data structure.)72 342.8 Q(P)97 370 Q F1 -.36(RO)C(OF).36 E F0
6.26(.L)3.26 G .26(et E = {)-6.26 F/F6 12/Symbol-Slanted SF(s)A F0(=)A
F6(t)A F0(|)3.26 E F6(s)3.26 E F5<cd>A F6(t)A F5<ce>4.221 E F0 .261
(C} be the set of equations determined by C and let)2.301 F/F7 12
/Times-Bold@0 SF(V)3.261 E F0 .877(be the set of type v)72 390 R .877
(ariables occurring in C.)-.3 F(Gi)6.877 E -.18(ve)-.3 G 3.877(nC).18 G
3.877(,a)-3.877 G(lgorithm)-3.877 E F4(MA)3.877 E(TCH)-1.11 E F0 .877
(\214rst computes a)3.877 F .012(most general uni\214er S for E.)72 410
R .012(If there is no uni\214er)6.012 F 3.012(,t)-.48 G(hen)-3.012 E F4
(MA)3.012 E(TCH)-1.11 E F2(fails.)3.013 E F0 .013(Otherwise, the algo-)
6.013 F .784(rithm computes a substitution S)72 430 R F4(1)5 I F0 .784
(choosing v)3.784 -5 N .784(ariables freely on)-.3 F F7(V)3.784 E F0
.784(such that S=)3.784 F/F8 10/Times-Bold@0 SF(V)5 I F0(S)-5 I F4(2)5 I
F5<b0>-1.4 I F0(S)-3.6 I F4(1)5 I F0(for)3.784 -5 M .254(some v)72 450 R
(ariable-to-v)-.3 E .254(ariable substitution S)-.3 F F4(2)5 I F0 3.254
(,a)-5 K .254(nd returns S)-3.254 F F4(1)5 I F0 .255(as the result.)
3.254 -5 N .255(By Lemma 29 and)6.255 F .622
(the properties of uni\214cation, we kno)72 470 R 3.622(wt)-.3 G(hat)
-3.622 E F4(MA)3.622 E(TCH)-1.11 E F0 .622(succeeds with S)3.622 F F4(1)
5 I F0(if)3.622 -5 M 3.622(ft)-.3 G .622(here is a match-)-3.622 F .402
(ing substitution.)72 490 R .402(It remains to be sho)6.402 F .402
(wn that when)-.3 F F4(MA)3.403 E(TCH)-1.11 E F0 .403(succeeds, S)3.403
F F4(1)5 I F0 3.403(is in)3.403 -5 N -.12(fa)3.403 G .403(ct a most).12
F(general matching substitution for C.)72 510 Q .431(Let R be an)97
533.6 R 3.431(ym)-.18 G .431(atching substitution for C.)-3.431 F .431
(By Lemma 29, there e)6.431 F .43(xists a v)-.18 F(ariable-to-)-.3 E -.3
(va)72 553.6 S .334(riable substitution T with T).3 F F5<b0>3.6 I F0
3.334(Ru)-3.6 K(nifying)-3.334 E F7(E)3.334 E F0 6.334(.T)C .335
(herefore, since S is a most general uni\214er)-6.334 F(,)-.48 E
(there is a substitution U with)72 573.6 Q(U)108 599.6 Q F5<b0>3.6 I F0
3(S=U)-3.6 K F5<b0>-3 3.6 M F0(S)-3.6 I F4(2)5 I F5<b0>-1.4 I F0(S)-3.6
I F4(1)5 I F0 3(=T)3 -5 O F5<b0>-3 3.6 M F0(R.)-3.6 I .477
(By Lemma 31 we can "f)72 625.6 R .476(actor" U)-.12 F F5<b0>3.6 I F0(S)
-3.6 I F4(2)5 I F0 .476(into U)3.476 -5 N F4(1)5 I F0 .476(choosing v)
3.476 -5 N .476(ariables freely)-.3 F 3.476(,a)-.78 G .476(nd a v)-3.476
F(ariable-to-)-.3 E -.3(va)72 645.6 S(riable substitution U).3 E F4(2)5
I F0 6(.T)-5 K(his gi)-6 E -.18(ve)-.3 G 3(su).18 G(s)-3 E(U)108 671.6 Q
F4(2)5 I F5<b0>-1.4 I F0(U)-3.6 I F4(1)5 I F5<b0>-1.4 I F0(S)-3.6 I F4
(1)5 I F0 3(=T)3 -5 O F5<b0>-3 3.6 M F0(R.)-3.6 I .525
(But by Lemma 30, we kno)72 697.6 R 3.525(wt)-.3 G .525(hat U)-3.525 F
F4(1)5 I F5<b0>-1.4 I F0(S)-3.6 I F4(1)5 I F0 .525(chooses v)3.525 -5 N
.525(ariables freely on)-.3 F F7(V)3.526 E F0 3.526(.T)C .526
(herefore, by the)-3.526 F .743
(second part of Lemma 31, we may conclude V)72 717.6 R F5<b0>3.6 I F0(U)
-3.6 I F4(1)5 I F5<b0>-1.4 I F0(S)-3.6 I F4(1)5 I F0 3.743(=R)3.743 -5 O
.742(for some v)-.001 F(ariable-to-v)-.3 E(ariable)-.3 E(substitution V)
72 737.6 Q 6(.T)-1.548 G(his sho)-6 E(ws that S)-.3 E F4(1)5 I F0
(is a most general matching for C.)3 -5 M EP
%%Page: 50 50
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-5)275.004 56 S 3(0-)-3 G/F1 12/Times-Bold@0
SF(Refer)274.124 92 Q(ences)-.216 E F0 .282
([Aho, Hopcroft and Ullman] Aho, A.V)72 132 R .282
(., Hopcroft, J.E. and Ullman, J.D.,)-1.548 F/F2 12/Times-Italic@0 SF
.282(Data Structur)3.282 F(es)-.444 E(and Algorithms)72 152 Q F0 6(.A)C
(ddison-W)-6 E(esle)-.96 E 1.56 -.78(y, 1)-.18 H(983.).78 E .121
([Aho, Sethi and Ullman 86] Aho, A.V)72 192 R 3.121(.a)-1.548 G .121
(nd Sethi, R. and Ullman, J.D.,)-3.121 F F2(Compiler)3.12 E .12
(s: princi-)-.12 F(ples, tec)72 212 Q(hniques, tools)-.18 E F0 6(.A)C
(ddison-W)-6 E(esle)-.96 E 1.56 -.78(y, 1)-.18 H(986.).78 E([Barendre)72
252 Q 3.207(gt 84] Barendre)-.18 F 3.207(gt, H.P)-.18 F(.,)-1.332 E F2
3.208(The Lambda Calculus: Its Syntax and Semantics)6.207 F F0(.)A
(North Holland, 1984 \(re)72 272 Q(vised edition\).)-.3 E([Barendre)72
312 Q .945(gt, Coppo and Dezani 83] Barendre)-.18 F .944
(gt, H., Coppo, M. and Dezani-Ciancaglini,)-.18 F 2.136
(M., A Filter Lambda Model and the Completeness of T)72 332 R 2.136
(ype Assignment.)-.96 F F2 2.736 -.3(J. S)8.136 H(ymbolic).3 E(Lo)72 352
Q(gic)-.12 E F0(48, 4; 1983, pages 931-940.)3 E .186
([Cardelli 88] Cardelli, L., A Semantics of Multiple Inheritance.)72 392
R F2 .185(Information and Compu-)6.185 F(tation)72 412 Q F0 1.964
(76,1988, pages 138-164.)4.964 F 1.964(Special issue de)7.964 F -.24(vo)
-.3 G 1.964(ted to).24 F F2 1.964(Symp. on Semantics of Data)4.964 F
-.888(Ty)72 432 S(pes,).888 E F0(Sophia-Antipolis \(France\), 1984.)3 E
2.393([Cardelli and Mitchell 89] Cardelli, L. and Mitchell, J.C., Opera\
tions on records.)72 472 R(In)8.393 E F2 1.206(Math. F)72 492 R 1.206
(oundations of Pr)-1.26 F -.12(og)-.54 G 4.206(.L)-.06 G(ang)-4.206 E
7.206(.S)-.18 G(emantics)-7.206 E F0 4.206(,1)C 4.206(989. T)-4.206 F
4.206(oa)-.96 G(ppear)-4.206 E 4.206(.A)-.66 G 1.206(lso a)-4.206 F -.3
(va)-.24 G 1.206(ilable as DEC).3 F(SRC T)72 512 Q
(echnical Report 48, August 1989, 60 pages.)-.84 E 1.522
([Coppo, Dezani and V)72 552 R 1.522
(enneri] Coppo, M. and Dezani-Ciancaglini, M.)-1.332 F 1.521(and V)7.522
F 1.521(enneri, B.,)-1.332 F 1.846
(Principal type schemes and lambda calculus semantics.)72 572 R(In)7.846
E F2 4.054 -1.104(To H)7.846 H 1.846(.B. Curry: Essays on)1.104 F .415
(Combinatory Lo)72 592 R 3.415(gic, Lambda)-.12 F .415(Calculus and F)
3.415 F(ormalism)-1.26 E F0 3.415(,p)C .414(ages 535-560.)-3.415 F .414
(Academic Press,)6.414 F(1980.)72 612 Q 1.092
([Coppo 83] Coppo, M., On the semantics of polymorphism.)72 652 R F2
1.092(Acta Informatica)7.092 F F0(20,1983,)4.092 E(pages 159-170.)72 672
Q 2.274([Curry and Fe)72 712 R 2.274(ys 58] Curry)-.18 F 5.274(,H)-.78 G
2.274(.B and Fe)-5.274 F 2.274(ys, R.,)-.18 F F2 2.274(Combinatory Lo)
5.274 F 2.274(gic I)-.12 F F0 8.274(.N)C(orth-Holland,)-8.274 E(1958.)72
732 Q EP
%%Page: 51 51
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-5)275.004 56 S 3(1-)-3 G .115
([Damas and Milner 82] Damas, L. and Milner)72 92 R 3.115(,R)-.48 G .116
(., Principal T)-3.115 F .116(ype Schemes for Functional)-.96 F 5.146
(Programs. In)72 112 R/F1 12/Times-Italic@0 SF 2.146(9-th A)5.146 F
2.146(CM Symposium on Principles of Pr)-.36 F -.12(og)-.54 G -.18(ra).12
G 2.145(mming Langua).18 F -.12(ge)-.12 G(s).12 E F0 5.145(,1)C(982,)
-5.145 E(pages 207-212.)72 132 Q([Dw)72 172 Q .201
(ork, Kanellakis and Mitchell 84] Dw)-.12 F .201(ork, C., Kanellakis, P)
-.12 F 3.201(.a)-1.332 G .202(nd Mitchell, J.C., On the)-3.201 F
(Sequential Nature of Uni\214cation.)72 192 Q F1 .6 -.3(J. o)6 H 3(fL).3
G -.12(og)-3 G(ic Pr).12 E -.12(og)-.54 G -.18(ra).12 G(mming).18 E F0
(1,1984, pages 35-50.)3 E 3.094([Fuh and Mishra 88] Fuh, Y)72 232 R
3.094(.-C. and Mishra, P)-1.548 F 3.094(., T)-1.332 F 3.094
(ype Inference with Subtypes.)-.96 F(In)9.094 E F1(ESOP-88)72 252 Q F0 3
(,M)C(arch 1988.)-3 E 1.42
([Gordon, et. al. 79] Gordon, M.J. and R. Milner and C.P)72 292 R 4.42
(.W)-1.332 G(adsw)-5.38 E(orth,)-.12 E F1(Edinb)4.42 E(ur)-.24 E 1.42
(gh LCF)-.444 F F0(.)A(Lecture Notes in Computer Science, V)72 312 Q
(ol. 78 Springer)-1.548 E(-V)-.24 E(erlag, 1979.)-1.332 E([Hindle)72 352
Q 5.923(y6)-.18 G 2.923(9] Hindle)-5.923 F 4.483 -.78(y, R)-.18 H 2.923
(., The Principal T).78 F 2.922(ype-Scheme of an Object in Combinatory)
-.96 F(Logic.)72 372 Q F1 -1.86 -.66(Tr a)6 H(ns. AMS).66 E F0 3
(146,1969. pages)3 F(29-60.)3 E([Hindle)72 412 Q 6.433(y8)-.18 G 3.433
(3a] Hindle)-6.433 F 4.993 -.78(y, R)-.18 H 3.433
(., The Completeness Theorem for T).78 F 3.434(yping Lambda T)-.96 F
(erms.)-.84 E F1(Theor)72 432 Q 3(.C)-1.332 G(omp. Sci.)-3 E F0 3
(22,1983. pages)3 F(1-17.)3 E([Hindle)72 472 Q 5.164(y8)-.18 G 2.164
(3b] Hindle)-5.164 F 3.724 -.78(y, R)-.18 H 2.164(., Curry').78 F 5.164
(sT)-.66 G 2.164(ype Rules Are Complete with Respect to the F-)-6.124 F
(Semantics T)72 492 Q(oo.)-.96 E F1(Theor)6 E 3(.C)-1.332 G(omp. Sci.)-3
E F0 3(22,1983. pages)3 F(127-133.)3 E([Jate)72 532 Q -.06(ga)-.18 G
.601(onkar and Mitchell 88] Jate).06 F -.06(ga)-.18 G(onkar).06 E 3.601
(,L)-.48 G 3.601(.a)-3.601 G .601(nd Mitchell, J.C., ML with e)-3.601 F
.601(xtended pat-)-.18 F 2.07(tern matching and subtypes.)72 552 R(In)
8.07 E F1(Pr)5.07 E 2.069(oc. A)-.54 F 2.069
(CM Symp. Lisp and Functional Pr)-.36 F -.12(og)-.54 G -.18(ra).12 G
(mming).18 E(Langua)72 572 Q -.12(ge)-.12 G(s).12 E F0 3(,J)C
(uly 1988, pages 198-212.)-3 E .301
([Kanellakis and Mitchell 89] Kanellakis, P)72 612 R .301
(.C. and Mitchell, J.C., Polymorphic uni\214cation)-1.332 F 1.769
(and ML typing.)72 632 R(In)7.769 E F1 1.768(16-th A)4.769 F 1.768
(CM Symposium on Principles of Pr)-.36 F -.12(og)-.54 G -.18(ra).12 G
1.768(mming Langua).18 F -.12(ge)-.12 G(s).12 E F0(,)A
(1989, pages 105-115.)72 652 Q .691
([Kanellakis, Mairson and Mitchell 9+] Kanellakis, P)72 692 R .692
(.C. and Mairson, H.G. and Mitchell,)-1.332 F .8
(J.C., Uni\214cation and ML type reconstruction.)72 712 R(In)6.8 E F1
.799(Computational Lo)6.8 F .799(gic, essays in honor)-.12 F
(of {Alan Robinson})72 732 Q F0 3(,p)C 3(ages . MIT)-3 F(Press, 199+.)3
E(to appear)6 E EP
%%Page: 52 52
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-5)275.004 56 S 3(2-)-3 G .22
([Lambek and Scott 86] Lambek, J. and Scott, P)72 92 R(.J.,)-1.332 E/F1
12/Times-Italic@0 SF(Intr)3.22 E .22(oduction to Higher)-.54 F(-Or)-.24
E .22(der Cate)-.444 F(gor)-.48 E(-)-.24 E(ical Lo)72 112 Q(gic)-.12 E
F0 6(.C)C(ambridge studies in adv)-6 E(anced mathematics 7, 1986.)-.3 E
([Lei)72 152 Q -.3(va)-.3 G 1.401(nt 83a] Lei).3 F -.3(va)-.3 G 1.401
(nt, D., Polymorphic T).3 F 1.401(ype Inference.)-.96 F(In)7.401 E F1
(Pr)4.401 E 1.401(oc. 10-th A)-.54 F 1.401(CM Symp. on)-.36 F
(Principles of Pr)72 172 Q -.12(og)-.54 G -.18(ra).12 G(mming Langua).18
E -.12(ge)-.12 G(s).12 E F0 3(,1)C(983, pages 88-98.)-3 E .279
([Mac Lane 71] Mac Lane, S.,)72 212 R F1(Cate)3.279 E .279
(gories for the W)-.48 F .279(orking Mathematician)-1.104 F F0 3.279(.G)
C .279(raduate T)-3.279 F -.18(ex)-.84 G(ts).18 E(in Mathematics, V)72
232 Q(ol. 5 Springer)-1.548 E(-V)-.24 E(erlag, 1971.)-1.332 E .86([MacQ\
ueen and Sethi 82] MacQueen, D. and Sethi, R., A Semantic Model of T)72
272 R .859(ypes for)-.96 F(Applicati)72 292 Q 2.83 -.18(ve L)-.3 H 5.47
(anguages. In).18 F F1 -.36(AC)5.471 G 5.471(MS).36 G 2.471
(ymp. on Lisp and Functional Pr)-5.471 F -.12(og)-.54 G -.18(ra).12 G
(mming).18 E F0 5.471(,1)C(982,)-5.471 E(pages 243-252..)72 312 Q 2.08(\
[MacQueen, Plotkin and Sethi 86] MacQueen, D., Plotkin, G and Sethi, R.\
, An ideal)72 352 R 1.7(model for recursi)72 372 R 2.06 -.18(ve p)-.3 H
1.701(olymorphic types.).18 F F1 1.701(Information and Contr)7.701 F(ol)
-.54 E F0 1.701(71, 1/2; 1986, pages)4.701 F(95-130.)72 392 Q([Me)72 432
Q .875(yer 82] Me)-.18 F(yer)-.18 E 3.875(,A)-.48 G .874
(.R., What Is A Model of the Lambda Calculus ?.)-3.875 F F1 .874
(Information and)6.874 F(Contr)72 452 Q(ol)-.54 E F0
(52, 1; 1982, pages 87-122.)3 E 3.89([Milner 78] Milner)72 492 R 6.89
(,R)-.48 G 3.89(., A Theory of T)-6.89 F 3.89
(ype Polymorphism in Programming.)-.96 F F1(JCSS)9.891 E F0 3
(17,1978. pages)72 512 R(348-375.)3 E 1.416
([Mitchell 84a] Mitchell, J.C., Coercion and T)72 552 R 1.416
(ype Inference \(Summary\).)-.96 F(In)7.416 E F1(Pr)4.416 E 1.416
(oc. 11-th)-.54 F -.36(AC)72 572 S 3(MS).36 G(ymp. on Principles of Pr)
-3 E -.12(og)-.54 G -.18(ra).12 G 3(mming Langua).18 F -.12(ge)-.12 G(s)
.12 E F0 3(,J)C(anuary 1984, pages 175-185.)-3 E 1.3([Mitchell 88] Mitc\
hell, J.C., Polymorphic type inference and containment.)72 612 R F1
(Information)7.3 E(and Computation)72 632 Q F0(76, 2/3; 1988.)3 E 3.936
([Mitchell 90] Mitchell, J.C., T)72 672 R 3.936
(ype systems for programming languages.)-.96 F 3.936(In J. v)9.936 F(an)
-.3 E .798(Leeuwen \(ed.\),)72 692 R F1 .798(Handbook of Theor)6.798 F
.798(etical Computer Science)-.444 F 3.798(,V)-.12 G .798(olume B)-5.13
F F0 3.798(,p)C .798(ages 365--458.)-3.798 F(North-Holland, 1990.)72 712
Q EP
%%Page: 53 53
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-5)275.004 56 S 3(3-)-3 G([P)72 92 Q .307
(aterson and W)-.18 F -.18(eg)-.96 G .307(man 78] P).18 F .307
(aterson, M.S. and W)-.18 F -.18(eg)-.96 G .306
(man, M.N., Linear Uni\214cation.).18 F/F1 12/Times-Italic@0 SF(JCSS)
6.306 E F0 3(16,1978. pages)72 112 R(158-167.)3 E .259
([Remy 88] D. Remy)72 152 R 3.259(,T)-.78 G .26
(ypechecking records and v)-4.219 F .26(ariants in a natural e)-.3 F .26
(xtension of ML.)-.18 F(In)6.26 E F1(16-th A)72 172 Q
(CM Symposium on Principles of Pr)-.36 E -.12(og)-.54 G -.18(ra).12 G
(mming Langua).18 E -.12(ge)-.12 G(s).12 E F0 3(,1)C(989, pages 60-76.)
-3 E([Re)72 212 Q 2.012(ynolds 80] Re)-.18 F 2.011(ynolds, J.C.,)-.18 F
F1 2.011(Using Cate)5.011 F 2.011(gory Theory to Design Implicit Con)
-.48 F(ver)-.48 E(sions)-.12 E 7.455(and Generic Oper)72 232 R(ator)-.18
E(s)-.12 E F0 10.455(,i)C(n)-10.455 E F1(Semantics-Dir)10.455 E 7.455
(ected Compiler Gener)-.444 F(ation)-.18 E F0 10.455(,p)16.455 G(ages)
-10.455 E(211-2580.Springer)72 252 Q(-V)-.24 E
(erlag Lecture Notes in Computer Science, V)-1.332 E(ol. 94 1980.)-1.548
E .502([Robinson 65] Robinson, J.A., A Machine Oriented Logic Based on \
the Resolution Prin-)72 292 R(ciple.)72 312 Q F1 -2.4 -.48(JA C)6 H(M)
.48 E F0(12, 1; 1965.)3 E(pages 23-41.)6 E 2.854
([Scott 76] Scott, D., Data T)72 352 R 2.854(ypes as Lattices.)-.96 F F1
2.854(Siam J)8.854 F 5.854(.C)-.3 G(omputing)-5.854 E F0 2.855
(5, 3; 1976, pages)5.855 F(522-587.)72 372 Q 2.549
([Scott 80] Scott, D.S., Relating theories of the lambda calculus.)72
412 R(In)8.548 E F1 4.756 -1.104(To H)8.548 H 2.548(.B. Curry:)1.104 F
1.273(Essays on Combinatory Lo)72 432 R 1.273
(gic, Lambda Calculus and F)-.12 F(ormalism)-1.26 E F0 4.273(,p)C 1.274
(ages 403-450.)-4.273 F(Aca-)7.274 E(demic Press, 1980.)72 452 Q .738
([Smyth and Plotkin 82] Smyth, M. and Plotkin, G.D., The cate)72 492 R
.738(gory-theoretic solution of)-.18 F(recursi)72 512 Q .36 -.18(ve d)
-.3 H(omain equations.).18 E F1(SIAM J)6 E 3(.C)-.3 G(omputing)-3 E F0
(11,1982, pages 761-783.)3 E .151([Stroustrop 86] Stroustrop, B.,)72 552
R F1 .152(The $C^{++}$ Pr)3.151 F -.12(og)-.54 G -.18(ra).12 G .152
(mming Langua).18 F -.12(ge)-.12 G F0 6.152(.A).12 G(ddison-W)-6.152 E
(esle)-.96 E -.78(y,)-.18 G(1986.)72 572 Q([W)72 612 Q .604(and 87] W)
-.96 F .604(and, M., Complete T)-.96 F .604
(ype Inference for Simple Objects.)-.96 F(In)6.603 E F1(Pr)3.603 E .603
(oc. 2-nd IEEE)-.54 F .672(Symp. on Lo)72 632 R .672
(gic in Computer Science)-.12 F F0 3.672(,1)C .672(987, pages 37-44.)
-3.672 F .672(Corrigendum in {it Proc. 3-rd)6.672 F
(IEEE Symp. on Logic in Computer Science,} page 132, 1988.)72 652 Q([W)
72 692 Q .607(and and O'K)-.96 F .607(eefe 89] W)-.3 F .607
(and, M. and O'K)-.96 F .607(eefe, P)-.3 F .607(., On the comple)-1.332
F .606(xity of type inference)-.18 F 1.724(with coercion.)72 712 R(In)
7.724 E F1(Pr)4.724 E 1.724(oc. A)-.54 F 1.724(CM Conf)-.36 F 4.724(.F)
-.18 G 1.725(unctional Pr)-4.724 F -.12(og)-.54 G -.18(ra).12 G 1.725
(mming and Computer Ar).18 F -.18(ch)-.444 G(itec-).18 E(tur)72 732 Q(e)
-.444 E F0 3(,1)C(989, pages 293-298.)-3 E EP
%%Page: 54 54
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Roman@0 SF 3(-5)275.004 56 S 3(4-)-3 G EP
%%Trailer
end
%%EOF
